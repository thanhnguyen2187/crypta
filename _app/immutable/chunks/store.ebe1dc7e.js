var Xu=Object.defineProperty;var Zu=(se,ae,fe)=>ae in se?Xu(se,ae,{enumerable:!0,configurable:!0,writable:!0,value:fe}):se[ae]=fe;var w=(se,ae,fe)=>(Zu(se,typeof ae!="symbol"?ae+"":ae,fe),fe),Cr=(se,ae,fe)=>{if(!ae.has(se))throw TypeError("Cannot "+fe)};var T=(se,ae,fe)=>(Cr(se,ae,"read from private field"),fe?fe.call(se):ae.get(se)),te=(se,ae,fe)=>{if(ae.has(se))throw TypeError("Cannot add the same private member more than once");ae instanceof WeakSet?ae.add(se):ae.set(se,fe)},ue=(se,ae,fe,Ft)=>(Cr(se,ae,"write to private field"),Ft?Ft.call(se,fe):ae.set(se,fe),fe);var Ne=(se,ae,fe)=>(Cr(se,ae,"access private method"),fe);import{t as ef,a as tf}from"./index.abef3d79.js";import{J as nf,a5 as Ua,w as rf,v as sf,a6 as zn}from"./scheduler.2ab39a2c.js";import{w as Xe,r as af,d as Fa}from"./index.d8934930.js";let Pa,Ba,Dr,Ir,ja,za,Ka,Va,Mr,Ha,Wa,Kn,Or,Ga,Ya,Ja,Xa,Za,eo,Rr,to,no,ro,Qr,io,so,Ur,of=(async()=>{var Xl,Zl,ec,tc,nc,rc,ic,sc,ac,oc,lc,cc,uc,fc,pr,dc,mr,hc,_c,pc,mc,gc,wc,yc,bc,qc,vc,xc,Sc,Ec,Ac,Nc,Tc,$c,kc,Lc,Cc,Dc,Ic,Mc,Oc,Rc,Qc,Uc,Fc,Pc,Bc,jc,zc,Kc,Vc,Hc,Wc,Gc,Yc,Jc,Xc,Zc,eu,tu,nu,ru,iu,su,au,ou,lu,cu,uu,fu,du,hu,_u,pu,mu,gu,wu,yu,bu,qu,vu,xu,Su,Eu,Au,Nu,Tu,$u,ku,ve,Dt,Kt,Vt,Fr,bn,ao,qn,oo,It,Mt,Ht,we,Wt,pt,mt,vn,lo,ge,gt,rt,xe,oe,wt,yt,Ye,Gt,Pr,xn,co,Sn,uo,it,Ut,En,fo,Lu,Cu,Du;za=function(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)},Ur=function(s,r){ef(s,1,1,()=>{r.delete(s.key)})},Ka=function(s,r){s.f(),Ur(s,r)},no=function(s,r,e,o,l,u,d,g,x,q,A,k){let F=s.length,B=u.length,U=F;const h={};for(;U--;)h[s[U].key]=U;const _=[],p=new Map,v=new Map,b=[];for(U=B;U--;){const D=k(l,u,U),H=e(D);let z=d.get(H);z?o&&b.push(()=>z.p(D,r)):(z=q(H,D),z.c()),p.set(H,_[U]=z),H in h&&v.set(H,Math.abs(U-h[H]))}const P=new Set,G=new Set;function Q(D){tf(D,1),D.m(g,A),d.set(D.key,D),A=D.first,B--}for(;F&&B;){const D=_[B-1],H=s[F-1],z=D.key,le=H.key;D===H?(A=D.first,F--,B--):p.has(le)?!d.has(z)||P.has(z)?Q(D):G.has(le)?F--:v.get(z)>v.get(le)?(G.add(z),Q(D)):(P.add(le),F--):(x(H,d),F--)}for(;F--;){const D=s[F];p.has(D.key)||x(D,d)}for(;B;)Q(_[B-1]);return nf(b),_},Rr=Xe(void 0),Ja=function(s,r){const{computePosition:e,autoUpdate:o,offset:l,shift:u,flip:d,arrow:g,size:x,autoPlacement:q,hide:A,inline:k}=Ua(Rr),F={open:!1,autoUpdateCleanup:()=>{}},B=':is(a[href], button, input, textarea, select, details, [tabindex]):not([tabindex="-1"])';let U;const h="https://www.skeleton.dev/utilities/popups";let _,p;function v(){_=document.querySelector(`[data-popup="${r.target}"]`)??document.createElement("div"),p=_.querySelector(".arrow")??document.createElement("div")}v();function b(){var le,Oe,Me,Je,Be,ne,X,he;if(!_)throw new Error(`The data-popup="${r.target}" element was not found. ${h}`);if(!e)throw new Error(`Floating UI 'computePosition' not found for data-popup="${r.target}". ${h}`);if(!l)throw new Error(`Floating UI 'offset' not found for data-popup="${r.target}". ${h}`);if(!u)throw new Error(`Floating UI 'shift' not found for data-popup="${r.target}". ${h}`);if(!d)throw new Error(`Floating UI 'flip' not found for data-popup="${r.target}". ${h}`);if(!g)throw new Error(`Floating UI 'arrow' not found for data-popup="${r.target}". ${h}`);const z=[];x&&z.push(x((le=r.middleware)==null?void 0:le.size)),q&&z.push(q((Oe=r.middleware)==null?void 0:Oe.autoPlacement)),A&&z.push(A((Me=r.middleware)==null?void 0:Me.hide)),k&&z.push(k((Je=r.middleware)==null?void 0:Je.inline)),e(s,_,{placement:r.placement??"bottom",middleware:[l(((Be=r.middleware)==null?void 0:Be.offset)??8),u(((ne=r.middleware)==null?void 0:ne.shift)??{padding:8}),d((X=r.middleware)==null?void 0:X.flip),g(((he=r.middleware)==null?void 0:he.arrow)??{element:p||null}),...z]}).then(({x:ye,y:bt,placement:Re,middlewareData:qt})=>{if(Object.assign(_.style,{left:`${ye}px`,top:`${bt}px`}),p){const{x:Yt,y:Nn}=qt.arrow,Tn={top:"bottom",right:"left",bottom:"top",left:"right"}[Re.split("-")[0]];Object.assign(p.style,{left:Yt!=null?`${Yt}px`:"",top:Nn!=null?`${Nn}px`:"",right:"",bottom:"",[Tn]:"-4px"})}})}function P(){_&&(F.open=!0,r.state&&r.state({state:F.open}),b(),_.style.display="block",_.style.opacity="1",_.style.pointerEvents="auto",_.removeAttribute("inert"),F.autoUpdateCleanup=o(s,_,b),U=Array.from(_==null?void 0:_.querySelectorAll(B)))}function G(z){if(!_)return;const le=parseFloat(window.getComputedStyle(_).transitionDuration.replace("s",""))*1e3;setTimeout(()=>{F.open=!1,r.state&&r.state({state:F.open}),_.style.opacity="0",_.setAttribute("inert",""),F.autoUpdateCleanup&&F.autoUpdateCleanup(),z&&z()},le)}function Q(){F.open===!1?P():G()}function D(z){var Oe;if(F.open===!1||s.contains(z.target))return;if(_&&_.contains(z.target)===!1){G();return}const le=r.closeQuery===void 0?"a[href], button":r.closeQuery;le!==""&&((Oe=_==null?void 0:_.querySelectorAll(le))==null||Oe.forEach(Me=>{Me.contains(z.target)&&G()}))}const H=z=>{if(F.open===!1)return;const le=z.key;if(le==="Escape"){z.preventDefault(),s.focus(),G();return}U=Array.from(_==null?void 0:_.querySelectorAll(B)),F.open&&document.activeElement===s&&(le==="ArrowDown"||le==="Tab")&&B.length>0&&U.length>0&&(z.preventDefault(),U[0].focus())};switch(r.event){case"click":s.addEventListener("click",Q,!0),window.addEventListener("click",D,!0);break;case"hover":s.addEventListener("mouseover",P,!0),s.addEventListener("mouseleave",()=>G(),!0);break;case"focus-blur":s.addEventListener("focus",Q,!0),s.addEventListener("blur",()=>G(),!0);break;case"focus-click":s.addEventListener("focus",P,!0),window.addEventListener("click",D,!0);break;default:throw new Error(`Event value of '${r.event}' is not supported. ${h}`)}return window.addEventListener("keydown",H,!0),b(),{update(z){G(()=>{r=z,b(),v()})},destroy(){s.removeEventListener("click",Q,!0),s.removeEventListener("mouseover",P,!0),s.removeEventListener("mouseleave",()=>G(),!0),s.removeEventListener("focus",Q,!0),s.removeEventListener("focus",P,!0),s.removeEventListener("blur",()=>G(),!0),window.removeEventListener("click",D,!0),window.removeEventListener("keydown",H,!0)}}};const se="modalStore";Va=function(){const s=rf(se);if(!s)throw new Error("modalStore is not initialized. Please ensure that `initializeStores()` is invoked in the root layout file of this app!");return s},Ha=function(){const s=ae();return sf(se,s)};function ae(){const{subscribe:s,set:r,update:e}=Xe([]);return{subscribe:s,set:r,update:e,trigger:o=>e(l=>(l.push(o),l)),close:()=>e(o=>(o.length>0&&o.shift(),o)),clear:()=>r([])}}const fe={};function Ft(s){return s==="local"?localStorage:sessionStorage}function Vn(s,r,e){const o=(e==null?void 0:e.serializer)??JSON,l=(e==null?void 0:e.storage)??"local";function u(d,g){Ft(l).setItem(d,o.stringify(g))}if(!fe[s]){const d=Xe(r,q=>{const A=Ft(l).getItem(s);A&&q(o.parse(A));{const k=F=>{F.key===s&&q(F.newValue?o.parse(F.newValue):null)};return window.addEventListener("storage",k),()=>window.removeEventListener("storage",k)}}),{subscribe:g,set:x}=d;fe[s]={set(q){u(s,q),x(q)},update(q){const A=q(Ua(d));u(s,A),x(A)},subscribe:g}}return fe[s]}Vn("modeOsPrefers",!1),Vn("modeUserPrefers",void 0),Vn("modeCurrent",!1);const Br="(prefers-reduced-motion: reduce)";function ho(){return window.matchMedia(Br).matches}Xa=af(ho(),s=>{{const r=o=>{s(o.matches)},e=window.matchMedia(Br);return e.addEventListener("change",r),()=>{e.removeEventListener("change",r)}}});async function _o(s,r){const e=new TextEncoder().encode(r),o=await crypto.subtle.digest("SHA-256",e),l=crypto.getRandomValues(new Uint8Array(12)),u=zn.Buffer.from(l).toString("base64"),d={name:"AES-GCM",iv:l},g=await crypto.subtle.importKey("raw",o,d,!1,["encrypt"]),x=new TextEncoder().encode(s),q=await crypto.subtle.encrypt(d,g,x),A=zn.Buffer.from(q).toString("base64");return`${u}.${A}`}async function po(s,r){const e=new TextEncoder().encode(r),o=await crypto.subtle.digest("SHA-256",e);if(s.indexOf(".")===-1)throw new Error("Invalid ciphertext");const l=s.split("."),u=l[0],d={name:"AES-GCM",iv:zn.Buffer.from(u,"base64")},g=await crypto.subtle.importKey("raw",o,d,!1,["decrypt"]),x=l[1],q=zn.Buffer.from(x,"base64");try{const A=await crypto.subtle.decrypt(d,g,q);return new TextDecoder().decode(A)}catch{throw new Error("Decrypt failed")}}async function mo(){const s=await yl(),r=new Set(s.tags),e=Xe(s);return{subscribe:e.subscribe,set(o){kt(o).then(),e.set(o)},update(o){const l=o(s);kt(l).then(),e.set(l)},addTag:o=>{r.add(o),s.tags=Array.from(r),kt(s).then(),e.set(s)},removeTag:o=>{r.delete(o),s.tags=Array.from(r),kt(s).then(),e.set(s)},setSearchInput:o=>{s.searchInput=o,kt(s).then(),e.set(s)},setFolderId:o=>{s.folderId=o,kt(s).then(),e.set(s)}}}let O;Kn=await mo(),O=Symbol.for("drizzle:entityKind");function M(s,r){if(!s||typeof s!="object")return!1;if(s instanceof r)return!0;if(!Object.prototype.hasOwnProperty.call(r,O))throw new Error(`Class "${r.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let e=s.constructor;if(e)for(;e;){if(O in e&&e[O]===r[O])return!0;e=Object.getPrototypeOf(e)}return!1}class pe{constructor(r,e){w(this,"name");w(this,"primary");w(this,"notNull");w(this,"default");w(this,"defaultFn");w(this,"hasDefault");w(this,"isUnique");w(this,"uniqueName");w(this,"uniqueType");w(this,"dataType");w(this,"columnType");w(this,"enumValues");w(this,"config");this.table=r,this.config=e,this.name=e.name,this.notNull=e.notNull,this.default=e.default,this.defaultFn=e.defaultFn,this.hasDefault=e.hasDefault,this.primary=e.primaryKey,this.isUnique=e.isUnique,this.uniqueName=e.uniqueName,this.uniqueType=e.uniqueType,this.dataType=e.dataType,this.columnType=e.columnType}mapFromDriverValue(r){return r}mapToDriverValue(r){return r}}Xl=O,w(pe,Xl,"Column");const tn=Symbol.for("drizzle:Name"),Hn=Symbol.for("drizzle:Schema"),jr=Symbol.for("drizzle:Columns"),Wn=Symbol.for("drizzle:OriginalName"),Gn=Symbol.for("drizzle:BaseName"),zr=Symbol.for("drizzle:IsAlias"),Kr=Symbol.for("drizzle:ExtraConfigBuilder"),Vr=Symbol.for("drizzle:IsDrizzleTable");class j{constructor(r,e,o){w(this,ec);w(this,tc);w(this,nc);w(this,rc);w(this,ic);w(this,sc,!1);w(this,ac);w(this,oc,!0);this[tn]=this[Wn]=r,this[Hn]=e,this[Gn]=o}}Zl=O,ec=tn,tc=Wn,nc=Hn,rc=jr,ic=Gn,sc=zr,ac=Kr,oc=Vr,w(j,Zl,"Table"),w(j,"Symbol",{Name:tn,Schema:Hn,OriginalName:Wn,Columns:jr,BaseName:Gn,IsAlias:zr,ExtraConfigBuilder:Kr});function go(s){return typeof s=="object"&&s!==null&&Vr in s}function Nt(s){return s[tn]}const Hr=Symbol.for("drizzle:PgInlineForeignKeys");class Yn extends j{constructor(){super(...arguments);w(this,cc,[]);w(this,uc)}}lc=O,cc=Hr,uc=j.Symbol.ExtraConfigBuilder,w(Yn,lc,"PgTable"),w(Yn,"Symbol",Object.assign({},j.Symbol,{InlineForeignKeys:Hr}));let wo=(pr=class{constructor(s,r){w(this,"columns");w(this,"name");this.columns=s,this.name=r}build(s){return new yo(s,this.columns,this.name)}},fc=O,w(pr,fc,"PgPrimaryKeyBuilder"),pr),yo=(mr=class{constructor(s,r,e){w(this,"columns");w(this,"name");this.table=s,this.columns=r,this.name=e}getName(){return this.name??`${this.table[Yn.Symbol.Name]}_${this.columns.map(s=>s.name).join("_")}_pk`}},dc=O,w(mr,dc,"PgPrimaryKey"),mr);function ke(s,r){return Yo(r)&&!Yr(s)&&!M(s,Ze)&&!M(s,Pt)&&!M(s,pe)&&!M(s,j)&&!M(s,ut)?new Ze(s,r):s}const Wr=(s,r)=>y`${s} = ${ke(r,s)}`,bo=(s,r)=>y`${s} <> ${ke(r,s)}`;function Jn(...s){const r=s.filter(e=>e!==void 0);if(r.length!==0)return r.length===1?new V(r):new V([new me("("),y.join(r,new me(" and ")),new me(")")])}function qo(...s){const r=s.filter(e=>e!==void 0);if(r.length!==0)return r.length===1?new V(r):new V([new me("("),y.join(r,new me(" or ")),new me(")")])}function vo(s){return y`not ${s}`}const xo=(s,r)=>y`${s} > ${ke(r,s)}`,So=(s,r)=>y`${s} >= ${ke(r,s)}`,Eo=(s,r)=>y`${s} < ${ke(r,s)}`,Ao=(s,r)=>y`${s} <= ${ke(r,s)}`;function No(s,r){if(Array.isArray(r)){if(r.length===0)throw new Error("inArray requires at least one value");return y`${s} in ${r.map(e=>ke(e,s))}`}return y`${s} in ${ke(r,s)}`}function To(s,r){if(Array.isArray(r)){if(r.length===0)throw new Error("notInArray requires at least one value");return y`${s} not in ${r.map(e=>ke(e,s))}`}return y`${s} not in ${ke(r,s)}`}function $o(s){return y`${s} is null`}function ko(s){return y`${s} is not null`}function Lo(s){return y`exists (${s})`}function Co(s){return y`not exists (${s})`}function Do(s,r,e){return y`${s} between ${ke(r,s)} and ${ke(e,s)}`}function Io(s,r,e){return y`${s} not between ${ke(r,s)} and ${ke(e,s)}`}function Mo(s,r){return y`${s} like ${r}`}function Oo(s,r){return y`${s} not like ${r}`}function Ro(s,r){return y`${s} ilike ${r}`}function Qo(s,r){return y`${s} not ilike ${r}`}function Uo(s){return y`${s} asc`}function Fo(s){return y`${s} desc`}class nn{constructor(r,e,o){w(this,"referencedTableName");w(this,"fieldName");this.sourceTable=r,this.referencedTable=e,this.relationName=o,this.referencedTableName=e[j.Symbol.Name]}}hc=O,w(nn,hc,"Relation");class Gr{constructor(r,e){this.table=r,this.config=e}}_c=O,w(Gr,_c,"Relations");const gn=class gn extends nn{constructor(r,e,o,l){super(r,e,o==null?void 0:o.relationName),this.config=o,this.isNullable=l}withFieldName(r){const e=new gn(this.sourceTable,this.referencedTable,this.config,this.isNullable);return e.fieldName=r,e}};pc=O,w(gn,pc,"One");let ct=gn;const wn=class wn extends nn{constructor(r,e,o){super(r,e,o==null?void 0:o.relationName),this.config=o}withFieldName(r){const e=new wn(this.sourceTable,this.referencedTable,this.config);return e.fieldName=r,e}};mc=O,w(wn,mc,"Many");let rn=wn;function Po(){return{and:Jn,between:Do,eq:Wr,exists:Lo,gt:xo,gte:So,ilike:Ro,inArray:No,isNull:$o,isNotNull:ko,like:Mo,lt:Eo,lte:Ao,ne:bo,not:vo,notBetween:Io,notExists:Co,notLike:Oo,notIlike:Qo,notInArray:To,or:qo,sql:y}}function Bo(){return{sql:y,asc:Uo,desc:Fo}}function jo(s,r){var u;Object.keys(s).length===1&&"default"in s&&!M(s.default,j)&&(s=s.default);const e={},o={},l={};for(const[d,g]of Object.entries(s))if(go(g)){const x=g[j.Symbol.Name],q=o[x];e[x]=d,l[d]={tsName:d,dbName:g[j.Symbol.Name],schema:g[j.Symbol.Schema],columns:g[j.Symbol.Columns],relations:(q==null?void 0:q.relations)??{},primaryKey:(q==null?void 0:q.primaryKey)??[]};for(const k of Object.values(g[j.Symbol.Columns]))k.primary&&l[d].primaryKey.push(k);const A=(u=g[j.Symbol.ExtraConfigBuilder])==null?void 0:u.call(g,g);if(A)for(const k of Object.values(A))M(k,wo)&&l[d].primaryKey.push(...k.columns)}else if(M(g,Gr)){const x=g.table[j.Symbol.Name],q=e[x],A=g.config(r(g.table));let k;for(const[F,B]of Object.entries(A))if(q){const U=l[q];U.relations[F]=B}else x in o||(o[x]={relations:{},primaryKey:k}),o[x].relations[F]=B}return{tables:l,tableNamesMap:e}}function zo(s){return function(r,e){return new ct(s,r,e,(e==null?void 0:e.fields.reduce((o,l)=>o&&l.notNull,!0))??!1)}}function Ko(s){return function(r,e){return new rn(s,r,e)}}function Vo(s,r,e){if(M(e,ct)&&e.config)return{fields:e.config.fields,references:e.config.references};const o=r[e.referencedTable[j.Symbol.Name]];if(!o)throw new Error(`Table "${e.referencedTable[j.Symbol.Name]}" not found in schema`);const l=s[o];if(!l)throw new Error(`Table "${o}" not found in schema`);const u=e.sourceTable,d=r[u[j.Symbol.Name]];if(!d)throw new Error(`Table "${u[j.Symbol.Name]}" not found in schema`);const g=[];for(const x of Object.values(l.relations))(e.relationName&&e!==x&&x.relationName===e.relationName||!e.relationName&&x.referencedTable===e.sourceTable)&&g.push(x);if(g.length>1)throw e.relationName?new Error(`There are multiple relations with name "${e.relationName}" in table "${o}"`):new Error(`There are multiple relations between "${o}" and "${e.sourceTable[j.Symbol.Name]}". Please specify relation name`);if(g[0]&&M(g[0],ct)&&g[0].config)return{fields:g[0].config.references,references:g[0].config.fields};throw new Error(`There is not enough information to infer relation "${d}.${e.fieldName}"`)}function Ho(s){return{one:zo(s),many:Ko(s)}}function Xn(s,r,e,o,l=u=>u){const u={};for(const[d,g]of o.entries())if(g.isJson){const x=r.relations[g.tsKey],q=e[d],A=typeof q=="string"?JSON.parse(q):q;u[g.tsKey]=M(x,ct)?A&&Xn(s,s[g.relationTableTsKey],A,g.selection,l):A.map(k=>Xn(s,s[g.relationTableTsKey],k,g.selection,l))}else{const x=l(e[d]),q=g.field;let A;M(q,pe)?A=q:M(q,V)?A=q.decoder:A=q.sql.decoder,u[g.tsKey]=x===null?null:A.mapFromDriverValue(x)}return u}const Ee=Symbol.for("drizzle:SubqueryConfig");class Ue{constructor(r,e,o,l=!1){w(this,wc);this[Ee]={sql:r,selection:e,alias:o,isWith:l}}}gc=O,wc=Ee,w(Ue,gc,"Subquery");class Zn extends Ue{}yc=O,w(Zn,yc,"WithSubquery");const Wo={startActiveSpan(s,r){return r()}},Le=Symbol.for("drizzle:ViewBaseConfig");function Yr(s){return typeof s=="object"&&s!==null&&"getSQL"in s&&typeof s.getSQL=="function"}function Go(s){var e;const r={sql:"",params:[]};for(const o of s)r.sql+=o.sql,r.params.push(...o.params),(e=o.typings)!=null&&e.length&&(r.typings||(r.typings=[]),r.typings.push(...o.typings));return r}class me{constructor(r){w(this,"value");this.value=Array.isArray(r)?r:[r]}getSQL(){return new V([this])}}bc=O,w(me,bc,"StringChunk");const _t=class _t{constructor(r){w(this,"decoder",Jr);w(this,"shouldInlineParams",!1);this.queryChunks=r}append(r){return this.queryChunks.push(...r.queryChunks),this}toQuery(r){return Wo.startActiveSpan("drizzle.buildSQL",e=>{const o=this.buildQueryFromSourceParams(this.queryChunks,r);return e==null||e.setAttributes({"drizzle.query.text":o.sql,"drizzle.query.params":JSON.stringify(o.params)}),o})}buildQueryFromSourceParams(r,e){const o=Object.assign({},e,{inlineParams:e.inlineParams||this.shouldInlineParams,paramStartIndex:e.paramStartIndex||{value:0}}),{escapeName:l,escapeParam:u,prepareTyping:d,inlineParams:g,paramStartIndex:x}=o;return Go(r.map(q=>{if(M(q,me))return{sql:q.value.join(""),params:[]};if(M(q,sn))return{sql:l(q.value),params:[]};if(q===void 0)return{sql:"",params:[]};if(Array.isArray(q)){const A=[new me("(")];for(const[k,F]of q.entries())A.push(F),k<q.length-1&&A.push(new me(", "));return A.push(new me(")")),this.buildQueryFromSourceParams(A,o)}if(M(q,_t))return this.buildQueryFromSourceParams(q.queryChunks,{...o,inlineParams:g||q.shouldInlineParams});if(M(q,j)){const A=q[j.Symbol.Schema],k=q[j.Symbol.Name];return{sql:A===void 0?l(k):l(A)+"."+l(k),params:[]}}if(M(q,pe))return{sql:l(q.table[j.Symbol.Name])+"."+l(q.name),params:[]};if(M(q,ut)){const A=q[Le].schema,k=q[Le].name;return{sql:A===void 0?l(k):l(A)+"."+l(k),params:[]}}if(M(q,Ze)){const A=q.value===null?null:q.encoder.mapToDriverValue(q.value);if(M(A,_t))return this.buildQueryFromSourceParams([A],o);if(g)return{sql:this.mapInlineParam(A,o),params:[]};let k;return d!==void 0&&(k=[d(q.encoder)]),{sql:u(x.value++,A),params:[A],typings:k}}return M(q,Pt)?{sql:u(x.value++,q),params:[q]}:M(q,_t.Aliased)&&q.fieldAlias!==void 0?{sql:l(q.fieldAlias),params:[]}:M(q,Ue)?q[Ee].isWith?{sql:l(q[Ee].alias),params:[]}:this.buildQueryFromSourceParams([new me("("),q[Ee].sql,new me(") "),new sn(q[Ee].alias)],o):Yr(q)?this.buildQueryFromSourceParams([new me("("),q.getSQL(),new me(")")],o):M(q,nn)?this.buildQueryFromSourceParams([q.sourceTable,new me("."),y.identifier(q.fieldName)],o):g?{sql:this.mapInlineParam(q,o),params:[]}:{sql:u(x.value++,q),params:[q]}}))}mapInlineParam(r,{escapeString:e}){if(r===null)return"null";if(typeof r=="number"||typeof r=="boolean")return r.toString();if(typeof r=="string")return e(r);if(typeof r=="object"){const o=r.toString();return e(o==="[object Object]"?JSON.stringify(r):o)}throw new Error("Unexpected param value: "+r)}getSQL(){return this}as(r){return r===void 0?this:new _t.Aliased(this,r)}mapWith(r){return this.decoder=typeof r=="function"?{mapFromDriverValue:r}:r,this}inlineParams(){return this.shouldInlineParams=!0,this}};qc=O,w(_t,qc,"SQL");let V=_t;class sn{constructor(r){w(this,"brand");this.value=r}getSQL(){return new V([this])}}vc=O,w(sn,vc,"Name");function Yo(s){return typeof s=="object"&&s!==null&&"mapToDriverValue"in s&&typeof s.mapToDriverValue=="function"}const Jr={mapFromDriverValue:s=>s},Xr={mapToDriverValue:s=>s};({...Jr,...Xr});class Ze{constructor(r,e=Xr){w(this,"brand");this.value=r,this.encoder=e}getSQL(){return new V([this])}}xc=O,w(Ze,xc,"Param");function y(s,...r){const e=[];(r.length>0||s.length>0&&s[0]!=="")&&e.push(new me(s[0]));for(const[o,l]of r.entries())e.push(l,new me(s[o+1]));return new V(e)}(s=>{function r(){return new V([])}s.empty=r;function e(x){return new V(x)}s.fromList=e;function o(x){return new V([new me(x)])}s.raw=o;function l(x,q){const A=[];for(const[k,F]of x.entries())k>0&&q!==void 0&&A.push(q),A.push(F);return new V(A)}s.join=l;function u(x){return new sn(x)}s.identifier=u;function d(x){return new Pt(x)}s.placeholder=d;function g(x,q){return new Ze(x,q)}s.param=g})(y||(y={})),(s=>{var e;const o=class o{constructor(u,d){w(this,"isSelectionField",!1);this.sql=u,this.fieldAlias=d}getSQL(){return this.sql}clone(){return new o(this.sql,this.fieldAlias)}};e=O,w(o,e,"SQL.Aliased");let r=o;s.Aliased=r})(V||(V={}));class Pt{constructor(r){this.name=r}getSQL(){return new V([this])}}Sc=O,w(Pt,Sc,"Placeholder");function an(s,r){return s.map(e=>{if(M(e,Pt)){if(!(e.name in r))throw new Error(`No value for placeholder "${e.name}" was provided`);return r[e.name]}return e})}class ut{constructor({name:r,schema:e,selectedFields:o,query:l}){w(this,Ac);this[Le]={name:r,originalName:r,schema:e,selectedFields:o,query:l,isExisting:!l,isAlias:!1}}getSQL(){return new V([this])}}Ec=O,Ac=Le,w(ut,Ec,"View"),pe.prototype.getSQL=function(){return new V([this])},j.prototype.getSQL=function(){return new V([this])},Ue.prototype.getSQL=function(){return new V([this])};class Bt{constructor(r){this.table=r}get(r,e){return e==="table"?this.table:r[e]}}Nc=O,w(Bt,Nc,"ColumnAliasProxyHandler");class on{constructor(r,e){this.alias=r,this.replaceOriginalName=e}get(r,e){if(e===j.Symbol.IsAlias)return!0;if(e===j.Symbol.Name)return this.alias;if(this.replaceOriginalName&&e===j.Symbol.OriginalName)return this.alias;if(e===Le)return{...r[Le],name:this.alias,isAlias:!0};if(e===j.Symbol.Columns){const l=r[j.Symbol.Columns];if(!l)return l;const u={};return Object.keys(l).map(d=>{u[d]=new Proxy(l[d],new Bt(new Proxy(r,this)))}),u}const o=r[e];return M(o,pe)?new Proxy(o,new Bt(new Proxy(r,this))):o}}Tc=O,w(on,Tc,"TableAliasProxyHandler");function er(s,r){return new Proxy(s,new on(r,!1))}function He(s,r){return new Proxy(s,new Bt(new Proxy(s.table,new on(r,!1))))}function Zr(s,r){return new V.Aliased(ln(s.sql,r),s.fieldAlias)}function ln(s,r){return y.join(s.queryChunks.map(e=>M(e,pe)?He(e,r):M(e,V)?ln(e,r):M(e,V.Aliased)?Zr(e,r):e))}class ei{constructor(r,e,o){w(this,"config");w(this,"$default",this.$defaultFn);this.config={name:r,notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:e,columnType:o}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(r){return this.config.default=r,this.config.hasDefault=!0,this}$defaultFn(r){return this.config.defaultFn=r,this.config.hasDefault=!0,this}primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}}$c=O,w(ei,$c,"ColumnBuilder");const tr=Symbol.for("drizzle:SQLiteInlineForeignKeys");class Ae extends j{constructor(){super(...arguments);w(this,Lc);w(this,Cc,[]);w(this,Dc)}}kc=O,Lc=j.Symbol.Columns,Cc=tr,Dc=j.Symbol.ExtraConfigBuilder,w(Ae,kc,"SQLiteTable"),w(Ae,"Symbol",Object.assign({},j.Symbol,{InlineForeignKeys:tr}));function Jo(s,r,e,o,l=s){const u=new Ae(s,o,l),d=Object.fromEntries(Object.entries(r).map(([x,q])=>{const A=q,k=A.build(u);return u[tr].push(...A.buildForeignKeys(k,u)),[x,k]})),g=Object.assign(u,d);return g[j.Symbol.Columns]=d,e&&(g[Ae.Symbol.ExtraConfigBuilder]=e),g}const nr=(s,r,e)=>Jo(s,r,e);class ti{constructor(r,e){w(this,"reference");w(this,"_onUpdate");w(this,"_onDelete");this.reference=()=>{const{name:o,columns:l,foreignColumns:u}=r();return{name:o,columns:l,foreignTable:u[0].table,foreignColumns:u}},e&&(this._onUpdate=e.onUpdate,this._onDelete=e.onDelete)}onUpdate(r){return this._onUpdate=r,this}onDelete(r){return this._onDelete=r,this}build(r){return new ni(r,this)}}Ic=O,w(ti,Ic,"SQLiteForeignKeyBuilder");class ni{constructor(r,e){w(this,"reference");w(this,"onUpdate");w(this,"onDelete");this.table=r,this.reference=e.reference,this.onUpdate=e._onUpdate,this.onDelete=e._onDelete}getName(){const{name:r,columns:e,foreignColumns:o}=this.reference(),l=e.map(g=>g.name),u=o.map(g=>g.name),d=[this.table[Ae.Symbol.Name],...l,o[0].table[Ae.Symbol.Name],...u];return r??`${d.join("_")}_fk`}}Mc=O,w(ni,Mc,"SQLiteForeignKey");function Xo(s,r){return`${s[Ae.Symbol.Name]}_${r.join("_")}_unique`}class jt extends ei{constructor(){super(...arguments);w(this,"foreignKeyConfigs",[])}references(e,o={}){return this.foreignKeyConfigs.push({ref:e,actions:o}),this}unique(e){return this.config.isUnique=!0,this.config.uniqueName=e,this}buildForeignKeys(e,o){return this.foreignKeyConfigs.map(({ref:l,actions:u})=>((d,g)=>{const x=new ti(()=>{const q=d();return{columns:[e],foreignColumns:[q]}});return g.onUpdate&&x.onUpdate(g.onUpdate),g.onDelete&&x.onDelete(g.onDelete),x.build(o)})(l,u))}}Oc=O,w(jt,Oc,"SQLiteColumnBuilder");class et extends pe{constructor(r,e){e.uniqueName||(e.uniqueName=Xo(r,[e.name])),super(r,e),this.table=r}}Rc=O,w(et,Rc,"SQLiteColumn");class cn extends jt{constructor(r,e,o){super(r,e,o),this.config.autoIncrement=!1}primaryKey(r){return r!=null&&r.autoIncrement&&(this.config.autoIncrement=!0),this.config.hasDefault=!0,super.primaryKey()}}Qc=O,w(cn,Qc,"SQLiteBaseIntegerBuilder");class un extends et{constructor(){super(...arguments);w(this,"autoIncrement",this.config.autoIncrement)}getSQLType(){return"integer"}}Uc=O,w(un,Uc,"SQLiteBaseInteger");class ri extends cn{constructor(r){super(r,"number","SQLiteInteger")}build(r){return new ii(r,this.config)}}Fc=O,w(ri,Fc,"SQLiteIntegerBuilder");class ii extends un{}Pc=O,w(ii,Pc,"SQLiteInteger");class si extends cn{constructor(r,e){super(r,"date","SQLiteTimestamp"),this.config.mode=e}defaultNow(){return this.default(y`(cast((julianday('now') - 2440587.5)*86400000 as integer))`)}build(r){return new ai(r,this.config)}}Bc=O,w(si,Bc,"SQLiteTimestampBuilder");class ai extends un{constructor(){super(...arguments);w(this,"mode",this.config.mode)}mapFromDriverValue(e){return this.config.mode==="timestamp"?new Date(e*1e3):new Date(e)}mapToDriverValue(e){const o=e.getTime();return this.config.mode==="timestamp"?Math.floor(o/1e3):o}}jc=O,w(ai,jc,"SQLiteTimestamp");class oi extends cn{constructor(r,e){super(r,"boolean","SQLiteBoolean"),this.config.mode=e}build(r){return new li(r,this.config)}}zc=O,w(oi,zc,"SQLiteBooleanBuilder");class li extends un{constructor(){super(...arguments);w(this,"mode",this.config.mode)}mapFromDriverValue(e){return Number(e)===1}mapToDriverValue(e){return e?1:0}}Kc=O,w(li,Kc,"SQLiteBoolean");function Zo(s,r){return(r==null?void 0:r.mode)==="timestamp"||(r==null?void 0:r.mode)==="timestamp_ms"?new si(s,r.mode):(r==null?void 0:r.mode)==="boolean"?new oi(s,r.mode):new ri(s)}class ci extends jt{constructor(r){super(r,"number","SQLiteReal")}build(r){return new ui(r,this.config)}}Vc=O,w(ci,Vc,"SQLiteRealBuilder");class ui extends et{getSQLType(){return"real"}}Hc=O,w(ui,Hc,"SQLiteReal");function fi(s){return new ci(s)}class di extends jt{constructor(r,e){super(r,"string","SQLiteText"),this.config.enumValues=e.enum,this.config.length=e.length}build(r){return new hi(r,this.config)}}Wc=O,w(di,Wc,"SQLiteTextBuilder");class hi extends et{constructor(e,o){super(e,o);w(this,"enumValues",this.config.enumValues);w(this,"length",this.config.length)}getSQLType(){return`text${this.config.length?`(${this.config.length})`:""}`}}Gc=O,w(hi,Gc,"SQLiteText");class _i extends jt{constructor(r){super(r,"json","SQLiteTextJson")}build(r){return new pi(r,this.config)}}Yc=O,w(_i,Yc,"SQLiteTextJsonBuilder");class pi extends et{getSQLType(){return"text"}mapFromDriverValue(r){return JSON.parse(r)}mapToDriverValue(r){return JSON.stringify(r)}}Jc=O,w(pi,Jc,"SQLiteTextJson");function Te(s,r={}){return r.mode==="json"?new _i(s):new di(s,r)}const yn=class yn{constructor(r){w(this,"config");this.config={...r}}get(r,e){if(e===Ee)return{...r[Ee],selection:new Proxy(r[Ee].selection,this)};if(e===Le)return{...r[Le],selectedFields:new Proxy(r[Le].selectedFields,this)};if(typeof e=="symbol")return r[e];const o=(M(r,Ue)?r[Ee].selection:M(r,ut)?r[Le].selectedFields:r)[e];if(M(o,V.Aliased)){if(this.config.sqlAliasedBehavior==="sql"&&!o.isSelectionField)return o.sql;const l=o.clone();return l.isSelectionField=!0,l}if(M(o,V)){if(this.config.sqlBehavior==="sql")return o;throw new Error(`You tried to reference "${e}" field from a subquery, which is a raw SQL field, but it doesn't have an alias declared. Please add an alias to the field using ".as('alias')" method.`)}return M(o,pe)?this.config.alias?new Proxy(o,new Bt(new Proxy(o.table,new on(this.config.alias,this.config.replaceOriginalName??!1)))):o:typeof o!="object"||o===null?o:new Proxy(o,new yn(this.config))}};Xc=O,w(yn,Xc,"SelectionProxyHandler");let Fe=yn;class tt{constructor(){w(this,eu,"QueryPromise")}catch(r){return this.then(void 0,r)}finally(r){return this.then(e=>(r==null||r(),e),e=>{throw r==null||r(),e})}then(r,e){return this.execute().then(r,e)}}Zc=O,eu=Symbol.toStringTag,w(tt,Zc,"QueryPromise");function mi(s,r,e){const o={},l=s.reduce((u,{path:d,field:g},x)=>{let q;M(g,pe)?q=g:M(g,V)?q=g.decoder:q=g.sql.decoder;let A=u;for(const[k,F]of d.entries())if(k<d.length-1)F in A||(A[F]={}),A=A[F];else{const B=r[x],U=A[F]=B===null?null:q.mapFromDriverValue(B);if(e&&M(g,pe)&&d.length===2){const h=d[0];h in o?typeof o[h]=="string"&&o[h]!==Nt(g.table)&&(o[h]=!1):o[h]=U===null?Nt(g.table):!1}}return u},{});if(e&&Object.keys(o).length>0)for(const[u,d]of Object.entries(o))typeof d=="string"&&!e[d]&&(l[u]=null);return l}function ft(s,r){return Object.entries(s).reduce((e,[o,l])=>{if(typeof o!="string")return e;const u=r?[...r,o]:[o];return M(l,pe)||M(l,V)||M(l,V.Aliased)?e.push({path:u,field:l}):M(l,j)?e.push(...ft(l[j.Symbol.Columns],u)):e.push(...ft(l,u)),e},[])}function gi(s,r){const e=Object.keys(s),o=Object.keys(r);if(e.length!==o.length)return!1;for(const[l,u]of e.entries())if(u!==o[l])return!1;return!0}function wi(s,r){const e=Object.entries(r).filter(([,o])=>o!==void 0).map(([o,l])=>M(l,V)?[o,l]:[o,new Ze(l,s[j.Symbol.Columns][o])]);if(e.length===0)throw new Error("No values to set");return Object.fromEntries(e)}function el(s,r){for(const e of r)for(const o of Object.getOwnPropertyNames(e.prototype))Object.defineProperty(s.prototype,o,Object.getOwnPropertyDescriptor(e.prototype,o)||Object.create(null))}function tl(s){return s[j.Symbol.Columns]}function yi(s){return M(s,Ue)?s[Ee].alias:M(s,ut)?s[Le].name:M(s,V)?void 0:s[j.Symbol.IsAlias]?s[j.Symbol.Name]:s[j.Symbol.BaseName]}class bi extends tt{constructor(e,o,l){super();w(this,"config");w(this,"run",e=>this.prepare(!0).run(e));w(this,"all",e=>this.prepare(!0).all(e));w(this,"get",e=>this.prepare(!0).get(e));w(this,"values",e=>this.prepare(!0).values(e));this.table=e,this.session=o,this.dialect=l,this.config={table:e}}where(e){return this.config.where=e,this}returning(e=this.table[Ae.Symbol.Columns]){return this.config.returning=ft(e),this}getSQL(){return this.dialect.buildDeleteQuery(this.config)}toSQL(){const{typings:e,...o}=this.dialect.sqlToQuery(this.getSQL());return o}prepare(e){return this.session[e?"prepareOneTimeQuery":"prepareQuery"](this.dialect.sqlToQuery(this.getSQL()),this.config.returning,this.config.returning?"all":"run")}async execute(e){return this.prepare(!0).execute(e)}$dynamic(){return this}}tu=O,w(bi,tu,"SQLiteDelete");class qi{constructor(r,e,o){this.table=r,this.session=e,this.dialect=o}values(r){if(r=Array.isArray(r)?r:[r],r.length===0)throw new Error("values() must be called with at least one value");const e=r.map(o=>{const l={},u=this.table[j.Symbol.Columns];for(const d of Object.keys(o)){const g=o[d];l[d]=M(g,V)?g:new Ze(g,u[d])}return l});return new vi(this.table,e,this.session,this.dialect)}}nu=O,w(qi,nu,"SQLiteInsertBuilder");class vi extends tt{constructor(e,o,l,u){super();w(this,"config");w(this,"run",e=>this.prepare(!0).run(e));w(this,"all",e=>this.prepare(!0).all(e));w(this,"get",e=>this.prepare(!0).get(e));w(this,"values",e=>this.prepare(!0).values(e));this.session=l,this.dialect=u,this.config={table:e,values:o}}returning(e=this.config.table[Ae.Symbol.Columns]){return this.config.returning=ft(e),this}onConflictDoNothing(e={}){if(e.target===void 0)this.config.onConflict=y`do nothing`;else{const o=Array.isArray(e.target)?y`${e.target}`:y`${[e.target]}`,l=e.where?y` where ${e.where}`:y``;this.config.onConflict=y`${o} do nothing${l}`}return this}onConflictDoUpdate(e){const o=Array.isArray(e.target)?y`${e.target}`:y`${[e.target]}`,l=e.where?y` where ${e.where}`:y``,u=this.dialect.buildUpdateSet(this.config.table,wi(this.config.table,e.set));return this.config.onConflict=y`${o} do update set ${u}${l}`,this}getSQL(){return this.dialect.buildInsertQuery(this.config)}toSQL(){const{typings:e,...o}=this.dialect.sqlToQuery(this.getSQL());return o}prepare(e){return this.session[e?"prepareOneTimeQuery":"prepareQuery"](this.dialect.sqlToQuery(this.getSQL()),this.config.returning,this.config.returning?"all":"run")}async execute(){return this.config.returning?this.all():this.run()}$dynamic(){return this}}ru=O,w(vi,ru,"SQLiteInsert");class fn extends Error{constructor({message:r,cause:e}){super(r),this.name="DrizzleError",this.cause=e}}iu=O,w(fn,iu,"DrizzleError");class xi extends fn{constructor(){super({message:"Rollback"})}}su=O,w(xi,su,"TransactionRollbackError");class rr extends ut{}au=O,w(rr,au,"SQLiteViewBase");class ir{escapeName(r){return`"${r}"`}escapeParam(r){return"?"}escapeString(r){return`'${r.replace(/'/g,"''")}'`}buildDeleteQuery({table:r,where:e,returning:o}){const l=o?y` returning ${this.buildSelection(o,{isSingleTable:!0})}`:void 0,u=e?y` where ${e}`:void 0;return y`delete from ${r}${u}${l}`}buildUpdateSet(r,e){const o=Object.entries(e),l=o.length;return y.join(o.flatMap(([u,d],g)=>{const x=r[j.Symbol.Columns][u],q=y`${y.identifier(x.name)} = ${d}`;return g<l-1?[q,y.raw(", ")]:[q]}))}buildUpdateQuery({table:r,set:e,where:o,returning:l}){const u=this.buildUpdateSet(r,e),d=l?y` returning ${this.buildSelection(l,{isSingleTable:!0})}`:void 0,g=o?y` where ${o}`:void 0;return y`update ${r} set ${u}${g}${d}`}buildSelection(r,{isSingleTable:e=!1}={}){const o=r.length,l=r.flatMap(({field:u},d)=>{const g=[];if(M(u,V.Aliased)&&u.isSelectionField)g.push(y.identifier(u.fieldAlias));else if(M(u,V.Aliased)||M(u,V)){const x=M(u,V.Aliased)?u.sql:u;e?g.push(new V(x.queryChunks.map(q=>M(q,pe)?y.identifier(q.name):q))):g.push(x),M(u,V.Aliased)&&g.push(y` as ${y.identifier(u.fieldAlias)}`)}else if(M(u,pe)){const x=u.table[j.Symbol.Name],q=u.name;e?g.push(y.identifier(q)):g.push(y`${y.identifier(x)}.${y.identifier(q)}`)}return d<o-1&&g.push(y`, `),g});return y.join(l)}buildSelectQuery({withList:r,fields:e,fieldsFlat:o,where:l,having:u,table:d,joins:g,orderBy:x,groupBy:q,limit:A,offset:k,distinct:F,setOperators:B}){const U=o??ft(e);for(const ne of U)if(M(ne.field,pe)&&Nt(ne.field.table)!==(M(d,Ue)?d[Ee].alias:M(d,rr)?d[Le].name:M(d,V)?void 0:Nt(d))&&!(X=>g==null?void 0:g.some(({alias:he})=>he===(X[j.Symbol.IsAlias]?Nt(X):X[j.Symbol.BaseName])))(ne.field.table)){const X=Nt(ne.field.table);throw new Error(`Your "${ne.path.join("->")}" field references a column "${X}"."${ne.field.name}", but the table "${X}" is not part of the query! Did you forget to join it?`)}const h=!g||g.length===0;let _;if(r!=null&&r.length){const ne=[y`with `];for(const[X,he]of r.entries())ne.push(y`${y.identifier(he[Ee].alias)} as (${he[Ee].sql})`),X<r.length-1&&ne.push(y`, `);ne.push(y` `),_=y.join(ne)}const p=F?y` distinct`:void 0,v=this.buildSelection(U,{isSingleTable:h}),b=(()=>M(d,j)&&d[j.Symbol.OriginalName]!==d[j.Symbol.Name]?y`${y.identifier(d[j.Symbol.OriginalName])} ${y.identifier(d[j.Symbol.Name])}`:d)(),P=[];if(g)for(const[ne,X]of g.entries()){ne===0&&P.push(y` `);const he=X.table;if(M(he,Ae)){const ye=he[Ae.Symbol.Name],bt=he[Ae.Symbol.Schema],Re=he[Ae.Symbol.OriginalName],qt=ye===Re?void 0:X.alias;P.push(y`${y.raw(X.joinType)} join ${bt?y`${y.identifier(bt)}.`:void 0}${y.identifier(Re)}${qt&&y` ${y.identifier(qt)}`} on ${X.on}`)}else P.push(y`${y.raw(X.joinType)} join ${he} on ${X.on}`);ne<g.length-1&&P.push(y` `)}const G=y.join(P),Q=l?y` where ${l}`:void 0,D=u?y` having ${u}`:void 0,H=[];if(x)for(const[ne,X]of x.entries())H.push(X),ne<x.length-1&&H.push(y`, `);const z=[];if(q)for(const[ne,X]of q.entries())z.push(X),ne<q.length-1&&z.push(y`, `);const le=z.length>0?y` group by ${y.join(z)}`:void 0,Oe=H.length>0?y` order by ${y.join(H)}`:void 0,Me=A?y` limit ${A}`:void 0,Je=k?y` offset ${k}`:void 0,Be=y`${_}select${p} ${v} from ${b}${G}${Q}${le}${D}${Oe}${Me}${Je}`;return B.length>0?this.buildSetOperations(Be,B):Be}buildSetOperations(r,e){const[o,...l]=e;if(!o)throw new Error("Cannot pass undefined values to any set operator");return l.length===0?this.buildSetOperationQuery({leftSelect:r,setOperator:o}):this.buildSetOperations(this.buildSetOperationQuery({leftSelect:r,setOperator:o}),l)}buildSetOperationQuery({leftSelect:r,setOperator:{type:e,isAll:o,rightSelect:l,limit:u,orderBy:d,offset:g}}){const x=y`${r.getSQL()} `,q=y`${l.getSQL()}`;let A;if(d&&d.length>0){const U=[];for(const h of d)if(M(h,et))U.push(y.identifier(h.name));else if(M(h,V)){for(let _=0;_<h.queryChunks.length;_++){const p=h.queryChunks[_];M(p,et)&&(h.queryChunks[_]=y.identifier(p.name))}U.push(y`${h}`)}else U.push(y`${h}`);A=y` order by ${y.join(U,y`, `)}`}const k=u?y` limit ${u}`:void 0,F=y.raw(`${e} ${o?"all ":""}`),B=g?y` offset ${g}`:void 0;return y`${x}${F}${q}${A}${k}${B}`}buildInsertQuery({table:r,values:e,onConflict:o,returning:l}){const u=[],d=r[j.Symbol.Columns],g=Object.entries(d),x=g.map(([,F])=>y.identifier(F.name));for(const[F,B]of e.entries()){const U=[];for(const[h,_]of g){const p=B[h];if(p===void 0||M(p,Ze)&&p.value===void 0){let v;if(_.default!==null&&_.default!==void 0)v=M(_.default,V)?_.default:y.param(_.default,_);else if(_.defaultFn!==void 0){const b=_.defaultFn();v=M(b,V)?b:y.param(b,_)}else v=y`null`;U.push(v)}else U.push(p)}u.push(U),F<e.length-1&&u.push(y`, `)}const q=y.join(u),A=l?y` returning ${this.buildSelection(l,{isSingleTable:!0})}`:void 0,k=o?y` on conflict ${o}`:void 0;return y`insert into ${r} ${x} values ${q}${k}${A}`}sqlToQuery(r){return r.toQuery({escapeName:this.escapeName,escapeParam:this.escapeParam,escapeString:this.escapeString})}buildRelationalQuery({fullSchema:r,schema:e,tableNamesMap:o,table:l,tableConfig:u,queryConfig:d,tableAlias:g,nestedQueryRelation:x,joinOn:q}){let A=[],k,F,B=[],U;const h=[];if(d===!0)A=Object.entries(u.columns).map(([p,v])=>({dbKey:v.name,tsKey:p,field:He(v,g),relationTableTsKey:void 0,isJson:!1,selection:[]}));else{const p=Object.fromEntries(Object.entries(u.columns).map(([D,H])=>[D,He(H,g)]));if(d.where){const D=typeof d.where=="function"?d.where(p,Po()):d.where;U=D&&ln(D,g)}const v=[];let b=[];if(d.columns){let D=!1;for(const[H,z]of Object.entries(d.columns))z!==void 0&&H in u.columns&&(!D&&z===!0&&(D=!0),b.push(H));b.length>0&&(b=D?b.filter(H=>{var z;return((z=d.columns)==null?void 0:z[H])===!0}):Object.keys(u.columns).filter(H=>!b.includes(H)))}else b=Object.keys(u.columns);for(const D of b){const H=u.columns[D];v.push({tsKey:D,value:H})}let P=[];d.with&&(P=Object.entries(d.with).filter(D=>!!D[1]).map(([D,H])=>({tsKey:D,queryConfig:H,relation:u.relations[D]})));let G;if(d.extras){G=typeof d.extras=="function"?d.extras(p,{sql:y}):d.extras;for(const[D,H]of Object.entries(G))v.push({tsKey:D,value:Zr(H,g)})}for(const{tsKey:D,value:H}of v)A.push({dbKey:M(H,V.Aliased)?H.fieldAlias:u.columns[D].name,tsKey:D,field:M(H,pe)?He(H,g):H,relationTableTsKey:void 0,isJson:!1,selection:[]});let Q=typeof d.orderBy=="function"?d.orderBy(p,Bo()):d.orderBy??[];Array.isArray(Q)||(Q=[Q]),B=Q.map(D=>M(D,pe)?He(D,g):ln(D,g)),k=d.limit,F=d.offset;for(const{tsKey:D,queryConfig:H,relation:z}of P){const le=Vo(e,o,z),Oe=z.referencedTable[j.Symbol.Name],Me=o[Oe],Je=`${g}_${D}`,Be=Jn(...le.fields.map((he,ye)=>Wr(He(le.references[ye],Je),He(he,g)))),ne=this.buildRelationalQuery({fullSchema:r,schema:e,tableNamesMap:o,table:r[Me],tableConfig:e[Me],queryConfig:M(z,ct)?H===!0?{limit:1}:{...H,limit:1}:H,tableAlias:Je,joinOn:Be,nestedQueryRelation:z}),X=y`(${ne.sql})`.as(D);A.push({dbKey:D,tsKey:D,field:X,relationTableTsKey:Me,isJson:!0,selection:ne.selection})}}if(A.length===0)throw new fn({message:`No fields selected for table "${u.tsName}" ("${g}"). You need to have at least one item in "columns", "with" or "extras". If you need to select all columns, omit the "columns" key or set it to undefined.`});let _;if(U=Jn(q,U),x){let p=y`json_array(${y.join(A.map(({field:b})=>M(b,et)?y.identifier(b.name):M(b,V.Aliased)?b.sql:b),y`, `)})`;M(x,rn)&&(p=y`coalesce(json_group_array(${p}), json_array())`);const v=[{dbKey:"data",tsKey:"data",field:p.as("data"),isJson:!0,relationTableTsKey:u.tsName,selection:A}];k!==void 0||F!==void 0||B.length>0?(_=this.buildSelectQuery({table:er(l,g),fields:{},fieldsFlat:[{path:[],field:y.raw("*")}],where:U,limit:k,offset:F,orderBy:B,setOperators:[]}),U=void 0,k=void 0,F=void 0,B=void 0):_=er(l,g),_=this.buildSelectQuery({table:M(_,Ae)?_:new Ue(_,{},g),fields:{},fieldsFlat:v.map(({field:b})=>({path:[],field:M(b,pe)?He(b,g):b})),joins:h,where:U,limit:k,offset:F,orderBy:B,setOperators:[]})}else _=this.buildSelectQuery({table:er(l,g),fields:{},fieldsFlat:A.map(({field:p})=>({path:[],field:M(p,pe)?He(p,g):p})),joins:h,where:U,limit:k,offset:F,orderBy:B,setOperators:[]});return{tableTsKey:u.tsName,sql:_,selection:A}}}ou=O,w(ir,ou,"SQLiteDialect");class Si extends ir{migrate(r,e){const o=y`
			CREATE TABLE IF NOT EXISTS "__drizzle_migrations" (
				id SERIAL PRIMARY KEY,
				hash text NOT NULL,
				created_at numeric
			)
		`;e.run(o);const l=e.values(y`SELECT id, hash, created_at FROM "__drizzle_migrations" ORDER BY created_at DESC LIMIT 1`)[0]??void 0;e.run(y`BEGIN`);try{for(const u of r)if(!l||Number(l[2])<u.folderMillis){for(const d of u.sql)e.run(y.raw(d));e.run(y`INSERT INTO "__drizzle_migrations" ("hash", "created_at") VALUES(${u.hash}, ${u.folderMillis})`)}e.run(y`COMMIT`)}catch(u){throw e.run(y`ROLLBACK`),u}}}lu=O,w(Si,lu,"SQLiteSyncDialect");class Ei extends ir{async migrate(r,e){const o=y`
			CREATE TABLE IF NOT EXISTS "__drizzle_migrations" (
				id SERIAL PRIMARY KEY,
				hash text NOT NULL,
				created_at numeric
			)
		`;await e.run(o);const l=(await e.values(y`SELECT id, hash, created_at FROM "__drizzle_migrations" ORDER BY created_at DESC LIMIT 1`))[0]??void 0;await e.transaction(async u=>{for(const d of r)if(!l||Number(l[2])<d.folderMillis){for(const g of d.sql)await u.run(y.raw(g));await u.run(y`INSERT INTO "__drizzle_migrations" ("hash", "created_at") VALUES(${d.hash}, ${d.folderMillis})`)}})}}cu=O,w(Ei,cu,"SQLiteAsyncDialect");class Ai{getSelectedFields(){return this._.selectedFields}}uu=O,w(Ai,uu,"TypedQueryBuilder");class We{constructor(r){w(this,"fields");w(this,"session");w(this,"dialect");w(this,"withList");w(this,"distinct");this.fields=r.fields,this.session=r.session,this.dialect=r.dialect,this.withList=r.withList,this.distinct=r.distinct}from(r){const e=!!this.fields;let o;return this.fields?o=this.fields:M(r,Ue)?o=Object.fromEntries(Object.keys(r[Ee].selection).map(l=>[l,r[l]])):M(r,rr)?o=r[Le].selectedFields:M(r,V)?o={}:o=tl(r),new sr({table:r,fields:o,isPartialSelect:e,session:this.session,dialect:this.dialect,withList:this.withList,distinct:this.distinct})}}fu=O,w(We,fu,"SQLiteSelectBuilder");class Ni extends Ai{constructor({table:e,fields:o,isPartialSelect:l,session:u,dialect:d,withList:g,distinct:x}){super();w(this,"_");w(this,"config");w(this,"joinsNotNullableMap");w(this,"tableName");w(this,"isPartialSelect");w(this,"session");w(this,"dialect");w(this,"leftJoin",this.createJoin("left"));w(this,"rightJoin",this.createJoin("right"));w(this,"innerJoin",this.createJoin("inner"));w(this,"fullJoin",this.createJoin("full"));w(this,"union",this.createSetOperator("union",!1));w(this,"unionAll",this.createSetOperator("union",!0));w(this,"intersect",this.createSetOperator("intersect",!1));w(this,"except",this.createSetOperator("except",!1));this.config={withList:g,table:e,fields:{...o},distinct:x,setOperators:[]},this.isPartialSelect=l,this.session=u,this.dialect=d,this._={selectedFields:o},this.tableName=yi(e),this.joinsNotNullableMap=typeof this.tableName=="string"?{[this.tableName]:!0}:{}}createJoin(e){return(o,l)=>{var g;const u=this.tableName,d=yi(o);if(typeof d=="string"&&((g=this.config.joins)!=null&&g.some(x=>x.alias===d)))throw new Error(`Alias "${d}" is already used in this query`);if(!this.isPartialSelect&&(Object.keys(this.joinsNotNullableMap).length===1&&typeof u=="string"&&(this.config.fields={[u]:this.config.fields}),typeof d=="string"&&!M(o,V))){const x=M(o,Ue)?o[Ee].selection:M(o,ut)?o[Le].selectedFields:o[j.Symbol.Columns];this.config.fields[d]=x}if(typeof l=="function"&&(l=l(new Proxy(this.config.fields,new Fe({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.joins||(this.config.joins=[]),this.config.joins.push({on:l,table:o,joinType:e,alias:d}),typeof d=="string")switch(e){case"left":{this.joinsNotNullableMap[d]=!1;break}case"right":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([x])=>[x,!1])),this.joinsNotNullableMap[d]=!0;break}case"inner":{this.joinsNotNullableMap[d]=!0;break}case"full":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([x])=>[x,!1])),this.joinsNotNullableMap[d]=!1;break}}return this}}createSetOperator(e,o){return l=>{const u=typeof l=="function"?l(nl()):l;if(!gi(this.getSelectedFields(),u.getSelectedFields()))throw new Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return this.config.setOperators.push({type:e,isAll:o,rightSelect:u}),this}}addSetOperators(e){return this.config.setOperators.push(...e),this}where(e){return typeof e=="function"&&(e=e(new Proxy(this.config.fields,new Fe({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.where=e,this}having(e){return typeof e=="function"&&(e=e(new Proxy(this.config.fields,new Fe({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.having=e,this}groupBy(...e){if(typeof e[0]=="function"){const o=e[0](new Proxy(this.config.fields,new Fe({sqlAliasedBehavior:"alias",sqlBehavior:"sql"})));this.config.groupBy=Array.isArray(o)?o:[o]}else this.config.groupBy=e;return this}orderBy(...e){if(typeof e[0]=="function"){const o=e[0](new Proxy(this.config.fields,new Fe({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),l=Array.isArray(o)?o:[o];this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=l:this.config.orderBy=l}else{const o=e;this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=o:this.config.orderBy=o}return this}limit(e){return this.config.setOperators.length>0?this.config.setOperators.at(-1).limit=e:this.config.limit=e,this}offset(e){return this.config.setOperators.length>0?this.config.setOperators.at(-1).offset=e:this.config.offset=e,this}getSQL(){return this.dialect.buildSelectQuery(this.config)}toSQL(){const{typings:e,...o}=this.dialect.sqlToQuery(this.getSQL());return o}as(e){return new Proxy(new Ue(this.getSQL(),this.config.fields,e),new Fe({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}getSelectedFields(){return new Proxy(this.config.fields,new Fe({alias:this.tableName,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}$dynamic(){return this}}du=O,w(Ni,du,"SQLiteSelectQueryBuilder");class sr extends Ni{constructor(){super(...arguments);w(this,"run",e=>this.prepare(!0).run(e));w(this,"all",e=>this.prepare(!0).all(e));w(this,"get",e=>this.prepare(!0).get(e));w(this,"values",e=>this.prepare(!0).values(e))}prepare(e){if(!this.session)throw new Error("Cannot execute a query on a query builder. Please use a database instance instead.");const o=ft(this.config.fields),l=this.session[e?"prepareOneTimeQuery":"prepareQuery"](this.dialect.sqlToQuery(this.getSQL()),o,"all");return l.joinsNotNullableMap=this.joinsNotNullableMap,l}async execute(){return this.all()}}hu=O,w(sr,hu,"SQLiteSelect"),el(sr,[tt]);function dn(s,r){return(e,o,...l)=>{const u=[o,...l].map(d=>({type:s,isAll:r,rightSelect:d}));for(const d of u)if(!gi(e.getSelectedFields(),d.rightSelect.getSelectedFields()))throw new Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return e.addSetOperators(u)}}const nl=()=>({union:rl,unionAll:il,intersect:sl,except:al}),rl=dn("union",!1),il=dn("union",!0),sl=dn("intersect",!1),al=dn("except",!1);class Ti{constructor(){w(this,"dialect")}$with(r){const e=this;return{as(o){return typeof o=="function"&&(o=o(e)),new Proxy(new Zn(o.getSQL(),o.getSelectedFields(),r,!0),new Fe({alias:r,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}}}with(...r){const e=this;function o(u){return new We({fields:u??void 0,session:void 0,dialect:e.getDialect(),withList:r})}function l(u){return new We({fields:u??void 0,session:void 0,dialect:e.getDialect(),withList:r,distinct:!0})}return{select:o,selectDistinct:l}}select(r){return new We({fields:r??void 0,session:void 0,dialect:this.getDialect()})}selectDistinct(r){return new We({fields:r??void 0,session:void 0,dialect:this.getDialect(),distinct:!0})}getDialect(){return this.dialect||(this.dialect=new Si),this.dialect}}_u=O,w(Ti,_u,"SQLiteQueryBuilder");class $i{constructor(r,e,o){this.table=r,this.session=e,this.dialect=o}set(r){return new ki(this.table,wi(this.table,r),this.session,this.dialect)}}pu=O,w($i,pu,"SQLiteUpdateBuilder");class ki extends tt{constructor(e,o,l,u){super();w(this,"config");w(this,"run",e=>this.prepare(!0).run(e));w(this,"all",e=>this.prepare(!0).all(e));w(this,"get",e=>this.prepare(!0).get(e));w(this,"values",e=>this.prepare(!0).values(e));this.session=l,this.dialect=u,this.config={set:o,table:e}}where(e){return this.config.where=e,this}returning(e=this.config.table[Ae.Symbol.Columns]){return this.config.returning=ft(e),this}getSQL(){return this.dialect.buildUpdateQuery(this.config)}toSQL(){const{typings:e,...o}=this.dialect.sqlToQuery(this.getSQL());return o}prepare(e){return this.session[e?"prepareOneTimeQuery":"prepareQuery"](this.dialect.sqlToQuery(this.getSQL()),this.config.returning,this.config.returning?"all":"run")}async execute(){return this.config.returning?this.all():this.run()}$dynamic(){return this}}mu=O,w(ki,mu,"SQLiteUpdate");class Li{constructor(r,e,o,l,u,d,g,x){this.mode=r,this.fullSchema=e,this.schema=o,this.tableNamesMap=l,this.table=u,this.tableConfig=d,this.dialect=g,this.session=x}findMany(r){return this.mode==="sync"?new ar(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,r||{},"many"):new hn(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,r||{},"many")}findFirst(r){return this.mode==="sync"?new ar(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,r?{...r,limit:1}:{limit:1},"first"):new hn(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,r?{...r,limit:1}:{limit:1},"first")}}gu=O,w(Li,gu,"SQLiteAsyncRelationalQueryBuilder");class hn extends tt{constructor(e,o,l,u,d,g,x,q,A){super();w(this,"mode");this.fullSchema=e,this.schema=o,this.tableNamesMap=l,this.table=u,this.tableConfig=d,this.dialect=g,this.session=x,this.config=q,this.mode=A}getSQL(){return this.dialect.buildRelationalQuery({fullSchema:this.fullSchema,schema:this.schema,tableNamesMap:this.tableNamesMap,table:this.table,tableConfig:this.tableConfig,queryConfig:this.config,tableAlias:this.tableConfig.tsName}).sql}prepare(){const{query:e,builtQuery:o}=this._toSQL();return this.session.prepareQuery(o,void 0,this.mode==="first"?"get":"all",(l,u)=>{const d=l.map(g=>Xn(this.schema,this.tableConfig,g,e.selection,u));return this.mode==="first"?d[0]:d})}_toSQL(){const e=this.dialect.buildRelationalQuery({fullSchema:this.fullSchema,schema:this.schema,tableNamesMap:this.tableNamesMap,table:this.table,tableConfig:this.tableConfig,queryConfig:this.config,tableAlias:this.tableConfig.tsName}),o=this.dialect.sqlToQuery(e.sql);return{query:e,builtQuery:o}}toSQL(){return this._toSQL().builtQuery}executeRaw(){return this.mode==="first"?this.prepare().get():this.prepare().all()}async execute(){return this.executeRaw()}}wu=O,w(hn,wu,"SQLiteAsyncRelationalQuery");class ar extends hn{sync(){return this.executeRaw()}}yu=O,w(ar,yu,"SQLiteSyncRelationalQuery");class zt extends tt{constructor(e,o,l,u,d){super();w(this,"config");this.cb=e,this.getSQLCb=o,this.dialect=u,this.mapBatchResult=d,this.config={action:l}}getSQL(){return this.getSQLCb()}async execute(){return this.cb()}prepare(){return{getQuery:()=>this.dialect.sqlToQuery(this.getSQL()),mapResult:(e,o)=>o?this.mapBatchResult(e):e}}}bu=O,w(zt,bu,"SQLiteRaw");class or{constructor(r,e,o,l){w(this,"query");if(this.resultKind=r,this.dialect=e,this.session=o,this._=l?{schema:l.schema,tableNamesMap:l.tableNamesMap}:{schema:void 0,tableNamesMap:{}},this.query={},this._.schema)for(const[u,d]of Object.entries(this._.schema))this.query[u]=new Li(r,l.fullSchema,this._.schema,this._.tableNamesMap,l.fullSchema[u],d,e,o)}$with(r){return{as(e){return typeof e=="function"&&(e=e(new Ti)),new Proxy(new Zn(e.getSQL(),e.getSelectedFields(),r,!0),new Fe({alias:r,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}}}with(...r){const e=this;function o(u){return new We({fields:u??void 0,session:e.session,dialect:e.dialect,withList:r})}function l(u){return new We({fields:u??void 0,session:e.session,dialect:e.dialect,withList:r,distinct:!0})}return{select:o,selectDistinct:l}}select(r){return new We({fields:r??void 0,session:this.session,dialect:this.dialect})}selectDistinct(r){return new We({fields:r??void 0,session:this.session,dialect:this.dialect,distinct:!0})}update(r){return new $i(r,this.session,this.dialect)}insert(r){return new qi(r,this.session,this.dialect)}delete(r){return new bi(r,this.session,this.dialect)}run(r){const e=r.getSQL();return this.resultKind==="async"?new zt(async()=>this.session.run(e),()=>e,"run",this.dialect,this.session.extractRawRunValueFromBatchResult.bind(this.session)):this.session.run(e)}all(r){const e=r.getSQL();return this.resultKind==="async"?new zt(async()=>this.session.all(e),()=>e,"all",this.dialect,this.session.extractRawAllValueFromBatchResult.bind(this.session)):this.session.all(e)}get(r){const e=r.getSQL();return this.resultKind==="async"?new zt(async()=>this.session.get(e),()=>e,"get",this.dialect,this.session.extractRawGetValueFromBatchResult.bind(this.session)):this.session.get(e)}values(r){const e=r.getSQL();return this.resultKind==="async"?new zt(async()=>this.session.values(e),()=>e,"values",this.dialect,this.session.extractRawValuesValueFromBatchResult.bind(this.session)):this.session.values(e)}transaction(r,e){return this.session.transaction(r,e)}}qu=O,w(or,qu,"BaseSQLiteDatabase");function ol(...s){return s[0].columns?new lr(s[0].columns,s[0].name):new lr(s)}class lr{constructor(r,e){w(this,"columns");w(this,"name");this.columns=r,this.name=e}build(r){return new Ci(r,this.columns,this.name)}}vu=O,w(lr,vu,"SQLitePrimaryKeyBuilder");class Ci{constructor(r,e,o){w(this,"columns");w(this,"name");this.table=r,this.columns=e,this.name=o}getName(){return this.name??`${this.table[Ae.Symbol.Name]}_${this.columns.map(r=>r.name).join("_")}_pk`}}xu=O,w(Ci,xu,"SQLitePrimaryKey");class Di{write(r){console.log(r)}}Su=O,w(Di,Su,"ConsoleLogWriter");class Ii{constructor(r){w(this,"writer");this.writer=(r==null?void 0:r.writer)??new Di}logQuery(r,e){const o=e.map(u=>{try{return JSON.stringify(u)}catch{return String(u)}}),l=o.length?` -- params: [${o.join(", ")}]`:"";this.writer.write(`Query: ${r}${l}`)}}Eu=O,w(Ii,Eu,"DefaultLogger");class Mi{logQuery(){}}Au=O,w(Mi,Au,"NoopLogger");class Oi extends tt{constructor(r){super(),this.resultCb=r}async execute(){return this.resultCb()}sync(){return this.resultCb()}}Nu=O,w(Oi,Nu,"ExecuteResultSync");class Ri{constructor(r,e,o){w(this,"joinsNotNullableMap");this.mode=r,this.executeMethod=e,this.query=o}getQuery(){return this.query}mapRunResult(r,e){return r}mapAllResult(r,e){throw new Error("Not implemented")}mapGetResult(r,e){throw new Error("Not implemented")}execute(r){return this.mode==="async"?this[this.executeMethod](r):new Oi(()=>this[this.executeMethod](r))}mapResult(r,e){switch(this.executeMethod){case"run":return this.mapRunResult(r,e);case"all":return this.mapAllResult(r,e);case"get":return this.mapGetResult(r,e)}}}Tu=O,w(Ri,Tu,"PreparedQuery");class Qi{constructor(r){this.dialect=r}prepareOneTimeQuery(r,e,o){return this.prepareQuery(r,e,o)}run(r){const e=this.dialect.sqlToQuery(r);try{return this.prepareOneTimeQuery(e,void 0,"run").run()}catch(o){throw new fn({cause:o,message:`Failed to run the query '${e.sql}'`})}}extractRawRunValueFromBatchResult(r){return r}all(r){return this.prepareOneTimeQuery(this.dialect.sqlToQuery(r),void 0,"run").all()}extractRawAllValueFromBatchResult(r){throw new Error("Not implemented")}get(r){return this.prepareOneTimeQuery(this.dialect.sqlToQuery(r),void 0,"run").get()}extractRawGetValueFromBatchResult(r){throw new Error("Not implemented")}values(r){return this.prepareOneTimeQuery(this.dialect.sqlToQuery(r),void 0,"run").values()}extractRawValuesValueFromBatchResult(r){throw new Error("Not implemented")}}$u=O,w(Qi,$u,"SQLiteSession");class Ui extends or{constructor(r,e,o,l,u=0){super(r,e,o,l),this.schema=l,this.nestedIndex=u}rollback(){throw new xi}}ku=O,w(Ui,ku,"SQLiteTransaction");const Tt=nr("snippets",{id:Te("id").primaryKey(),folderId:Te("folder_id").references(()=>$t.id,{onDelete:"cascade",onUpdate:"cascade"}),name:Te("name").notNull(),language:Te("language").notNull(),text:Te("text").notNull(),encrypted:Zo("encrypted",{mode:"boolean"}).default(!1).notNull(),position:fi("position").default(1).notNull(),updatedAt:Te("updated_at").default(y`CURRENT_TIMESTAMP`).notNull(),createdAt:Te("created_at").default(y`CURRENT_TIMESTAMP`).notNull()}),$t=nr("folders",{id:Te("id").primaryKey(),name:Te("name").notNull(),position:fi("position").default(1).notNull(),updatedAt:Te("updated_at").default(y`CURRENT_TIMESTAMP`).notNull(),createdAt:Te("created_at").default(y`CURRENT_TIMESTAMP`).notNull()}),_n=nr("snippet_tags",{snippetId:Te("snippet_id").references(()=>Tt.id,{onDelete:"cascade",onUpdate:"cascade"}).notNull(),tagText:Te("tag_text").notNull(),updatedAt:Te("updated_at").default(y`CURRENT_TIMESTAMP`).notNull(),createdAt:Te("created_at").default(y`CURRENT_TIMESTAMP`).notNull()},s=>({pk:ol({name:"primary_key__snippet_id__tag_text",columns:[s.snippetId,s.tagText]})}));async function ll(s,r){return s.select().from(Tt).where(y`folder_id = ${r}`)}async function cl(s,r){return s.select().from(_n).where(y`snippet_id IN ${r}`)}async function cr(s,r){return s.insert(Tt).values(r).onConflictDoUpdate({target:Tt.id,set:{folderId:y`excluded.folder_id`,encrypted:y`excluded.encrypted`,position:y`excluded.position`,text:y`excluded.text`,name:y`excluded.name`,language:y`excluded.language`,updatedAt:y`CURRENT_TIMESTAMP`}})}async function Fi(s,r,e){const o=e.map(l=>({snippetId:r,tagText:l}));return s.insert(_n).values(o).onConflictDoNothing()}async function ul(s,r){return s.delete(_n).where(y`snippet_id = ${r}`)}async function fl(s,r){return s.delete(Tt).where(y`id = ${r}`)}Za=async function(s){return s.select().from($t)},Ba=async function(s,r){return s.insert($t).values(r).onConflictDoUpdate({target:$t.id,set:{name:y`excluded.name`,position:y`excluded.position`,updatedAt:y`CURRENT_TIMESTAMP`}})},ja=async function(s,r){return s.delete($t).where(y`id = ${r}`)};function dl(s){const r={};for(const e of s){if(!r[e.snippetId]){r[e.snippetId]=[e.tagText];continue}r[e.snippetId].push(e.tagText)}return r}function hl(s,r){return{id:s.id,name:s.name,language:s.language,text:s.text,position:s.position,encrypted:s.encrypted,tags:r[s.id]??[],createdAt:Date.parse(s.createdAt),updatedAt:Date.parse(s.updatedAt)}}function ur(s,r){return{id:r.id,language:r.language,name:r.name,text:r.text,position:r.position,encrypted:r.encrypted,folderId:s,createdAt:new Date(r.createdAt).toISOString(),updatedAt:new Date(r.updatedAt).toISOString()}}const _l={default:{id:"default",displayName:"Default",showLockedCard:!0,position:0,createdAt:new Date().getTime(),updatedAt:new Date().getTime()}};function pl(s){return`folder.${s}`}async function ml(s="default"){const r=await(await navigator.storage.getDirectory()).getDirectoryHandle(pl(s),{create:!0}),e=[];for await(let[o,l]of r)if(l.kind==="file"){const u=await(await l.getFile()).text(),d={id:o.replace(".json",""),...JSON.parse(u)};e.push(d)}return e}Ir=function(){return{id:crypto.randomUUID(),name:"Untitled",language:"plaintext",text:"To be filled",tags:[],encrypted:!1,position:0,updatedAt:new Date().getTime(),createdAt:new Date().getTime()}},so=async function(s,r){return{...s,encrypted:!0,text:await _o(s.text,r),updatedAt:new Date().getTime()}},io=async function(s,r){return{...s,encrypted:!1,text:await po(s.text,r),updatedAt:new Date().getTime()}};async function gl(s,r){let e=[],o="default";const l=Xe(e),{subscribe:u,set:d,update:g}=l;return Fa([Kn,s],([x,q])=>(o=x.folderId,[x,q])).subscribe(async([x,q])=>{if(q==="done"){const A=await ll(r,o),k=A.map(U=>U.id),F=await cl(r,k),B=dl(F);e=A.map(U=>hl(U,B)),l.set(e)}}),{subscribe:u,clone:async x=>{const q={...x,id:crypto.randomUUID(),position:e.length+1,tags:x.tags.slice(),createdAt:new Date().getTime(),updatedAt:new Date().getTime()},A=ur(o,q);await cr(r,A),x.tags.length>0&&await Fi(r,q.id,x.tags),e.push(q),d(e)},upsert:async x=>{const q=ur(o,x);await cr(r,q),x.tags&&x.tags.length>0&&(await ul(r,x.id),await Fi(r,x.id,x.tags));const A=e.findIndex(k=>k.id===x.id);if(A===-1){e.push(x),d(e);return}e[A]=x,d(e)},remove:async x=>{await fl(r,x);const q=e.findIndex(A=>A.id===x);e.splice(q,1),d(e)},move:async(x,q,A)=>{const k=ur(q,x);k.folderId=A,await cr(r,k);const F=e.findIndex(B=>B.id===x.id);e.splice(F,1),d(e)}}}async function wl(){const s=await(await(await(await navigator.storage.getDirectory()).getFileHandle("catalog.json",{create:!0})).getFile()).text(),r=s?JSON.parse(s):{};return Object.assign({},_l,r)}async function yl(){const s=await(await(await(await navigator.storage.getDirectory()).getFileHandle("globalState.json",{create:!0})).getFile()).text(),r=s?JSON.parse(s):{};return Object.assign({},{folderId:"default",tags:[],searchInput:""},r)}async function kt(s){const r=await(await(await navigator.storage.getDirectory()).getFileHandle("globalState.json",{create:!0})).createWritable();await r.write(JSON.stringify(s)),await r.close()}Ga=Xe(Ir()),Wa=Xe("default");var bl=(()=>{var s=import.meta.url;return function(r={}){var e=r,o,l;e.ready=new Promise((t,n)=>{o=t,l=n});var u=Object.assign({},e),d="./this.program",g=(t,n)=>{throw n},x=typeof window=="object",q=typeof importScripts=="function",A="",k;(x||q)&&(q?A=self.location.href:typeof document<"u"&&document.currentScript&&(A=document.currentScript.src),s&&(A=s),A.indexOf("blob:")!==0?A=A.substr(0,A.replace(/[?#].*/,"").lastIndexOf("/")+1):A="",q&&(k=t=>{var n=new XMLHttpRequest;return n.open("GET",t,!1),n.responseType="arraybuffer",n.send(null),new Uint8Array(n.response)}));var F=e.print||console.log.bind(console),B=e.printErr||console.error.bind(console);Object.assign(e,u),u=null,e.thisProgram&&(d=e.thisProgram),e.quit&&(g=e.quit);var U;e.wasmBinary&&(U=e.wasmBinary),typeof WebAssembly!="object"&&ye("no native wasm support detected");var h,_=!1,p,v,b,P,G,Q,D,H,z;function le(){var t=h.buffer;e.HEAP8=v=new Int8Array(t),e.HEAP16=P=new Int16Array(t),e.HEAPU8=b=new Uint8Array(t),e.HEAPU16=G=new Uint16Array(t),e.HEAP32=Q=new Int32Array(t),e.HEAPU32=D=new Uint32Array(t),e.HEAPF32=H=new Float32Array(t),e.HEAPF64=z=new Float64Array(t)}var Oe=[],Me=[],Je=[],Be=[];function ne(){var t=e.preRun.shift();Oe.unshift(t)}var X=0,he=null;function ye(t){throw e.onAbort&&e.onAbort(t),t="Aborted("+t+")",B(t),_=!0,p=1,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),l(t),t}var bt=t=>t.startsWith("data:application/octet-stream;base64,"),Re;if(e.locateFile){if(Re="wa-sqlite-async.wasm",!bt(Re)){var qt=Re;Re=e.locateFile?e.locateFile(qt,A):A+qt}}else Re=new URL(""+new URL("../assets/wa-sqlite-async.01d842c4.wasm",import.meta.url).href,self.location).href;function Yt(t){if(t==Re&&U)return new Uint8Array(U);if(k)return k(t);throw"both async and sync fetching of the wasm failed"}function Nn(t){return U||!x&&!q||typeof fetch!="function"?Promise.resolve().then(()=>Yt(t)):fetch(t,{credentials:"same-origin"}).then(n=>{if(!n.ok)throw"failed to load wasm binary file at '"+t+"'";return n.arrayBuffer()}).catch(()=>Yt(t))}function Tn(t,n,i){return Nn(t).then(a=>WebAssembly.instantiate(a,n)).then(a=>a).then(i,a=>{B(`failed to asynchronously prepare wasm: ${a}`),ye(a)})}function Iu(t,n){var i=Re;return U||typeof WebAssembly.instantiateStreaming!="function"||bt(i)||typeof fetch!="function"?Tn(i,t,n):fetch(i,{credentials:"same-origin"}).then(a=>WebAssembly.instantiateStreaming(a,t).then(n,function(c){return B(`wasm streaming compile failed: ${c}`),B("falling back to ArrayBuffer instantiation"),Tn(i,t,n)}))}var K,ce;function is(t){this.name="ExitStatus",this.message=`Program terminated with exit(${t})`,this.status=t}var $n=t=>{for(;0<t.length;)t.shift()(e)};function be(t,n="i8"){switch(n.endsWith("*")&&(n="*"),n){case"i1":return v[t>>0];case"i8":return v[t>>0];case"i16":return P[t>>1];case"i32":return Q[t>>2];case"i64":ye("to do getValue(i64) use WASM_BIGINT");case"float":return H[t>>2];case"double":return z[t>>3];case"*":return D[t>>2];default:ye(`invalid type for getValue: ${n}`)}}var ss=e.noExitRuntime||!0;function je(t,n,i="i8"){switch(i.endsWith("*")&&(i="*"),i){case"i1":v[t>>0]=n;break;case"i8":v[t>>0]=n;break;case"i16":P[t>>1]=n;break;case"i32":Q[t>>2]=n;break;case"i64":ye("to do setValue(i64) use WASM_BIGINT");case"float":H[t>>2]=n;break;case"double":z[t>>3]=n;break;case"*":D[t>>2]=n;break;default:ye(`invalid type for setValue: ${i}`)}}var as=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Z=(t,n,i)=>{var a=n+i;for(i=n;t[i]&&!(i>=a);)++i;if(16<i-n&&t.buffer&&as)return as.decode(t.subarray(n,i));for(a="";n<i;){var c=t[n++];if(c&128){var m=t[n++]&63;if((c&224)==192)a+=String.fromCharCode((c&31)<<6|m);else{var S=t[n++]&63;c=(c&240)==224?(c&15)<<12|m<<6|S:(c&7)<<18|m<<12|S<<6|t[n++]&63,65536>c?a+=String.fromCharCode(c):(c-=65536,a+=String.fromCharCode(55296|c>>10,56320|c&1023))}}else a+=String.fromCharCode(c)}return a},os=(t,n)=>{for(var i=0,a=t.length-1;0<=a;a--){var c=t[a];c==="."?t.splice(a,1):c===".."?(t.splice(a,1),i++):i&&(t.splice(a,1),i--)}if(n)for(;i;i--)t.unshift("..");return t},st=t=>{var n=t.charAt(0)==="/",i=t.substr(-1)==="/";return(t=os(t.split("/").filter(a=>!!a),!n).join("/"))||n||(t="."),t&&i&&(t+="/"),(n?"/":"")+t},Mu=t=>{var n=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(t).slice(1);return t=n[0],n=n[1],!t&&!n?".":(n&&(n=n.substr(0,n.length-1)),t+n)},kn=t=>{if(t==="/")return"/";t=st(t),t=t.replace(/\/$/,"");var n=t.lastIndexOf("/");return n===-1?t:t.substr(n+1)},Ou=()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return t=>crypto.getRandomValues(t);ye("initRandomDevice")},ls=t=>(ls=Ou())(t);function Ln(){for(var t="",n=!1,i=arguments.length-1;-1<=i&&!n;i--){if(n=0<=i?arguments[i]:"/",typeof n!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!n)return"";t=n+"/"+t,n=n.charAt(0)==="/"}return t=os(t.split("/").filter(a=>!!a),!n).join("/"),(n?"/":"")+t||"."}var gr=[],vt=t=>{for(var n=0,i=0;i<t.length;++i){var a=t.charCodeAt(i);127>=a?n++:2047>=a?n+=2:55296<=a&&57343>=a?(n+=4,++i):n+=3}return n},xt=(t,n,i,a)=>{if(!(0<a))return 0;var c=i;a=i+a-1;for(var m=0;m<t.length;++m){var S=t.charCodeAt(m);if(55296<=S&&57343>=S){var $=t.charCodeAt(++m);S=65536+((S&1023)<<10)|$&1023}if(127>=S){if(i>=a)break;n[i++]=S}else{if(2047>=S){if(i+1>=a)break;n[i++]=192|S>>6}else{if(65535>=S){if(i+2>=a)break;n[i++]=224|S>>12}else{if(i+3>=a)break;n[i++]=240|S>>18,n[i++]=128|S>>12&63}n[i++]=128|S>>6&63}n[i++]=128|S&63}}return n[i]=0,i-c};function cs(t,n,i){return i=Array(0<i?i:vt(t)+1),t=xt(t,i,0,i.length),n&&(i.length=t),i}var us=[];function fs(t,n){us[t]={input:[],Cf:[],Nf:n},qr(t,Ru)}var Ru={open(t){var n=us[t.node.Qf];if(!n)throw new I(43);t.Df=n,t.seekable=!1},close(t){t.Df.Nf.Sf(t.Df)},Sf(t){t.Df.Nf.Sf(t.Df)},read(t,n,i,a){if(!t.Df||!t.Df.Nf.hg)throw new I(60);for(var c=0,m=0;m<a;m++){try{var S=t.Df.Nf.hg(t.Df)}catch{throw new I(29)}if(S===void 0&&c===0)throw new I(6);if(S==null)break;c++,n[i+m]=S}return c&&(t.node.timestamp=Date.now()),c},write(t,n,i,a){if(!t.Df||!t.Df.Nf.bg)throw new I(60);try{for(var c=0;c<a;c++)t.Df.Nf.bg(t.Df,n[i+c])}catch{throw new I(29)}return a&&(t.node.timestamp=Date.now()),c}},Qu={hg(){e:{if(!gr.length){var t=null;if(typeof window<"u"&&typeof window.prompt=="function"?(t=window.prompt("Input: "),t!==null&&(t+=`
`)):typeof readline=="function"&&(t=readline(),t!==null&&(t+=`
`)),!t){t=null;break e}gr=cs(t,!0)}t=gr.shift()}return t},bg(t,n){n===null||n===10?(F(Z(t.Cf,0)),t.Cf=[]):n!=0&&t.Cf.push(n)},Sf(t){t.Cf&&0<t.Cf.length&&(F(Z(t.Cf,0)),t.Cf=[])},Ig(){return{Eg:25856,Gg:5,Dg:191,Fg:35387,Cg:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},Jg(){return 0},Kg(){return[24,80]}},Uu={bg(t,n){n===null||n===10?(B(Z(t.Cf,0)),t.Cf=[]):n!=0&&t.Cf.push(n)},Sf(t){t.Cf&&0<t.Cf.length&&(B(Z(t.Cf,0)),t.Cf=[])}};function ds(t,n){var i=t.yf?t.yf.length:0;i>=n||(n=Math.max(n,i*(1048576>i?2:1.125)>>>0),i!=0&&(n=Math.max(n,256)),i=t.yf,t.yf=new Uint8Array(n),0<t.Af&&t.yf.set(i.subarray(0,t.Af),0))}var Y={Gf:null,Ff(){return Y.createNode(null,"/",16895,0)},createNode(t,n,i,a){if((i&61440)===24576||(i&61440)===4096)throw new I(63);return Y.Gf||(Y.Gf={dir:{node:{Ef:Y.wf.Ef,Bf:Y.wf.Bf,Of:Y.wf.Of,Tf:Y.wf.Tf,lg:Y.wf.lg,Yf:Y.wf.Yf,Wf:Y.wf.Wf,kg:Y.wf.kg,Xf:Y.wf.Xf},stream:{Kf:Y.xf.Kf}},file:{node:{Ef:Y.wf.Ef,Bf:Y.wf.Bf},stream:{Kf:Y.xf.Kf,read:Y.xf.read,write:Y.xf.write,eg:Y.xf.eg,Uf:Y.xf.Uf,Vf:Y.xf.Vf}},link:{node:{Ef:Y.wf.Ef,Bf:Y.wf.Bf,Rf:Y.wf.Rf},stream:{}},fg:{node:{Ef:Y.wf.Ef,Bf:Y.wf.Bf},stream:ju}}),i=ms(t,n,i,a),Qe(i.mode)?(i.wf=Y.Gf.dir.node,i.xf=Y.Gf.dir.stream,i.yf={}):(i.mode&61440)===32768?(i.wf=Y.Gf.file.node,i.xf=Y.Gf.file.stream,i.Af=0,i.yf=null):(i.mode&61440)===40960?(i.wf=Y.Gf.link.node,i.xf=Y.Gf.link.stream):(i.mode&61440)===8192&&(i.wf=Y.Gf.fg.node,i.xf=Y.Gf.fg.stream),i.timestamp=Date.now(),t&&(t.yf[n]=i,t.timestamp=i.timestamp),i},Hg(t){return t.yf?t.yf.subarray?t.yf.subarray(0,t.Af):new Uint8Array(t.yf):new Uint8Array(0)},wf:{Ef(t){var n={};return n.rg=(t.mode&61440)===8192?t.id:1,n.ig=t.id,n.mode=t.mode,n.xg=1,n.uid=0,n.ug=0,n.Qf=t.Qf,Qe(t.mode)?n.size=4096:(t.mode&61440)===32768?n.size=t.Af:(t.mode&61440)===40960?n.size=t.link.length:n.size=0,n.ng=new Date(t.timestamp),n.wg=new Date(t.timestamp),n.qg=new Date(t.timestamp),n.og=4096,n.pg=Math.ceil(n.size/n.og),n},Bf(t,n){if(n.mode!==void 0&&(t.mode=n.mode),n.timestamp!==void 0&&(t.timestamp=n.timestamp),n.size!==void 0&&(n=n.size,t.Af!=n))if(n==0)t.yf=null,t.Af=0;else{var i=t.yf;t.yf=new Uint8Array(n),i&&t.yf.set(i.subarray(0,Math.min(n,t.Af))),t.Af=n}},Of(){throw yr[44]},Tf(t,n,i,a){return Y.createNode(t,n,i,a)},lg(t,n,i){if(Qe(t.mode)){try{var a=St(n,i)}catch{}if(a)for(var c in a.yf)throw new I(55)}delete t.parent.yf[t.name],t.parent.timestamp=Date.now(),t.name=i,n.yf[i]=t,n.timestamp=t.parent.timestamp,t.parent=n},Yf(t,n){delete t.yf[n],t.timestamp=Date.now()},Wf(t,n){var i=St(t,n),a;for(a in i.yf)throw new I(55);delete t.yf[n],t.timestamp=Date.now()},kg(t){var n=[".",".."],i;for(i in t.yf)t.yf.hasOwnProperty(i)&&n.push(i);return n},Xf(t,n,i){return t=Y.createNode(t,n,41471,0),t.link=i,t},Rf(t){if((t.mode&61440)!==40960)throw new I(28);return t.link}},xf:{read(t,n,i,a,c){var m=t.node.yf;if(c>=t.node.Af)return 0;if(t=Math.min(t.node.Af-c,a),8<t&&m.subarray)n.set(m.subarray(c,c+t),i);else for(a=0;a<t;a++)n[i+a]=m[c+a];return t},write(t,n,i,a,c,m){if(n.buffer===v.buffer&&(m=!1),!a)return 0;if(t=t.node,t.timestamp=Date.now(),n.subarray&&(!t.yf||t.yf.subarray)){if(m)return t.yf=n.subarray(i,i+a),t.Af=a;if(t.Af===0&&c===0)return t.yf=n.slice(i,i+a),t.Af=a;if(c+a<=t.Af)return t.yf.set(n.subarray(i,i+a),c),a}if(ds(t,c+a),t.yf.subarray&&n.subarray)t.yf.set(n.subarray(i,i+a),c);else for(m=0;m<a;m++)t.yf[c+m]=n[i+m];return t.Af=Math.max(t.Af,c+a),a},Kf(t,n,i){if(i===1?n+=t.position:i===2&&(t.node.mode&61440)===32768&&(n+=t.node.Af),0>n)throw new I(28);return n},eg(t,n,i){ds(t.node,n+i),t.node.Af=Math.max(t.node.Af,n+i)},Uf(t,n,i,a,c){if((t.node.mode&61440)!==32768)throw new I(43);if(t=t.node.yf,c&2||t.buffer!==v.buffer){if((0<i||i+n<t.length)&&(t.subarray?t=t.subarray(i,i+n):t=Array.prototype.slice.call(t,i,i+n)),i=!0,n=65536*Math.ceil(n/65536),(c=$a(65536,n))?(b.fill(0,c,c+n),n=c):n=0,!n)throw new I(48);v.set(t,n)}else i=!1,n=t.byteOffset;return{yg:n,mg:i}},Vf(t,n,i,a){return Y.xf.write(t,n,0,a,i,!1),0}}},Fu=(t,n)=>{var i=0;return t&&(i|=365),n&&(i|=146),i},wr=null,hs={},Jt=[],Pu=1,at=null,_s=!0,I=null,yr={};function De(t,n={}){if(t=Ln(t),!t)return{path:"",node:null};if(n=Object.assign({gg:!0,cg:0},n),8<n.cg)throw new I(32);t=t.split("/").filter(S=>!!S);for(var i=wr,a="/",c=0;c<t.length;c++){var m=c===t.length-1;if(m&&n.parent)break;if(i=St(i,t[c]),a=st(a+"/"+t[c]),i.Lf&&(!m||m&&n.gg)&&(i=i.Lf.root),!m||n.Jf){for(m=0;(i.mode&61440)===40960;)if(i=xs(a),a=Ln(Mu(a),i),i=De(a,{cg:n.cg+1}).node,40<m++)throw new I(32)}}return{path:a,node:i}}function Cn(t){for(var n;;){if(t===t.parent)return t=t.Ff.jg,n?t[t.length-1]!=="/"?`${t}/${n}`:t+n:t;n=n?`${t.name}/${n}`:t.name,t=t.parent}}function br(t,n){for(var i=0,a=0;a<n.length;a++)i=(i<<5)-i+n.charCodeAt(a)|0;return(t+i>>>0)%at.length}function ps(t){var n=br(t.parent.id,t.name);if(at[n]===t)at[n]=t.Mf;else for(n=at[n];n;){if(n.Mf===t){n.Mf=t.Mf;break}n=n.Mf}}function St(t,n){var i;if(i=(i=Ot(t,"x"))?i:t.wf.Of?0:2)throw new I(i,t);for(i=at[br(t.id,n)];i;i=i.Mf){var a=i.name;if(i.parent.id===t.id&&a===n)return i}return t.wf.Of(t,n)}function ms(t,n,i,a){return t=new Ea(t,n,i,a),n=br(t.parent.id,t.name),t.Mf=at[n],at[n]=t}function Qe(t){return(t&61440)===16384}function gs(t){var n=["r","w","rw"][t&3];return t&512&&(n+="w"),n}function Ot(t,n){if(_s)return 0;if(!n.includes("r")||t.mode&292){if(n.includes("w")&&!(t.mode&146)||n.includes("x")&&!(t.mode&73))return 2}else return 2;return 0}function ws(t,n){try{return St(t,n),20}catch{}return Ot(t,"wx")}function ys(t,n,i){try{var a=St(t,n)}catch(c){return c.zf}if(t=Ot(t,"wx"))return t;if(i){if(!Qe(a.mode))return 54;if(a===a.parent||Cn(a)==="/")return 10}else if(Qe(a.mode))return 31;return 0}function Bu(){for(var t=0;4096>=t;t++)if(!Jt[t])return t;throw new I(33)}function $e(t){if(t=Jt[t],!t)throw new I(8);return t}function bs(t,n=-1){return Zt||(Zt=function(){this.Zf={}},Zt.prototype={},Object.defineProperties(Zt.prototype,{object:{get(){return this.node},set(i){this.node=i}},flags:{get(){return this.Zf.flags},set(i){this.Zf.flags=i}},position:{get(){return this.Zf.position},set(i){this.Zf.position=i}}})),t=Object.assign(new Zt,t),n==-1&&(n=Bu()),t.Hf=n,Jt[n]=t}var ju={open(t){t.xf=hs[t.node.Qf].xf,t.xf.open&&t.xf.open(t)},Kf(){throw new I(70)}};function qr(t,n){hs[t]={xf:n}}function qs(t,n){var i=n==="/",a=!n;if(i&&wr)throw new I(10);if(!i&&!a){var c=De(n,{gg:!1});if(n=c.path,c=c.node,c.Lf)throw new I(10);if(!Qe(c.mode))throw new I(54)}n={type:t,Mg:{},jg:n,vg:[]},t=t.Ff(n),t.Ff=n,n.root=t,i?wr=t:c&&(c.Lf=n,c.Ff&&c.Ff.vg.push(n))}function vr(t,n,i){var a=De(t,{parent:!0}).node;if(t=kn(t),!t||t==="."||t==="..")throw new I(28);var c=ws(a,t);if(c)throw new I(c);if(!a.wf.Tf)throw new I(63);return a.wf.Tf(a,t,n,i)}function ze(t,n){return vr(t,(n!==void 0?n:511)&1023|16384,0)}function Dn(t,n,i){typeof i>"u"&&(i=n,n=438),vr(t,n|8192,i)}function xr(t,n){if(!Ln(t))throw new I(44);var i=De(n,{parent:!0}).node;if(!i)throw new I(44);n=kn(n);var a=ws(i,n);if(a)throw new I(a);if(!i.wf.Xf)throw new I(63);i.wf.Xf(i,n,t)}function vs(t){var n=De(t,{parent:!0}).node;t=kn(t);var i=St(n,t),a=ys(n,t,!0);if(a)throw new I(a);if(!n.wf.Wf)throw new I(63);if(i.Lf)throw new I(10);n.wf.Wf(n,t),ps(i)}function xs(t){if(t=De(t).node,!t)throw new I(44);if(!t.wf.Rf)throw new I(28);return Ln(Cn(t.parent),t.wf.Rf(t))}function In(t,n){if(t=De(t,{Jf:!n}).node,!t)throw new I(44);if(!t.wf.Ef)throw new I(63);return t.wf.Ef(t)}function Ss(t){return In(t,!0)}function Es(t,n){if(t=typeof t=="string"?De(t,{Jf:!0}).node:t,!t.wf.Bf)throw new I(63);t.wf.Bf(t,{mode:n&4095|t.mode&-4096,timestamp:Date.now()})}function As(t,n){if(0>n)throw new I(28);if(t=typeof t=="string"?De(t,{Jf:!0}).node:t,!t.wf.Bf)throw new I(63);if(Qe(t.mode))throw new I(31);if((t.mode&61440)!==32768)throw new I(28);var i=Ot(t,"w");if(i)throw new I(i);t.wf.Bf(t,{size:n,timestamp:Date.now()})}function Mn(t,n,i){if(t==="")throw new I(44);if(typeof n=="string"){var a={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[n];if(typeof a>"u")throw Error(`Unknown file open mode: ${n}`);n=a}if(i=n&64?(typeof i>"u"?438:i)&4095|32768:0,typeof t=="object")var c=t;else{t=st(t);try{c=De(t,{Jf:!(n&131072)}).node}catch{}}if(a=!1,n&64)if(c){if(n&128)throw new I(20)}else c=vr(t,i,0),a=!0;if(!c)throw new I(44);if((c.mode&61440)===8192&&(n&=-513),n&65536&&!Qe(c.mode))throw new I(54);if(!a&&(i=c?(c.mode&61440)===40960?32:Qe(c.mode)&&(gs(n)!=="r"||n&512)?31:Ot(c,gs(n)):44))throw new I(i);return n&512&&!a&&As(c,0),n&=-131713,c=bs({node:c,path:Cn(c),flags:n,seekable:!0,position:0,xf:c.xf,Bg:[],error:!1}),c.xf.open&&c.xf.open(c),!e.logReadFiles||n&1||(On||(On={}),t in On||(On[t]=1)),c}function Ns(t,n,i){if(t.Hf===null)throw new I(8);if(!t.seekable||!t.xf.Kf)throw new I(70);if(i!=0&&i!=1&&i!=2)throw new I(28);t.position=t.xf.Kf(t,n,i),t.Bg=[]}function Ts(){I||(I=function(t,n){this.name="ErrnoError",this.node=n,this.zg=function(i){this.zf=i},this.zg(t),this.message="FS error"},I.prototype=Error(),I.prototype.constructor=I,[44].forEach(t=>{yr[t]=new I(t),yr[t].stack="<generic error, no stack>"}))}var $s;function Xt(t,n,i){t=st("/dev/"+t);var a=Fu(!!n,!!i);Sr||(Sr=64);var c=Sr++<<8|0;qr(c,{open(m){m.seekable=!1},close(){i&&i.buffer&&i.buffer.length&&i(10)},read(m,S,$,E){for(var N=0,C=0;C<E;C++){try{var L=n()}catch{throw new I(29)}if(L===void 0&&N===0)throw new I(6);if(L==null)break;N++,S[$+C]=L}return N&&(m.node.timestamp=Date.now()),N},write(m,S,$,E){for(var N=0;N<E;N++)try{i(S[$+N])}catch{throw new I(29)}return E&&(m.node.timestamp=Date.now()),N}}),Dn(t,a,c)}var Sr,ie={},Zt,On;function Et(t,n,i){if(n.charAt(0)==="/")return n;if(t=t===-100?"/":$e(t).path,n.length==0){if(!i)throw new I(44);return t}return st(t+"/"+n)}function Rn(t,n,i){try{var a=t(n)}catch(m){if(m&&m.node&&st(n)!==st(Cn(m.node)))return-54;throw m}Q[i>>2]=a.rg,Q[i+4>>2]=a.mode,D[i+8>>2]=a.xg,Q[i+12>>2]=a.uid,Q[i+16>>2]=a.ug,Q[i+20>>2]=a.Qf,ce=[a.size>>>0,(K=a.size,1<=+Math.abs(K)?0<K?+Math.floor(K/4294967296)>>>0:~~+Math.ceil((K-+(~~K>>>0))/4294967296)>>>0:0)],Q[i+24>>2]=ce[0],Q[i+28>>2]=ce[1],Q[i+32>>2]=4096,Q[i+36>>2]=a.pg,t=a.ng.getTime(),n=a.wg.getTime();var c=a.qg.getTime();return ce=[Math.floor(t/1e3)>>>0,(K=Math.floor(t/1e3),1<=+Math.abs(K)?0<K?+Math.floor(K/4294967296)>>>0:~~+Math.ceil((K-+(~~K>>>0))/4294967296)>>>0:0)],Q[i+40>>2]=ce[0],Q[i+44>>2]=ce[1],D[i+48>>2]=t%1e3*1e3,ce=[Math.floor(n/1e3)>>>0,(K=Math.floor(n/1e3),1<=+Math.abs(K)?0<K?+Math.floor(K/4294967296)>>>0:~~+Math.ceil((K-+(~~K>>>0))/4294967296)>>>0:0)],Q[i+56>>2]=ce[0],Q[i+60>>2]=ce[1],D[i+64>>2]=n%1e3*1e3,ce=[Math.floor(c/1e3)>>>0,(K=Math.floor(c/1e3),1<=+Math.abs(K)?0<K?+Math.floor(K/4294967296)>>>0:~~+Math.ceil((K-+(~~K>>>0))/4294967296)>>>0:0)],Q[i+72>>2]=ce[0],Q[i+76>>2]=ce[1],D[i+80>>2]=c%1e3*1e3,ce=[a.ig>>>0,(K=a.ig,1<=+Math.abs(K)?0<K?+Math.floor(K/4294967296)>>>0:~~+Math.ceil((K-+(~~K>>>0))/4294967296)>>>0:0)],Q[i+88>>2]=ce[0],Q[i+92>>2]=ce[1],0}var Qn=void 0;function Un(){var t=Q[+Qn>>2];return Qn+=4,t}var en=(t,n)=>n+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*n:NaN,zu=[0,31,60,91,121,152,182,213,244,274,305,335],Ku=[0,31,59,90,120,151,181,212,243,273,304,334],ks=t=>{var n=vt(t)+1,i=kr(n);return i&&xt(t,b,i,n),i},Er={},Ls=()=>{if(!Ar){var t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:d||"./this.program"},n;for(n in Er)Er[n]===void 0?delete t[n]:t[n]=Er[n];var i=[];for(n in t)i.push(`${n}=${t[n]}`);Ar=i}return Ar},Ar;function Cs(){}function Ds(){}function Is(){}function Ms(){}function Os(){}function Rs(){}function Qs(){}function Us(){}function Fs(){}function Ps(){}function Bs(){}function js(){}function zs(){}function Ks(){}function Vs(){}function Hs(){}function Ws(){}function Gs(){}function Ys(){}function Js(){}function Xs(){}function Zs(){}function ea(){}function ta(){}function na(){}function ra(){}function ia(){}function sa(){}function aa(){}function oa(){}function la(){}function ca(){}function ua(){}function fa(){}function da(){}function ha(){}function _a(){}function pa(){}function ma(){}var Fn=0,ga=t=>{p=t,ss||0<Fn||(e.onExit&&e.onExit(t),_=!0),g(t,new is(t))},Nr=t=>{t instanceof is||t=="unwind"||g(1,t)},Pn=t=>{try{t()}catch(n){ye(n)}};function Vu(){var t=f,n={},i;for(i in t)(function(a){var c=t[a];n[a]=typeof c=="function"?function(){Bn.push(a);try{return c.apply(null,arguments)}finally{_||(Bn.pop()===a||ye(),Ke&&ot===1&&Bn.length===0&&(ot=0,Pn(Ia),typeof Fibers<"u"&&Fibers.Ng()))}}:c})(i);return n}var ot=0,Ke=null,wa=0,Bn=[],ya={},ba={},Hu=0,Tr=null,Wu=[];function Gu(){return new Promise((t,n)=>{Tr={resolve:t,reject:n}})}function Yu(){var t=kr(16396),n=t+12;D[t>>2]=n,D[t+4>>2]=n+16384,n=Bn[0];var i=ya[n];return i===void 0&&(i=Hu++,ya[n]=i,ba[i]=n),Q[t+8>>2]=i,t}function qa(t){if(!_){if(ot===0){var n=!1,i=!1;t((a=0)=>{if(!_&&(wa=a,n=!0,i)){ot=2,Pn(()=>Ma(Ke)),typeof Browser<"u"&&Browser.ag.tg&&Browser.ag.resume(),a=!1;try{var c=(0,f[ba[Q[Ke+8>>2]]])()}catch($){c=$,a=!0}var m=!1;if(!Ke){var S=Tr;S&&(Tr=null,(a?S.reject:S.resolve)(c),m=!0)}if(a&&!m)throw c}}),i=!0,n||(ot=1,Ke=Yu(),typeof Browser<"u"&&Browser.ag.tg&&Browser.ag.pause(),Pn(()=>Da(Ke)))}else ot===2?(ot=0,Pn(Oa),Na(Ke),Ke=null,Wu.forEach(a=>{if(!_)try{if(a(),!(ss||0<Fn))try{p=a=p,ga(a)}catch(c){Nr(c)}}catch(c){Nr(c)}})):ye(`invalid state: ${ot}`);return wa}}function $r(t){return qa(n=>{t().then(n)})}var va={},At,Rt,xa=[],Ve=(t,n,i,a,c)=>{function m(L){return--Fn,E!==0&&Ca(E),n==="string"?L?Z(b,L):"":n==="boolean"?!!L:L}var S={string:L=>{var R=0;if(L!=null&&L!==0){R=vt(L)+1;var J=Lr(R);xt(L,b,J,R),R=J}return R},array:L=>{var R=Lr(L.length);return v.set(L,R),R}};t=e["_"+t];var $=[],E=0;if(a)for(var N=0;N<a.length;N++){var C=S[i[N]];C?(E===0&&(E=La()),$[N]=C(a[N])):$[N]=a[N]}return i=Ke,a=t.apply(null,$),c=c&&c.async,Fn+=1,Ke!=i?Gu().then(m):(a=m(a),c?Promise.resolve(a):a)},Sa=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0;function Ea(t,n,i,a){t||(t=this),this.parent=t,this.Ff=t.Ff,this.Lf=null,this.id=Pu++,this.name=n,this.mode=i,this.wf={},this.xf={},this.Qf=a}Object.defineProperties(Ea.prototype,{read:{get:function(){return(this.mode&365)===365},set:function(t){t?this.mode|=365:this.mode&=-366}},write:{get:function(){return(this.mode&146)===146},set:function(t){t?this.mode|=146:this.mode&=-147}}}),Ts(),at=Array(4096),qs(Y,"/"),ze("/tmp"),ze("/home"),ze("/home/web_user"),function(){ze("/dev"),qr(259,{read:()=>0,write:(a,c,m,S)=>S}),Dn("/dev/null",259),fs(1280,Qu),fs(1536,Uu),Dn("/dev/tty",1280),Dn("/dev/tty1",1536);var t=new Uint8Array(1024),n=0,i=()=>(n===0&&(n=ls(t).byteLength),t[--n]);Xt("random",i),Xt("urandom",i),ze("/dev/shm"),ze("/dev/shm/tmp")}(),function(){ze("/proc");var t=ze("/proc/self");ze("/proc/self/fd"),qs({Ff(){var n=ms(t,"fd",16895,73);return n.wf={Of(i,a){var c=$e(+a);return i={parent:null,Ff:{jg:"fake"},wf:{Rf:()=>c.path}},i.parent=i}},n}},"/proc/self/fd")}(),function(){const t=new Map;e.setAuthorizer=function(n,i,a){return i?t.set(n,{f:i,dg:a}):t.delete(n),Ve("set_authorizer","number",["number"],[n])},Cs=function(n,i,a,c,m,S){if(t.has(n)){const{f:$,dg:E}=t.get(n);return $(E,i,a?a?Z(b,a):"":null,c?c?Z(b,c):"":null,m?m?Z(b,m):"":null,S?S?Z(b,S):"":null)}return 0}}(),function(){const t=new Map,n=new Map;e.createFunction=function(i,a,c,m,S,$){const E=t.size;return t.set(E,{f:$,If:S}),Ve("create_function","number","number string number number number number".split(" "),[i,a,c,m,E,0])},e.createAggregate=function(i,a,c,m,S,$,E){const N=t.size;return t.set(N,{step:$,sg:E,If:S}),Ve("create_function","number","number string number number number number".split(" "),[i,a,c,m,N,1])},e.getFunctionUserData=function(i){return n.get(i)},Is=function(i,a,c,m){i=t.get(i),n.set(a,i.If),i.f(a,new Uint32Array(b.buffer,m,c)),n.delete(a)},Os=function(i,a,c,m){i=t.get(i),n.set(a,i.If),i.step(a,new Uint32Array(b.buffer,m,c)),n.delete(a)},Ds=function(i,a){i=t.get(i),n.set(a,i.If),i.sg(a),n.delete(a)}}(),function(){const t=new Map;e.progressHandler=function(n,i,a,c){return a?t.set(n,{f:a,dg:c}):t.delete(n),Ve("progress_handler",null,["number","number"],[n,i])},Ms=function(n){if(t.has(n)){const{f:i,dg:a}=t.get(n);return i(a)}return 0}}(),function(){function t(E,N){const C=`get${E}`,L=`set${E}`;return new Proxy(new DataView(b.buffer,N,E==="Int32"?4:8),{get(R,J){if(J===C)return function(re,qe){if(!qe)throw Error("must be little endian");return R[J](re,qe)};if(J===L)return function(re,qe,_e){if(!_e)throw Error("must be little endian");return R[J](re,qe,_e)};if(typeof J=="string"&&J.match(/^(get)|(set)/))throw Error("invalid type");return R[J]}})}const n=typeof va=="object",i=new Map,a=new Map,c=new Map,m=n?new Set:null,S=n?new Set:null,$=new Map;Zs=function(E,N,C,L){$.set(E?Z(b,E):"",{size:N,Pf:Array.from(new Uint32Array(b.buffer,L,C))})},e.createModule=function(E,N,C,L){n&&(C.handleAsync=$r);const R=i.size;return i.set(R,{module:C,If:L}),L=0,C.xCreate&&(L|=1),C.xConnect&&(L|=2),C.xBestIndex&&(L|=4),C.xDisconnect&&(L|=8),C.xDestroy&&(L|=16),C.xOpen&&(L|=32),C.xClose&&(L|=64),C.xFilter&&(L|=128),C.xNext&&(L|=256),C.xEof&&(L|=512),C.xColumn&&(L|=1024),C.xRowid&&(L|=2048),C.xUpdate&&(L|=4096),C.xBegin&&(L|=8192),C.xSync&&(L|=16384),C.xCommit&&(L|=32768),C.xRollback&&(L|=65536),C.xFindFunction&&(L|=131072),C.xRename&&(L|=262144),Ve("create_module","number",["number","string","number","number"],[E,N,R,L])},js=function(E,N,C,L,R,J){if(N=i.get(N),a.set(R,N),n){m.delete(R);for(const re of m)a.delete(re)}return L=Array.from(new Uint32Array(b.buffer,L,C)).map(re=>re?Z(b,re):""),N.module.xCreate(E,N.If,L,R,t("Int32",J))},Bs=function(E,N,C,L,R,J){if(N=i.get(N),a.set(R,N),n){m.delete(R);for(const re of m)a.delete(re)}return L=Array.from(new Uint32Array(b.buffer,L,C)).map(re=>re?Z(b,re):""),N.module.xConnect(E,N.If,L,R,t("Int32",J))},Qs=function(E,N){var C=a.get(E),L=$.get("sqlite3_index_info").Pf;const R={};R.nConstraint=be(N+L[0],"i32"),R.aConstraint=[];for(var J=be(N+L[1],"*"),re=$.get("sqlite3_index_constraint").size,qe=0;qe<R.nConstraint;++qe){var _e=R.aConstraint,Ie=_e.push,Se=J+qe*re,Qt=$.get("sqlite3_index_constraint").Pf,lt={};lt.iColumn=be(Se+Qt[0],"i32"),lt.op=be(Se+Qt[1],"i8"),lt.usable=!!be(Se+Qt[2],"i8"),Ie.call(_e,lt)}for(R.nOrderBy=be(N+L[2],"i32"),R.aOrderBy=[],J=be(N+L[3],"*"),re=$.get("sqlite3_index_orderby").size,qe=0;qe<R.nOrderBy;++qe)_e=R.aOrderBy,Ie=_e.push,Se=J+qe*re,Qt=$.get("sqlite3_index_orderby").Pf,lt={},lt.iColumn=be(Se+Qt[0],"i32"),lt.desc=!!be(Se+Qt[1],"i8"),Ie.call(_e,lt);for(R.aConstraintUsage=[],J=0;J<R.nConstraint;++J)R.aConstraintUsage.push({argvIndex:0,omit:!1});for(R.idxNum=be(N+L[5],"i32"),R.idxStr=null,R.orderByConsumed=!!be(N+L[8],"i8"),R.estimatedCost=be(N+L[9],"double"),R.estimatedRows=be(N+L[10],"i32"),R.idxFlags=be(N+L[11],"i32"),R.colUsed=be(N+L[12],"i32"),E=C.module.xBestIndex(E,R),C=$.get("sqlite3_index_info").Pf,L=be(N+C[4],"*"),J=$.get("sqlite3_index_constraint_usage").size,Ie=0;Ie<R.nConstraint;++Ie)re=L+Ie*J,_e=R.aConstraintUsage[Ie],Se=$.get("sqlite3_index_constraint_usage").Pf,je(re+Se[0],_e.argvIndex,"i32"),je(re+Se[1],_e.omit?1:0,"i8");return je(N+C[5],R.idxNum,"i32"),typeof R.idxStr=="string"&&(L=vt(R.idxStr),J=Ve("sqlite3_malloc","number",["number"],[L+1]),xt(R.idxStr,b,J,L+1),je(N+C[6],J,"*"),je(N+C[7],1,"i32")),je(N+C[8],R.orderByConsumed,"i32"),je(N+C[9],R.estimatedCost,"double"),je(N+C[10],R.estimatedRows,"i32"),je(N+C[11],R.idxFlags,"i32"),E},Ks=function(E){const N=a.get(E);return n?m.add(E):a.delete(E),N.module.xDisconnect(E)},zs=function(E){const N=a.get(E);return n?m.add(E):a.delete(E),N.module.xDestroy(E)},Gs=function(E,N){const C=a.get(E);if(c.set(N,C),n){S.delete(N);for(const L of S)c.delete(L)}return C.module.xOpen(E,N)},Us=function(E){const N=c.get(E);return n?S.add(E):c.delete(E),N.module.xClose(E)},Vs=function(E){return c.get(E).module.xEof(E)?1:0},Hs=function(E,N,C,L,R){const J=c.get(E);return C=C?C?Z(b,C):"":null,R=new Uint32Array(b.buffer,R,L),J.module.xFilter(E,N,C,R)},Ws=function(E){return c.get(E).module.xNext(E)},Fs=function(E,N,C){return c.get(E).module.xColumn(E,N,C)},Xs=function(E,N){return c.get(E).module.xRowid(E,t("BigInt64",N))},ta=function(E,N,C,L){const R=a.get(E);return C=new Uint32Array(b.buffer,C,N),R.module.xUpdate(E,C,t("BigInt64",L))},Rs=function(E){return a.get(E).module.xBegin(E)},ea=function(E){return a.get(E).module.xSync(E)},Ps=function(E){return a.get(E).module.xCommit(E)},Js=function(E){return a.get(E).module.xRollback(E)},Ys=function(E,N){const C=a.get(E);return N=N?Z(b,N):"",C.module.xRename(E,N)}}(),function(){function t(m,S){const $=`get${m}`,E=`set${m}`;return new Proxy(new DataView(b.buffer,S,m==="Int32"?4:8),{get(N,C){if(C===$)return function(L,R){if(!R)throw Error("must be little endian");return N[C](L,R)};if(C===E)return function(L,R,J){if(!J)throw Error("must be little endian");return N[C](L,R,J)};if(typeof C=="string"&&C.match(/^(get)|(set)/))throw Error("invalid type");return N[C]}})}const n=typeof va=="object";n&&(e.handleAsync=$r);const i=new Map,a=new Map;e.registerVFS=function(m,S){if(Ve("sqlite3_vfs_find","number",["string"],[m.name]))throw Error(`VFS '${m.name}' already registered`);n&&(m.handleAsync=$r);var $=m.Lg??64;const E=e._malloc(4);return S=Ve("register_vfs","number",["string","number","number","number"],[m.name,$,S?1:0,E]),S||($=be(E,"*"),i.set($,m)),e._free(E),S};const c=n?new Set:null;ia=function(m){const S=a.get(m);return n?c.add(m):a.delete(m),S.xClose(m)},fa=function(m,S,$,E,N){return a.get(m).xRead(m,b.subarray(S,S+$),4294967296*N+E+(0>E?2**32:0))},ma=function(m,S,$,E,N){return a.get(m).xWrite(m,b.subarray(S,S+$),4294967296*N+E+(0>E?2**32:0))},_a=function(m,S,$){return a.get(m).xTruncate(m,4294967296*$+S+(0>S?2**32:0))},ha=function(m,S){return a.get(m).xSync(m,S)},la=function(m,S){const $=a.get(m);return S=t("BigInt64",S),$.xFileSize(m,S)},ca=function(m,S){return a.get(m).xLock(m,S)},pa=function(m,S){return a.get(m).xUnlock(m,S)},ra=function(m,S){const $=a.get(m);return S=t("Int32",S),$.xCheckReservedLock(m,S)},oa=function(m,S,$){const E=a.get(m);return $=new DataView(b.buffer,$),E.xFileControl(m,S,$)},da=function(m){return a.get(m).xSectorSize(m)},aa=function(m){return a.get(m).xDeviceCharacteristics(m)},ua=function(m,S,$,E,N){if(m=i.get(m),a.set($,m),n){c.delete($);for(var C of c)a.delete(C)}if(C=null,E&64){C=1;const L=[];for(;C;){const R=b[S++];if(R)L.push(R);else switch(b[S]||(C=null),C){case 1:L.push(63),C=2;break;case 2:L.push(61),C=3;break;case 3:L.push(38),C=2}}C=new TextDecoder().decode(new Uint8Array(L))}else S&&(C=S?Z(b,S):"");return N=t("Int32",N),m.xOpen(C,$,E,N)},sa=function(m,S,$){return i.get(m).xDelete(S?Z(b,S):"",$)},na=function(m,S,$,E){return m=i.get(m),E=t("Int32",E),m.xAccess(S?Z(b,S):"",$,E)}}();var Ju={a:(t,n,i,a)=>{ye(`Assertion failed: ${t?Z(b,t):""}, at: `+[n?n?Z(b,n):"":"unknown filename",i,a?a?Z(b,a):"":"unknown function"])},N:function(t,n){try{return t=t?Z(b,t):"",Es(t,n),0}catch(i){if(typeof ie>"u"||i.name!=="ErrnoError")throw i;return-i.zf}},Q:function(t,n,i){try{if(n=n?Z(b,n):"",n=Et(t,n),i&-8)return-28;var a=De(n,{Jf:!0}).node;return a?(t="",i&4&&(t+="r"),i&2&&(t+="w"),i&1&&(t+="x"),t&&Ot(a,t)?-2:0):-44}catch(c){if(typeof ie>"u"||c.name!=="ErrnoError")throw c;return-c.zf}},O:function(t,n){try{var i=$e(t);return Es(i.node,n),0}catch(a){if(typeof ie>"u"||a.name!=="ErrnoError")throw a;return-a.zf}},M:function(t){try{var n=$e(t).node,i=typeof n=="string"?De(n,{Jf:!0}).node:n;if(!i.wf.Bf)throw new I(63);return i.wf.Bf(i,{timestamp:Date.now()}),0}catch(a){if(typeof ie>"u"||a.name!=="ErrnoError")throw a;return-a.zf}},b:function(t,n,i){Qn=i;try{var a=$e(t);switch(n){case 0:var c=Un();if(0>c)return-28;for(;Jt[c];)c++;return bs(a,c).Hf;case 1:case 2:return 0;case 3:return a.flags;case 4:return c=Un(),a.flags|=c,0;case 5:return c=Un(),P[c+0>>1]=2,0;case 6:case 7:return 0;case 16:case 8:return-28;case 9:return Q[Aa()>>2]=28,-1;default:return-28}}catch(m){if(typeof ie>"u"||m.name!=="ErrnoError")throw m;return-m.zf}},L:function(t,n){try{var i=$e(t);return Rn(In,i.path,n)}catch(a){if(typeof ie>"u"||a.name!=="ErrnoError")throw a;return-a.zf}},n:function(t,n,i){n=en(n,i);try{if(isNaN(n))return 61;var a=$e(t);if(!(a.flags&2097155))throw new I(28);return As(a.node,n),0}catch(c){if(typeof ie>"u"||c.name!=="ErrnoError")throw c;return-c.zf}},F:function(t,n){try{if(n===0)return-28;var i=vt("/")+1;return n<i?-68:(xt("/",b,t,n),i)}catch(a){if(typeof ie>"u"||a.name!=="ErrnoError")throw a;return-a.zf}},J:function(t,n){try{return t=t?Z(b,t):"",Rn(Ss,t,n)}catch(i){if(typeof ie>"u"||i.name!=="ErrnoError")throw i;return-i.zf}},C:function(t,n,i){try{return n=n?Z(b,n):"",n=Et(t,n),n=st(n),n[n.length-1]==="/"&&(n=n.substr(0,n.length-1)),ze(n,i),0}catch(a){if(typeof ie>"u"||a.name!=="ErrnoError")throw a;return-a.zf}},I:function(t,n,i,a){try{n=n?Z(b,n):"";var c=a&256;return n=Et(t,n,a&4096),Rn(c?Ss:In,n,i)}catch(m){if(typeof ie>"u"||m.name!=="ErrnoError")throw m;return-m.zf}},B:function(t,n,i,a){Qn=a;try{n=n?Z(b,n):"",n=Et(t,n);var c=a?Un():0;return Mn(n,i,c).Hf}catch(m){if(typeof ie>"u"||m.name!=="ErrnoError")throw m;return-m.zf}},z:function(t,n,i,a){try{if(n=n?Z(b,n):"",n=Et(t,n),0>=a)return-28;var c=xs(n),m=Math.min(a,vt(c)),S=v[i+m];return xt(c,b,i,a+1),v[i+m]=S,m}catch($){if(typeof ie>"u"||$.name!=="ErrnoError")throw $;return-$.zf}},y:function(t){try{return t=t?Z(b,t):"",vs(t),0}catch(n){if(typeof ie>"u"||n.name!=="ErrnoError")throw n;return-n.zf}},K:function(t,n){try{return t=t?Z(b,t):"",Rn(In,t,n)}catch(i){if(typeof ie>"u"||i.name!=="ErrnoError")throw i;return-i.zf}},u:function(t,n,i){try{if(n=n?Z(b,n):"",n=Et(t,n),i===0){t=n;var a=De(t,{parent:!0}).node;if(!a)throw new I(44);var c=kn(t),m=St(a,c),S=ys(a,c,!1);if(S)throw new I(S);if(!a.wf.Yf)throw new I(63);if(m.Lf)throw new I(10);a.wf.Yf(a,c),ps(m)}else i===512?vs(n):ye("Invalid flags passed to unlinkat");return 0}catch($){if(typeof ie>"u"||$.name!=="ErrnoError")throw $;return-$.zf}},t:function(t,n,i){try{if(n=n?Z(b,n):"",n=Et(t,n,!0),i){var a=D[i>>2]+4294967296*Q[i+4>>2],c=Q[i+8>>2];m=1e3*a+c/1e6,i+=16,a=D[i>>2]+4294967296*Q[i+4>>2],c=Q[i+8>>2],S=1e3*a+c/1e6}else var m=Date.now(),S=m;t=m;var $=De(n,{Jf:!0}).node;return $.wf.Bf($,{timestamp:Math.max(t,S)}),0}catch(E){if(typeof ie>"u"||E.name!=="ErrnoError")throw E;return-E.zf}},l:function(t,n,i){t=new Date(1e3*en(t,n)),Q[i>>2]=t.getSeconds(),Q[i+4>>2]=t.getMinutes(),Q[i+8>>2]=t.getHours(),Q[i+12>>2]=t.getDate(),Q[i+16>>2]=t.getMonth(),Q[i+20>>2]=t.getFullYear()-1900,Q[i+24>>2]=t.getDay(),n=t.getFullYear(),Q[i+28>>2]=(n%4!==0||n%100===0&&n%400!==0?Ku:zu)[t.getMonth()]+t.getDate()-1|0,Q[i+36>>2]=-(60*t.getTimezoneOffset()),n=new Date(t.getFullYear(),6,1).getTimezoneOffset();var a=new Date(t.getFullYear(),0,1).getTimezoneOffset();Q[i+32>>2]=(n!=a&&t.getTimezoneOffset()==Math.min(a,n))|0},i:function(t,n,i,a,c,m,S,$){c=en(c,m);try{if(isNaN(c))return 61;var E=$e(a);if(n&2&&!(i&2)&&(E.flags&2097155)!==2)throw new I(2);if((E.flags&2097155)===1)throw new I(2);if(!E.xf.Uf)throw new I(43);var N=E.xf.Uf(E,t,c,n,i),C=N.yg;return Q[S>>2]=N.mg,D[$>>2]=C,0}catch(L){if(typeof ie>"u"||L.name!=="ErrnoError")throw L;return-L.zf}},j:function(t,n,i,a,c,m,S){m=en(m,S);try{if(isNaN(m))return 61;var $=$e(c);if(i&2){if(($.node.mode&61440)!==32768)throw new I(43);a&2||$.xf.Vf&&$.xf.Vf($,b.slice(t,t+n),m,n,a)}}catch(E){if(typeof ie>"u"||E.name!=="ErrnoError")throw E;return-E.zf}},w:(t,n,i)=>{function a(E){return(E=E.toTimeString().match(/\(([A-Za-z ]+)\)$/))?E[1]:"GMT"}var c=new Date().getFullYear(),m=new Date(c,0,1),S=new Date(c,6,1);c=m.getTimezoneOffset();var $=S.getTimezoneOffset();D[t>>2]=60*Math.max(c,$),Q[n>>2]=+(c!=$),t=a(m),n=a(S),t=ks(t),n=ks(n),$<c?(D[i>>2]=t,D[i+4>>2]=n):(D[i>>2]=n,D[i+4>>2]=t)},e:()=>Date.now(),d:()=>performance.now(),r:t=>{var n=b.length;if(t>>>=0,2147483648<t)return!1;for(var i=1;4>=i;i*=2){var a=n*(1+.2/i);a=Math.min(a,t+100663296);var c=Math;a=Math.max(t,a);e:{c=(c.min.call(c,2147483648,a+(65536-a%65536)%65536)-h.buffer.byteLength+65535)/65536;try{h.grow(c),le();var m=1;break e}catch{}m=void 0}if(m)return!0}return!1},D:(t,n)=>{var i=0;return Ls().forEach((a,c)=>{var m=n+i;for(c=D[t+4*c>>2]=m,m=0;m<a.length;++m)v[c++>>0]=a.charCodeAt(m);v[c>>0]=0,i+=a.length+1}),0},E:(t,n)=>{var i=Ls();D[t>>2]=i.length;var a=0;return i.forEach(c=>a+=c.length+1),D[n>>2]=a,0},f:function(t){try{var n=$e(t);if(n.Hf===null)throw new I(8);n.$f&&(n.$f=null);try{n.xf.close&&n.xf.close(n)}catch(i){throw i}finally{Jt[n.Hf]=null}return n.Hf=null,0}catch(i){if(typeof ie>"u"||i.name!=="ErrnoError")throw i;return i.zf}},s:function(t,n){try{var i=$e(t);return v[n>>0]=i.Df?2:Qe(i.mode)?3:(i.mode&61440)===40960?7:4,P[n+2>>1]=0,ce=[0,(K=0,1<=+Math.abs(K)?0<K?+Math.floor(K/4294967296)>>>0:~~+Math.ceil((K-+(~~K>>>0))/4294967296)>>>0:0)],Q[n+8>>2]=ce[0],Q[n+12>>2]=ce[1],ce=[0,(K=0,1<=+Math.abs(K)?0<K?+Math.floor(K/4294967296)>>>0:~~+Math.ceil((K-+(~~K>>>0))/4294967296)>>>0:0)],Q[n+16>>2]=ce[0],Q[n+20>>2]=ce[1],0}catch(a){if(typeof ie>"u"||a.name!=="ErrnoError")throw a;return a.zf}},A:function(t,n,i,a){try{e:{var c=$e(t);t=n;for(var m,S=n=0;S<i;S++){var $=D[t>>2],E=D[t+4>>2];t+=8;var N=c,C=$,L=E,R=m,J=v;if(0>L||0>R)throw new I(28);if(N.Hf===null)throw new I(8);if((N.flags&2097155)===1)throw new I(8);if(Qe(N.node.mode))throw new I(31);if(!N.xf.read)throw new I(28);var re=typeof R<"u";if(!re)R=N.position;else if(!N.seekable)throw new I(70);var qe=N.xf.read(N,J,C,L,R);re||(N.position+=qe);var _e=qe;if(0>_e){var Ie=-1;break e}if(n+=_e,_e<E)break;typeof m<"u"&&(m+=_e)}Ie=n}return D[a>>2]=Ie,0}catch(Se){if(typeof ie>"u"||Se.name!=="ErrnoError")throw Se;return Se.zf}},m:function(t,n,i,a,c){n=en(n,i);try{if(isNaN(n))return 61;var m=$e(t);return Ns(m,n,a),ce=[m.position>>>0,(K=m.position,1<=+Math.abs(K)?0<K?+Math.floor(K/4294967296)>>>0:~~+Math.ceil((K-+(~~K>>>0))/4294967296)>>>0:0)],Q[c>>2]=ce[0],Q[c+4>>2]=ce[1],m.$f&&n===0&&a===0&&(m.$f=null),0}catch(S){if(typeof ie>"u"||S.name!=="ErrnoError")throw S;return S.zf}},H:function(t){try{var n=$e(t);return qa(i=>{var a=n.node.Ff;a.type.Ag?a.type.Ag(a,!1,c=>{i(c?29:0)}):i(0)})}catch(i){if(typeof ie>"u"||i.name!=="ErrnoError")throw i;return i.zf}},x:function(t,n,i,a){try{e:{var c=$e(t);t=n;for(var m,S=n=0;S<i;S++){var $=D[t>>2],E=D[t+4>>2];t+=8;var N=c,C=$,L=E,R=m,J=v;if(0>L||0>R)throw new I(28);if(N.Hf===null)throw new I(8);if(!(N.flags&2097155))throw new I(8);if(Qe(N.node.mode))throw new I(31);if(!N.xf.write)throw new I(28);N.seekable&&N.flags&1024&&Ns(N,0,2);var re=typeof R<"u";if(!re)R=N.position;else if(!N.seekable)throw new I(70);var qe=N.xf.write(N,J,C,L,R,void 0);re||(N.position+=qe);var _e=qe;if(0>_e){var Ie=-1;break e}n+=_e,typeof m<"u"&&(m+=_e)}Ie=n}return D[a>>2]=Ie,0}catch(Se){if(typeof ie>"u"||Se.name!=="ErrnoError")throw Se;return Se.zf}},ra:Cs,P:Ds,ga:Is,ca:Ms,Y:Os,la:Rs,G:Qs,h:Us,oa:Fs,ja:Ps,ea:Bs,fa:js,k:zs,v:Ks,pa:Vs,g:Hs,qa:Ws,da:Gs,ha:Ys,ia:Js,na:Xs,c:Zs,ka:ea,ma:ta,aa:na,V:ra,$:ia,ba:sa,S:aa,U:oa,Z:la,X:ca,R:ua,q:fa,T:da,_:ha,o:_a,W:pa,p:ma},f=function(){function t(i){return f=i.exports,f=Vu(),h=f.sa,le(),At=f.mf,Me.unshift(f.ta),X--,e.monitorRunDependencies&&e.monitorRunDependencies(X),X==0&&he&&(i=he,he=null,i()),f}var n={a:Ju};if(X++,e.monitorRunDependencies&&e.monitorRunDependencies(X),e.instantiateWasm)try{return e.instantiateWasm(n,t)}catch(i){B(`Module.instantiateWasm callback failed with error: ${i}`),l(i)}return Iu(n,function(i){t(i.instance)}).catch(l),{}}();e._sqlite3_status64=(t,n,i,a)=>(e._sqlite3_status64=f.ua)(t,n,i,a),e._sqlite3_status=(t,n,i,a)=>(e._sqlite3_status=f.va)(t,n,i,a),e._sqlite3_db_status=(t,n,i,a,c)=>(e._sqlite3_db_status=f.wa)(t,n,i,a,c),e._sqlite3_msize=t=>(e._sqlite3_msize=f.xa)(t),e._sqlite3_vfs_find=t=>(e._sqlite3_vfs_find=f.ya)(t),e._sqlite3_vfs_register=(t,n)=>(e._sqlite3_vfs_register=f.za)(t,n),e._sqlite3_vfs_unregister=t=>(e._sqlite3_vfs_unregister=f.Aa)(t),e._sqlite3_release_memory=t=>(e._sqlite3_release_memory=f.Ba)(t),e._sqlite3_soft_heap_limit64=(t,n)=>(e._sqlite3_soft_heap_limit64=f.Ca)(t,n),e._sqlite3_memory_used=()=>(e._sqlite3_memory_used=f.Da)(),e._sqlite3_hard_heap_limit64=(t,n)=>(e._sqlite3_hard_heap_limit64=f.Ea)(t,n),e._sqlite3_memory_highwater=t=>(e._sqlite3_memory_highwater=f.Fa)(t),e._sqlite3_malloc=t=>(e._sqlite3_malloc=f.Ga)(t),e._sqlite3_malloc64=(t,n)=>(e._sqlite3_malloc64=f.Ha)(t,n),e._sqlite3_free=t=>(e._sqlite3_free=f.Ia)(t),e._sqlite3_realloc=(t,n)=>(e._sqlite3_realloc=f.Ja)(t,n),e._sqlite3_realloc64=(t,n,i)=>(e._sqlite3_realloc64=f.Ka)(t,n,i),e._sqlite3_str_vappendf=(t,n,i)=>(e._sqlite3_str_vappendf=f.La)(t,n,i),e._sqlite3_str_append=(t,n,i)=>(e._sqlite3_str_append=f.Ma)(t,n,i),e._sqlite3_str_appendchar=(t,n,i)=>(e._sqlite3_str_appendchar=f.Na)(t,n,i),e._sqlite3_str_appendall=(t,n)=>(e._sqlite3_str_appendall=f.Oa)(t,n),e._sqlite3_str_appendf=(t,n,i)=>(e._sqlite3_str_appendf=f.Pa)(t,n,i),e._sqlite3_str_finish=t=>(e._sqlite3_str_finish=f.Qa)(t),e._sqlite3_str_errcode=t=>(e._sqlite3_str_errcode=f.Ra)(t),e._sqlite3_str_length=t=>(e._sqlite3_str_length=f.Sa)(t),e._sqlite3_str_value=t=>(e._sqlite3_str_value=f.Ta)(t),e._sqlite3_str_reset=t=>(e._sqlite3_str_reset=f.Ua)(t),e._sqlite3_str_new=t=>(e._sqlite3_str_new=f.Va)(t),e._sqlite3_vmprintf=(t,n)=>(e._sqlite3_vmprintf=f.Wa)(t,n),e._sqlite3_mprintf=(t,n)=>(e._sqlite3_mprintf=f.Xa)(t,n),e._sqlite3_vsnprintf=(t,n,i,a)=>(e._sqlite3_vsnprintf=f.Ya)(t,n,i,a),e._sqlite3_snprintf=(t,n,i,a)=>(e._sqlite3_snprintf=f.Za)(t,n,i,a),e._sqlite3_log=(t,n,i)=>(e._sqlite3_log=f._a)(t,n,i),e._sqlite3_randomness=(t,n)=>(e._sqlite3_randomness=f.$a)(t,n),e._sqlite3_stricmp=(t,n)=>(e._sqlite3_stricmp=f.ab)(t,n),e._sqlite3_strnicmp=(t,n,i)=>(e._sqlite3_strnicmp=f.bb)(t,n,i),e._sqlite3_os_init=()=>(e._sqlite3_os_init=f.cb)(),e._sqlite3_os_end=()=>(e._sqlite3_os_end=f.db)(),e._sqlite3_serialize=(t,n,i,a)=>(e._sqlite3_serialize=f.eb)(t,n,i,a),e._sqlite3_prepare_v2=(t,n,i,a,c)=>(e._sqlite3_prepare_v2=f.fb)(t,n,i,a,c),e._sqlite3_step=t=>(e._sqlite3_step=f.gb)(t),e._sqlite3_column_int64=(t,n)=>(e._sqlite3_column_int64=f.hb)(t,n),e._sqlite3_column_int=(t,n)=>(e._sqlite3_column_int=f.ib)(t,n),e._sqlite3_finalize=t=>(e._sqlite3_finalize=f.jb)(t),e._sqlite3_deserialize=(t,n,i,a,c,m,S,$)=>(e._sqlite3_deserialize=f.kb)(t,n,i,a,c,m,S,$),e._sqlite3_database_file_object=t=>(e._sqlite3_database_file_object=f.lb)(t),e._sqlite3_backup_init=(t,n,i,a)=>(e._sqlite3_backup_init=f.mb)(t,n,i,a),e._sqlite3_backup_step=(t,n)=>(e._sqlite3_backup_step=f.nb)(t,n),e._sqlite3_backup_finish=t=>(e._sqlite3_backup_finish=f.ob)(t),e._sqlite3_backup_remaining=t=>(e._sqlite3_backup_remaining=f.pb)(t),e._sqlite3_backup_pagecount=t=>(e._sqlite3_backup_pagecount=f.qb)(t),e._sqlite3_reset=t=>(e._sqlite3_reset=f.rb)(t),e._sqlite3_clear_bindings=t=>(e._sqlite3_clear_bindings=f.sb)(t),e._sqlite3_value_blob=t=>(e._sqlite3_value_blob=f.tb)(t),e._sqlite3_value_text=t=>(e._sqlite3_value_text=f.ub)(t),e._sqlite3_value_bytes=t=>(e._sqlite3_value_bytes=f.vb)(t),e._sqlite3_value_bytes16=t=>(e._sqlite3_value_bytes16=f.wb)(t),e._sqlite3_value_double=t=>(e._sqlite3_value_double=f.xb)(t),e._sqlite3_value_int=t=>(e._sqlite3_value_int=f.yb)(t),e._sqlite3_value_int64=t=>(e._sqlite3_value_int64=f.zb)(t),e._sqlite3_value_subtype=t=>(e._sqlite3_value_subtype=f.Ab)(t),e._sqlite3_value_pointer=(t,n)=>(e._sqlite3_value_pointer=f.Bb)(t,n),e._sqlite3_value_text16=t=>(e._sqlite3_value_text16=f.Cb)(t),e._sqlite3_value_text16be=t=>(e._sqlite3_value_text16be=f.Db)(t),e._sqlite3_value_text16le=t=>(e._sqlite3_value_text16le=f.Eb)(t),e._sqlite3_value_type=t=>(e._sqlite3_value_type=f.Fb)(t),e._sqlite3_value_encoding=t=>(e._sqlite3_value_encoding=f.Gb)(t),e._sqlite3_value_nochange=t=>(e._sqlite3_value_nochange=f.Hb)(t),e._sqlite3_value_frombind=t=>(e._sqlite3_value_frombind=f.Ib)(t),e._sqlite3_value_dup=t=>(e._sqlite3_value_dup=f.Jb)(t),e._sqlite3_value_free=t=>(e._sqlite3_value_free=f.Kb)(t),e._sqlite3_result_blob=(t,n,i,a)=>(e._sqlite3_result_blob=f.Lb)(t,n,i,a),e._sqlite3_result_blob64=(t,n,i,a,c)=>(e._sqlite3_result_blob64=f.Mb)(t,n,i,a,c),e._sqlite3_result_double=(t,n)=>(e._sqlite3_result_double=f.Nb)(t,n),e._sqlite3_result_error=(t,n,i)=>(e._sqlite3_result_error=f.Ob)(t,n,i),e._sqlite3_result_error16=(t,n,i)=>(e._sqlite3_result_error16=f.Pb)(t,n,i),e._sqlite3_result_int=(t,n)=>(e._sqlite3_result_int=f.Qb)(t,n),e._sqlite3_result_int64=(t,n,i)=>(e._sqlite3_result_int64=f.Rb)(t,n,i),e._sqlite3_result_null=t=>(e._sqlite3_result_null=f.Sb)(t),e._sqlite3_result_pointer=(t,n,i,a)=>(e._sqlite3_result_pointer=f.Tb)(t,n,i,a),e._sqlite3_result_subtype=(t,n)=>(e._sqlite3_result_subtype=f.Ub)(t,n),e._sqlite3_result_text=(t,n,i,a)=>(e._sqlite3_result_text=f.Vb)(t,n,i,a),e._sqlite3_result_text64=(t,n,i,a,c,m)=>(e._sqlite3_result_text64=f.Wb)(t,n,i,a,c,m),e._sqlite3_result_text16=(t,n,i,a)=>(e._sqlite3_result_text16=f.Xb)(t,n,i,a),e._sqlite3_result_text16be=(t,n,i,a)=>(e._sqlite3_result_text16be=f.Yb)(t,n,i,a),e._sqlite3_result_text16le=(t,n,i,a)=>(e._sqlite3_result_text16le=f.Zb)(t,n,i,a),e._sqlite3_result_value=(t,n)=>(e._sqlite3_result_value=f._b)(t,n),e._sqlite3_result_error_toobig=t=>(e._sqlite3_result_error_toobig=f.$b)(t),e._sqlite3_result_zeroblob=(t,n)=>(e._sqlite3_result_zeroblob=f.ac)(t,n),e._sqlite3_result_zeroblob64=(t,n,i)=>(e._sqlite3_result_zeroblob64=f.bc)(t,n,i),e._sqlite3_result_error_code=(t,n)=>(e._sqlite3_result_error_code=f.cc)(t,n),e._sqlite3_result_error_nomem=t=>(e._sqlite3_result_error_nomem=f.dc)(t),e._sqlite3_user_data=t=>(e._sqlite3_user_data=f.ec)(t),e._sqlite3_context_db_handle=t=>(e._sqlite3_context_db_handle=f.fc)(t),e._sqlite3_vtab_nochange=t=>(e._sqlite3_vtab_nochange=f.gc)(t),e._sqlite3_vtab_in_first=(t,n)=>(e._sqlite3_vtab_in_first=f.hc)(t,n),e._sqlite3_vtab_in_next=(t,n)=>(e._sqlite3_vtab_in_next=f.ic)(t,n),e._sqlite3_aggregate_context=(t,n)=>(e._sqlite3_aggregate_context=f.jc)(t,n),e._sqlite3_get_auxdata=(t,n)=>(e._sqlite3_get_auxdata=f.kc)(t,n),e._sqlite3_set_auxdata=(t,n,i,a)=>(e._sqlite3_set_auxdata=f.lc)(t,n,i,a),e._sqlite3_column_count=t=>(e._sqlite3_column_count=f.mc)(t),e._sqlite3_data_count=t=>(e._sqlite3_data_count=f.nc)(t),e._sqlite3_column_blob=(t,n)=>(e._sqlite3_column_blob=f.oc)(t,n),e._sqlite3_column_bytes=(t,n)=>(e._sqlite3_column_bytes=f.pc)(t,n),e._sqlite3_column_bytes16=(t,n)=>(e._sqlite3_column_bytes16=f.qc)(t,n),e._sqlite3_column_double=(t,n)=>(e._sqlite3_column_double=f.rc)(t,n),e._sqlite3_column_text=(t,n)=>(e._sqlite3_column_text=f.sc)(t,n),e._sqlite3_column_value=(t,n)=>(e._sqlite3_column_value=f.tc)(t,n),e._sqlite3_column_text16=(t,n)=>(e._sqlite3_column_text16=f.uc)(t,n),e._sqlite3_column_type=(t,n)=>(e._sqlite3_column_type=f.vc)(t,n),e._sqlite3_column_name=(t,n)=>(e._sqlite3_column_name=f.wc)(t,n),e._sqlite3_column_name16=(t,n)=>(e._sqlite3_column_name16=f.xc)(t,n),e._sqlite3_bind_blob=(t,n,i,a,c)=>(e._sqlite3_bind_blob=f.yc)(t,n,i,a,c),e._sqlite3_bind_blob64=(t,n,i,a,c,m)=>(e._sqlite3_bind_blob64=f.zc)(t,n,i,a,c,m),e._sqlite3_bind_double=(t,n,i)=>(e._sqlite3_bind_double=f.Ac)(t,n,i),e._sqlite3_bind_int=(t,n,i)=>(e._sqlite3_bind_int=f.Bc)(t,n,i),e._sqlite3_bind_int64=(t,n,i,a)=>(e._sqlite3_bind_int64=f.Cc)(t,n,i,a),e._sqlite3_bind_null=(t,n)=>(e._sqlite3_bind_null=f.Dc)(t,n),e._sqlite3_bind_pointer=(t,n,i,a,c)=>(e._sqlite3_bind_pointer=f.Ec)(t,n,i,a,c),e._sqlite3_bind_text=(t,n,i,a,c)=>(e._sqlite3_bind_text=f.Fc)(t,n,i,a,c),e._sqlite3_bind_text64=(t,n,i,a,c,m,S)=>(e._sqlite3_bind_text64=f.Gc)(t,n,i,a,c,m,S),e._sqlite3_bind_text16=(t,n,i,a,c)=>(e._sqlite3_bind_text16=f.Hc)(t,n,i,a,c),e._sqlite3_bind_value=(t,n,i)=>(e._sqlite3_bind_value=f.Ic)(t,n,i),e._sqlite3_bind_zeroblob=(t,n,i)=>(e._sqlite3_bind_zeroblob=f.Jc)(t,n,i),e._sqlite3_bind_zeroblob64=(t,n,i,a)=>(e._sqlite3_bind_zeroblob64=f.Kc)(t,n,i,a),e._sqlite3_bind_parameter_count=t=>(e._sqlite3_bind_parameter_count=f.Lc)(t),e._sqlite3_bind_parameter_name=(t,n)=>(e._sqlite3_bind_parameter_name=f.Mc)(t,n),e._sqlite3_bind_parameter_index=(t,n)=>(e._sqlite3_bind_parameter_index=f.Nc)(t,n),e._sqlite3_db_handle=t=>(e._sqlite3_db_handle=f.Oc)(t),e._sqlite3_stmt_readonly=t=>(e._sqlite3_stmt_readonly=f.Pc)(t),e._sqlite3_stmt_isexplain=t=>(e._sqlite3_stmt_isexplain=f.Qc)(t),e._sqlite3_stmt_explain=(t,n)=>(e._sqlite3_stmt_explain=f.Rc)(t,n),e._sqlite3_stmt_busy=t=>(e._sqlite3_stmt_busy=f.Sc)(t),e._sqlite3_next_stmt=(t,n)=>(e._sqlite3_next_stmt=f.Tc)(t,n),e._sqlite3_stmt_status=(t,n,i)=>(e._sqlite3_stmt_status=f.Uc)(t,n,i),e._sqlite3_sql=t=>(e._sqlite3_sql=f.Vc)(t),e._sqlite3_expanded_sql=t=>(e._sqlite3_expanded_sql=f.Wc)(t),e._sqlite3_value_numeric_type=t=>(e._sqlite3_value_numeric_type=f.Xc)(t),e._sqlite3_blob_open=(t,n,i,a,c,m,S,$)=>(e._sqlite3_blob_open=f.Yc)(t,n,i,a,c,m,S,$),e._sqlite3_blob_close=t=>(e._sqlite3_blob_close=f.Zc)(t),e._sqlite3_blob_read=(t,n,i,a)=>(e._sqlite3_blob_read=f._c)(t,n,i,a),e._sqlite3_blob_write=(t,n,i,a)=>(e._sqlite3_blob_write=f.$c)(t,n,i,a),e._sqlite3_blob_bytes=t=>(e._sqlite3_blob_bytes=f.ad)(t),e._sqlite3_blob_reopen=(t,n,i)=>(e._sqlite3_blob_reopen=f.bd)(t,n,i),e._sqlite3_set_authorizer=(t,n,i)=>(e._sqlite3_set_authorizer=f.cd)(t,n,i),e._sqlite3_strglob=(t,n)=>(e._sqlite3_strglob=f.dd)(t,n),e._sqlite3_strlike=(t,n,i)=>(e._sqlite3_strlike=f.ed)(t,n,i),e._sqlite3_exec=(t,n,i,a,c)=>(e._sqlite3_exec=f.fd)(t,n,i,a,c),e._sqlite3_errmsg=t=>(e._sqlite3_errmsg=f.gd)(t),e._sqlite3_auto_extension=t=>(e._sqlite3_auto_extension=f.hd)(t),e._sqlite3_cancel_auto_extension=t=>(e._sqlite3_cancel_auto_extension=f.id)(t),e._sqlite3_reset_auto_extension=()=>(e._sqlite3_reset_auto_extension=f.jd)(),e._sqlite3_prepare=(t,n,i,a,c)=>(e._sqlite3_prepare=f.kd)(t,n,i,a,c),e._sqlite3_prepare_v3=(t,n,i,a,c,m)=>(e._sqlite3_prepare_v3=f.ld)(t,n,i,a,c,m),e._sqlite3_prepare16=(t,n,i,a,c)=>(e._sqlite3_prepare16=f.md)(t,n,i,a,c),e._sqlite3_prepare16_v2=(t,n,i,a,c)=>(e._sqlite3_prepare16_v2=f.nd)(t,n,i,a,c),e._sqlite3_prepare16_v3=(t,n,i,a,c,m)=>(e._sqlite3_prepare16_v3=f.od)(t,n,i,a,c,m),e._sqlite3_get_table=(t,n,i,a,c,m)=>(e._sqlite3_get_table=f.pd)(t,n,i,a,c,m),e._sqlite3_free_table=t=>(e._sqlite3_free_table=f.qd)(t),e._sqlite3_create_module=(t,n,i,a)=>(e._sqlite3_create_module=f.rd)(t,n,i,a),e._sqlite3_create_module_v2=(t,n,i,a,c)=>(e._sqlite3_create_module_v2=f.sd)(t,n,i,a,c),e._sqlite3_drop_modules=(t,n)=>(e._sqlite3_drop_modules=f.td)(t,n),e._sqlite3_declare_vtab=(t,n)=>(e._sqlite3_declare_vtab=f.ud)(t,n),e._sqlite3_vtab_on_conflict=t=>(e._sqlite3_vtab_on_conflict=f.vd)(t),e._sqlite3_vtab_config=(t,n,i)=>(e._sqlite3_vtab_config=f.wd)(t,n,i),e._sqlite3_vtab_collation=(t,n)=>(e._sqlite3_vtab_collation=f.xd)(t,n),e._sqlite3_vtab_in=(t,n,i)=>(e._sqlite3_vtab_in=f.yd)(t,n,i),e._sqlite3_vtab_rhs_value=(t,n,i)=>(e._sqlite3_vtab_rhs_value=f.zd)(t,n,i),e._sqlite3_vtab_distinct=t=>(e._sqlite3_vtab_distinct=f.Ad)(t),e._sqlite3_keyword_name=(t,n,i)=>(e._sqlite3_keyword_name=f.Bd)(t,n,i),e._sqlite3_keyword_count=()=>(e._sqlite3_keyword_count=f.Cd)(),e._sqlite3_keyword_check=(t,n)=>(e._sqlite3_keyword_check=f.Dd)(t,n),e._sqlite3_complete=t=>(e._sqlite3_complete=f.Ed)(t),e._sqlite3_complete16=t=>(e._sqlite3_complete16=f.Fd)(t),e._sqlite3_libversion=()=>(e._sqlite3_libversion=f.Gd)(),e._sqlite3_libversion_number=()=>(e._sqlite3_libversion_number=f.Hd)(),e._sqlite3_threadsafe=()=>(e._sqlite3_threadsafe=f.Id)(),e._sqlite3_initialize=()=>(e._sqlite3_initialize=f.Jd)(),e._sqlite3_shutdown=()=>(e._sqlite3_shutdown=f.Kd)(),e._sqlite3_config=(t,n)=>(e._sqlite3_config=f.Ld)(t,n),e._sqlite3_db_mutex=t=>(e._sqlite3_db_mutex=f.Md)(t),e._sqlite3_db_release_memory=t=>(e._sqlite3_db_release_memory=f.Nd)(t),e._sqlite3_db_cacheflush=t=>(e._sqlite3_db_cacheflush=f.Od)(t),e._sqlite3_db_config=(t,n,i)=>(e._sqlite3_db_config=f.Pd)(t,n,i),e._sqlite3_last_insert_rowid=t=>(e._sqlite3_last_insert_rowid=f.Qd)(t),e._sqlite3_set_last_insert_rowid=(t,n,i)=>(e._sqlite3_set_last_insert_rowid=f.Rd)(t,n,i),e._sqlite3_changes64=t=>(e._sqlite3_changes64=f.Sd)(t),e._sqlite3_changes=t=>(e._sqlite3_changes=f.Td)(t),e._sqlite3_total_changes64=t=>(e._sqlite3_total_changes64=f.Ud)(t),e._sqlite3_total_changes=t=>(e._sqlite3_total_changes=f.Vd)(t),e._sqlite3_txn_state=(t,n)=>(e._sqlite3_txn_state=f.Wd)(t,n),e._sqlite3_close=t=>(e._sqlite3_close=f.Xd)(t),e._sqlite3_close_v2=t=>(e._sqlite3_close_v2=f.Yd)(t),e._sqlite3_busy_handler=(t,n,i)=>(e._sqlite3_busy_handler=f.Zd)(t,n,i),e._sqlite3_progress_handler=(t,n,i,a)=>(e._sqlite3_progress_handler=f._d)(t,n,i,a),e._sqlite3_busy_timeout=(t,n)=>(e._sqlite3_busy_timeout=f.$d)(t,n),e._sqlite3_interrupt=t=>(e._sqlite3_interrupt=f.ae)(t),e._sqlite3_is_interrupted=t=>(e._sqlite3_is_interrupted=f.be)(t),e._sqlite3_create_function=(t,n,i,a,c,m,S,$)=>(e._sqlite3_create_function=f.ce)(t,n,i,a,c,m,S,$),e._sqlite3_create_function_v2=(t,n,i,a,c,m,S,$,E)=>(e._sqlite3_create_function_v2=f.de)(t,n,i,a,c,m,S,$,E),e._sqlite3_create_window_function=(t,n,i,a,c,m,S,$,E,N)=>(e._sqlite3_create_window_function=f.ee)(t,n,i,a,c,m,S,$,E,N),e._sqlite3_create_function16=(t,n,i,a,c,m,S,$)=>(e._sqlite3_create_function16=f.fe)(t,n,i,a,c,m,S,$),e._sqlite3_overload_function=(t,n,i)=>(e._sqlite3_overload_function=f.ge)(t,n,i),e._sqlite3_trace_v2=(t,n,i,a)=>(e._sqlite3_trace_v2=f.he)(t,n,i,a),e._sqlite3_commit_hook=(t,n,i)=>(e._sqlite3_commit_hook=f.ie)(t,n,i),e._sqlite3_update_hook=(t,n,i)=>(e._sqlite3_update_hook=f.je)(t,n,i),e._sqlite3_rollback_hook=(t,n,i)=>(e._sqlite3_rollback_hook=f.ke)(t,n,i),e._sqlite3_autovacuum_pages=(t,n,i,a)=>(e._sqlite3_autovacuum_pages=f.le)(t,n,i,a),e._sqlite3_wal_autocheckpoint=(t,n)=>(e._sqlite3_wal_autocheckpoint=f.me)(t,n),e._sqlite3_wal_hook=(t,n,i)=>(e._sqlite3_wal_hook=f.ne)(t,n,i),e._sqlite3_wal_checkpoint_v2=(t,n,i,a,c)=>(e._sqlite3_wal_checkpoint_v2=f.oe)(t,n,i,a,c),e._sqlite3_wal_checkpoint=(t,n)=>(e._sqlite3_wal_checkpoint=f.pe)(t,n),e._sqlite3_error_offset=t=>(e._sqlite3_error_offset=f.qe)(t),e._sqlite3_errmsg16=t=>(e._sqlite3_errmsg16=f.re)(t),e._sqlite3_errcode=t=>(e._sqlite3_errcode=f.se)(t),e._sqlite3_extended_errcode=t=>(e._sqlite3_extended_errcode=f.te)(t),e._sqlite3_system_errno=t=>(e._sqlite3_system_errno=f.ue)(t),e._sqlite3_errstr=t=>(e._sqlite3_errstr=f.ve)(t),e._sqlite3_limit=(t,n,i)=>(e._sqlite3_limit=f.we)(t,n,i),e._sqlite3_open=(t,n)=>(e._sqlite3_open=f.xe)(t,n),e._sqlite3_open_v2=(t,n,i,a)=>(e._sqlite3_open_v2=f.ye)(t,n,i,a),e._sqlite3_open16=(t,n)=>(e._sqlite3_open16=f.ze)(t,n),e._sqlite3_create_collation=(t,n,i,a,c)=>(e._sqlite3_create_collation=f.Ae)(t,n,i,a,c),e._sqlite3_create_collation_v2=(t,n,i,a,c,m)=>(e._sqlite3_create_collation_v2=f.Be)(t,n,i,a,c,m),e._sqlite3_create_collation16=(t,n,i,a,c)=>(e._sqlite3_create_collation16=f.Ce)(t,n,i,a,c),e._sqlite3_collation_needed=(t,n,i)=>(e._sqlite3_collation_needed=f.De)(t,n,i),e._sqlite3_collation_needed16=(t,n,i)=>(e._sqlite3_collation_needed16=f.Ee)(t,n,i),e._sqlite3_get_clientdata=(t,n)=>(e._sqlite3_get_clientdata=f.Fe)(t,n),e._sqlite3_set_clientdata=(t,n,i,a)=>(e._sqlite3_set_clientdata=f.Ge)(t,n,i,a),e._sqlite3_get_autocommit=t=>(e._sqlite3_get_autocommit=f.He)(t),e._sqlite3_table_column_metadata=(t,n,i,a,c,m,S,$,E)=>(e._sqlite3_table_column_metadata=f.Ie)(t,n,i,a,c,m,S,$,E),e._sqlite3_sleep=t=>(e._sqlite3_sleep=f.Je)(t),e._sqlite3_extended_result_codes=(t,n)=>(e._sqlite3_extended_result_codes=f.Ke)(t,n),e._sqlite3_file_control=(t,n,i,a)=>(e._sqlite3_file_control=f.Le)(t,n,i,a),e._sqlite3_test_control=(t,n)=>(e._sqlite3_test_control=f.Me)(t,n),e._sqlite3_create_filename=(t,n,i,a,c)=>(e._sqlite3_create_filename=f.Ne)(t,n,i,a,c),e._sqlite3_free_filename=t=>(e._sqlite3_free_filename=f.Oe)(t),e._sqlite3_uri_parameter=(t,n)=>(e._sqlite3_uri_parameter=f.Pe)(t,n),e._sqlite3_uri_key=(t,n)=>(e._sqlite3_uri_key=f.Qe)(t,n),e._sqlite3_uri_boolean=(t,n,i)=>(e._sqlite3_uri_boolean=f.Re)(t,n,i),e._sqlite3_uri_int64=(t,n,i,a)=>(e._sqlite3_uri_int64=f.Se)(t,n,i,a),e._sqlite3_filename_database=t=>(e._sqlite3_filename_database=f.Te)(t),e._sqlite3_filename_journal=t=>(e._sqlite3_filename_journal=f.Ue)(t),e._sqlite3_filename_wal=t=>(e._sqlite3_filename_wal=f.Ve)(t),e._sqlite3_db_name=(t,n)=>(e._sqlite3_db_name=f.We)(t,n),e._sqlite3_db_filename=(t,n)=>(e._sqlite3_db_filename=f.Xe)(t,n),e._sqlite3_db_readonly=(t,n)=>(e._sqlite3_db_readonly=f.Ye)(t,n),e._sqlite3_compileoption_used=t=>(e._sqlite3_compileoption_used=f.Ze)(t),e._sqlite3_compileoption_get=t=>(e._sqlite3_compileoption_get=f._e)(t),e._sqlite3_sourceid=()=>(e._sqlite3_sourceid=f.$e)();var Aa=()=>(Aa=f.af)(),kr=e._malloc=t=>(kr=e._malloc=f.bf)(t),Na=e._free=t=>(Na=e._free=f.cf)(t);e._RegisterExtensionFunctions=t=>(e._RegisterExtensionFunctions=f.df)(t),e._set_authorizer=t=>(e._set_authorizer=f.ef)(t),e._create_function=(t,n,i,a,c,m)=>(e._create_function=f.ff)(t,n,i,a,c,m),e._create_module=(t,n,i,a)=>(e._create_module=f.gf)(t,n,i,a),e._progress_handler=(t,n)=>(e._progress_handler=f.hf)(t,n),e._register_vfs=(t,n,i,a)=>(e._register_vfs=f.jf)(t,n,i,a),e._getSqliteFree=()=>(e._getSqliteFree=f.kf)();var Ta=e._main=(t,n)=>(Ta=e._main=f.lf)(t,n),$a=(t,n)=>($a=f.nf)(t,n),ka=()=>(ka=f.of)(),La=()=>(La=f.pf)(),Ca=t=>(Ca=f.qf)(t),Lr=t=>(Lr=f.rf)(t),Da=t=>(Da=f.sf)(t),Ia=()=>(Ia=f.tf)(),Ma=t=>(Ma=f.uf)(t),Oa=()=>(Oa=f.vf)();e._sqlite3_version=3232,e.getTempRet0=ka,e.ccall=Ve,e.cwrap=(t,n,i,a)=>{var c=!i||i.every(m=>m==="number"||m==="boolean");return n!=="string"&&c&&!a?e["_"+t]:function(){return Ve(t,n,i,arguments,a)}},e.addFunction=(t,n)=>{if(!Rt){Rt=new WeakMap;var i=At.length;if(Rt)for(var a=0;a<0+i;a++){var c=At.get(a);c&&Rt.set(c,a)}}if(i=Rt.get(t)||0)return i;if(xa.length)i=xa.pop();else{try{At.grow(1)}catch($){throw $ instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":$}i=At.length-1}try{At.set(i,t)}catch($){if(!($ instanceof TypeError))throw $;if(typeof WebAssembly.Function=="function"){a=WebAssembly.Function,c={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"};for(var m={parameters:[],results:n[0]=="v"?[]:[c[n[0]]]},S=1;S<n.length;++S)m.parameters.push(c[n[S]]);n=new a(m,t)}else{for(a=[1],c=n.slice(0,1),n=n.slice(1),m={i:127,p:127,j:126,f:125,d:124,e:111},a.push(96),S=n.length,128>S?a.push(S):a.push(S%128|128,S>>7),S=0;S<n.length;++S)a.push(m[n[S]]);c=="v"?a.push(0):a.push(1,m[c]),n=[0,97,115,109,1,0,0,0,1],c=a.length,128>c?n.push(c):n.push(c%128|128,c>>7),n.push.apply(n,a),n.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),n=new WebAssembly.Module(new Uint8Array(n)),n=new WebAssembly.Instance(n,{e:{f:t}}).exports.f}At.set(i,n)}return Rt.set(t,i),i},e.setValue=je,e.getValue=be,e.UTF8ToString=(t,n)=>t?Z(b,t,n):"",e.stringToUTF8=(t,n,i)=>xt(t,b,n,i),e.lengthBytesUTF8=vt,e.intArrayFromString=cs,e.intArrayToString=function(t){for(var n=[],i=0;i<t.length;i++){var a=t[i];255<a&&(a&=255),n.push(String.fromCharCode(a))}return n.join("")},e.AsciiToString=t=>{for(var n="";;){var i=b[t++>>0];if(!i)return n;n+=String.fromCharCode(i)}},e.UTF16ToString=(t,n)=>{for(var i=t>>1,a=i+n/2;!(i>=a)&&G[i];)++i;if(i<<=1,32<i-t&&Sa)return Sa.decode(b.subarray(t,i));for(i="",a=0;!(a>=n/2);++a){var c=P[t+2*a>>1];if(c==0)break;i+=String.fromCharCode(c)}return i},e.stringToUTF16=(t,n,i)=>{if(i===void 0&&(i=2147483647),2>i)return 0;i-=2;var a=n;i=i<2*t.length?i/2:t.length;for(var c=0;c<i;++c)P[n>>1]=t.charCodeAt(c),n+=2;return P[n>>1]=0,n-a},e.UTF32ToString=(t,n)=>{for(var i=0,a="";!(i>=n/4);){var c=Q[t+4*i>>2];if(c==0)break;++i,65536<=c?(c-=65536,a+=String.fromCharCode(55296|c>>10,56320|c&1023)):a+=String.fromCharCode(c)}return a},e.stringToUTF32=(t,n,i)=>{if(i===void 0&&(i=2147483647),4>i)return 0;var a=n;i=a+i-4;for(var c=0;c<t.length;++c){var m=t.charCodeAt(c);if(55296<=m&&57343>=m){var S=t.charCodeAt(++c);m=65536+((m&1023)<<10)|S&1023}if(Q[n>>2]=m,n+=4,n+4>i)break}return Q[n>>2]=0,n-a},e.writeArrayToMemory=(t,n)=>{v.set(t,n)};var jn;he=function t(){jn||Ra(),jn||(he=t)};function Ra(){function t(){if(!jn&&(jn=!0,e.calledRun=!0,!_)){if(e.noFSInit||$s||($s=!0,Ts(),e.stdin=e.stdin,e.stdout=e.stdout,e.stderr=e.stderr,e.stdin?Xt("stdin",e.stdin):xr("/dev/tty","/dev/stdin"),e.stdout?Xt("stdout",null,e.stdout):xr("/dev/tty","/dev/stdout"),e.stderr?Xt("stderr",null,e.stderr):xr("/dev/tty1","/dev/stderr"),Mn("/dev/stdin",0),Mn("/dev/stdout",1),Mn("/dev/stderr",1)),_s=!1,$n(Me),$n(Je),o(e),e.onRuntimeInitialized&&e.onRuntimeInitialized(),Qa){var n=Ta;try{var i=n(0,0);p=i,ga(i)}catch(a){Nr(a)}}if(e.postRun)for(typeof e.postRun=="function"&&(e.postRun=[e.postRun]);e.postRun.length;)n=e.postRun.shift(),Be.unshift(n);$n(Be)}}if(!(0<X)){if(e.preRun)for(typeof e.preRun=="function"&&(e.preRun=[e.preRun]);e.preRun.length;)ne();$n(Oe),0<X||(e.setStatus?(e.setStatus("Running..."),setTimeout(function(){setTimeout(function(){e.setStatus("")},1),t()},1)):t())}}if(e.preInit)for(typeof e.preInit=="function"&&(e.preInit=[e.preInit]);0<e.preInit.length;)e.preInit.pop()();var Qa=!0;return e.noInitialRun&&(Qa=!1),Ra(),r.ready}})();const ee=0,ql=5,de=10,Pi=12,Bi=14,dt=21,fr=25,vl=27,dr=100,xl=101,Sl=3850,El=522,Al=1,Nl=2,ji=4,Tl=8,Lt=0,ht=1,pn=2,$l=3,mn=4,kl=512,Ll=1024,Cl=2048,Dl=16384,zi=1,Ki=2,Vi=3,Hi=4,Wi=5,Gi=0x7fffffffffffffffn,Yi=-0x8000000000000000n;class Ge extends Error{constructor(r,e){super(r),this.code=e}}const Ct=!0;function Il(s){const r={},e=s._getSqliteFree(),o=s._malloc(8),l=[o,o+4];function u(h){if(typeof h!="string")return 0;const _=s.lengthBytesUTF8(h),p=s._sqlite3_malloc(_+1);return s.stringToUTF8(h,p,_+1),p}function d(h,_){return BigInt(_)<<32n|BigInt(h)&4294967295n}const g=function(){const h=BigInt(Number.MAX_SAFE_INTEGER)>>32n,_=BigInt(Number.MIN_SAFE_INTEGER)>>32n;return function(p,v){return v>h||v<_?d(p,v):v*4294967296+(p&2147483647)-(p&2147483648)}}(),x=new Set;function q(h){if(!x.has(h))throw new Ge("not a database",dt)}const A=new Map;function k(h){if(!A.has(h))throw new Ge("not a statement",dt)}r.bind_collection=function(h,_){k(h);const p=Array.isArray(_),v=r.bind_parameter_count(h);for(let b=1;b<=v;++b){const P=p?b-1:r.bind_parameter_name(h,b),G=_[P];G!==void 0&&r.bind(h,b,G)}return ee},r.bind=function(h,_,p){switch(k(h),typeof p){case"number":return p===(p|0)?r.bind_int(h,_,p):r.bind_double(h,_,p);case"string":return r.bind_text(h,_,p);default:return p instanceof Uint8Array||Array.isArray(p)?r.bind_blob(h,_,p):p===null?r.bind_null(h,_):typeof p=="bigint"?r.bind_int64(h,_,p):p===void 0?vl:(console.warn("unknown binding converted to null",p),r.bind_null(h,_))}},r.bind_blob=function(){const h="sqlite3_bind_blob",_=s.cwrap(h,...W("nnnnn:n"));return function(p,v,b){k(p);const P=b.byteLength??b.length,G=s._sqlite3_malloc(P);s.HEAPU8.subarray(G).set(b);const Q=_(p,v,G,P,e);return U(h,Q,A.get(p))}}(),r.bind_parameter_count=function(){const h="sqlite3_bind_parameter_count",_=s.cwrap(h,...W("n:n"));return function(p){return k(p),_(p)}}(),r.bind_double=function(){const h="sqlite3_bind_double",_=s.cwrap(h,...W("nnn:n"));return function(p,v,b){k(p);const P=_(p,v,b);return U(h,P,A.get(p))}}(),r.bind_int=function(){const h="sqlite3_bind_int",_=s.cwrap(h,...W("nnn:n"));return function(p,v,b){if(k(p),b>2147483647||b<-2147483648)return fr;const P=_(p,v,b);return U(h,P,A.get(p))}}(),r.bind_int64=function(){const h="sqlite3_bind_int64",_=s.cwrap(h,...W("nnnn:n"));return function(p,v,b){if(k(p),b>Gi||b<Yi)return fr;const P=b&4294967295n,G=b>>32n,Q=_(p,v,Number(P),Number(G));return U(h,Q,A.get(p))}}(),r.bind_null=function(){const h="sqlite3_bind_null",_=s.cwrap(h,...W("nn:n"));return function(p,v){k(p);const b=_(p,v);return U(h,b,A.get(p))}}(),r.bind_parameter_name=function(){const h="sqlite3_bind_parameter_name",_=s.cwrap(h,...W("n:s"));return function(p,v){return k(p),_(p,v)}}(),r.bind_text=function(){const h="sqlite3_bind_text",_=s.cwrap(h,...W("nnnnn:n"));return function(p,v,b){k(p);const P=u(b),G=_(p,v,P,-1,e);return U(h,G,A.get(p))}}(),r.changes=function(){const h="sqlite3_changes",_=s.cwrap(h,...W("n:n"));return function(p){return q(p),_(p)}}(),r.close=function(){const h="sqlite3_close",_=s.cwrap(h,...W("n:n"),{async:Ct});return async function(p){q(p);const v=await _(p);return x.delete(p),U(h,v,p)}}(),r.column=function(h,_){k(h);const p=r.column_type(h,_);switch(p){case Hi:return r.column_blob(h,_);case Ki:return r.column_double(h,_);case zi:const v=r.column_int(h,_),b=s.getTempRet0();return g(v,b);case Wi:return null;case Vi:return r.column_text(h,_);default:throw new Ge("unknown type",p)}},r.column_blob=function(){const h="sqlite3_column_blob",_=s.cwrap(h,...W("nn:n"));return function(p,v){k(p);const b=r.column_bytes(p,v),P=_(p,v);return s.HEAPU8.subarray(P,P+b)}}(),r.column_bytes=function(){const h="sqlite3_column_bytes",_=s.cwrap(h,...W("nn:n"));return function(p,v){return k(p),_(p,v)}}(),r.column_count=function(){const h="sqlite3_column_count",_=s.cwrap(h,...W("n:n"));return function(p){return k(p),_(p)}}(),r.column_double=function(){const h="sqlite3_column_double",_=s.cwrap(h,...W("nn:n"));return function(p,v){return k(p),_(p,v)}}(),r.column_int=function(){const h="sqlite3_column_int64",_=s.cwrap(h,...W("nn:n"));return function(p,v){return k(p),_(p,v)}}(),r.column_int64=function(){const h="sqlite3_column_int64",_=s.cwrap(h,...W("nn:n"));return function(p,v){k(p);const b=_(p,v),P=s.getTempRet0();return d(b,P)}}(),r.column_name=function(){const h="sqlite3_column_name",_=s.cwrap(h,...W("nn:s"));return function(p,v){return k(p),_(p,v)}}(),r.column_names=function(h){const _=[],p=r.column_count(h);for(let v=0;v<p;++v)_.push(r.column_name(h,v));return _},r.column_text=function(){const h="sqlite3_column_text",_=s.cwrap(h,...W("nn:s"));return function(p,v){return k(p),_(p,v)}}(),r.column_type=function(){const h="sqlite3_column_type",_=s.cwrap(h,...W("nn:n"));return function(p,v){return k(p),_(p,v)}}(),r.create_function=function(h,_,p,v,b,P,G,Q){if(q(h),P&&!G&&!Q){const D=s.createFunction(h,_,p,v,b,P);return U("sqlite3_create_function",D,h)}if(!P&&G&&Q){const D=s.createAggregate(h,_,p,v,b,G,Q);return U("sqlite3_create_function",D,h)}throw new Ge("invalid function combination",dt)},r.create_module=function(h,_,p,v){q(h);const b=s.createModule(h,_,p,v);return U("sqlite3_create_module",b,h)},r.data_count=function(){const h="sqlite3_data_count",_=s.cwrap(h,...W("n:n"));return function(p){return k(p),_(p)}}(),r.declare_vtab=function(){const h="sqlite3_declare_vtab",_=s.cwrap(h,...W("ns:n"));return function(p,v){const b=_(p,v);return U("sqlite3_declare_vtab",b)}}(),r.exec=async function(h,_,p){for await(const v of r.statements(h,_)){let b;for(;await r.step(v)===dr;)if(p){b=b??r.column_names(v);const P=r.row(v);await p(P,b)}}return ee},r.finalize=function(){const h="sqlite3_finalize",_=s.cwrap(h,...W("n:n"),{async:Ct});return async function(p){if(!A.has(p))return dt;const v=await _(p);return A.get(p),A.delete(p),v}}(),r.get_autocommit=function(){const h="sqlite3_get_autocommit",_=s.cwrap(h,...W("n:n"));return function(p){return _(p)}}(),r.libversion=function(){const h="sqlite3_libversion",_=s.cwrap(h,...W(":s"));return function(){return _()}}(),r.libversion_number=function(){const h="sqlite3_libversion_number",_=s.cwrap(h,...W(":n"));return function(){return _()}}(),r.limit=function(){const h="sqlite3_limit",_=s.cwrap(h,...W("nnn:n"));return function(p,v,b){return _(p,v,b)}}(),r.open_v2=function(){const h="sqlite3_open_v2",_=s.cwrap(h,...W("snnn:n"),{async:Ct});return async function(p,v,b){v=v||ji|Nl,b=u(b);const P=await _(p,l[0],v,b),G=s.getValue(l[0],"*");return x.add(G),s._sqlite3_free(b),s.ccall("RegisterExtensionFunctions","void",["number"],[G]),U(h,P),G}}(),r.prepare_v2=function(){const h="sqlite3_prepare_v2",_=s.cwrap(h,...W("nnnnn:n"),{async:Ct});return async function(p,v){const b=await _(p,v,-1,l[0],l[1]);U(h,b,p);const P=s.getValue(l[0],"*");return P?(A.set(P,p),{stmt:P,sql:s.getValue(l[1],"*")}):null}}(),r.progress_handler=function(h,_,p,v){q(h),s.progressHandler(h,_,p,v)},r.reset=function(){const h="sqlite3_reset",_=s.cwrap(h,...W("n:n"),{async:Ct});return async function(p){k(p);const v=await _(p);return U(h,v,A.get(p))}}(),r.result=function(h,_){switch(typeof _){case"number":_===(_|0)?r.result_int(h,_):r.result_double(h,_);break;case"string":r.result_text(h,_);break;default:if(_ instanceof Uint8Array||Array.isArray(_))r.result_blob(h,_);else if(_===null)r.result_null(h);else{if(typeof _=="bigint")return r.result_int64(h,_);console.warn("unknown result converted to null",_),r.result_null(h)}break}},r.result_blob=function(){const h="sqlite3_result_blob",_=s.cwrap(h,...W("nnnn:n"));return function(p,v){const b=v.byteLength??v.length,P=s._sqlite3_malloc(b);s.HEAPU8.subarray(P).set(v),_(p,P,b,e)}}(),r.result_double=function(){const h="sqlite3_result_double",_=s.cwrap(h,...W("nn:n"));return function(p,v){_(p,v)}}(),r.result_int=function(){const h="sqlite3_result_int",_=s.cwrap(h,...W("nn:n"));return function(p,v){_(p,v)}}(),r.result_int64=function(){const h="sqlite3_result_int64",_=s.cwrap(h,...W("nnn:n"));return function(p,v){if(v>Gi||v<Yi)return fr;const b=v&4294967295n,P=v>>32n;_(p,Number(b),Number(P))}}(),r.result_null=function(){const h="sqlite3_result_null",_=s.cwrap(h,...W("n:n"));return function(p){_(p)}}(),r.result_text=function(){const h="sqlite3_result_text",_=s.cwrap(h,...W("nnnn:n"));return function(p,v){const b=u(v);_(p,b,-1,e)}}(),r.row=function(h){const _=[],p=r.data_count(h);for(let v=0;v<p;++v){const b=r.column(h,v);_.push((b==null?void 0:b.buffer)===s.HEAPU8.buffer?b.slice():b)}return _},r.set_authorizer=function(h,_,p){q(h);const v=s.setAuthorizer(h,_,p);return U("sqlite3_set_authorizer",v,h)},r.sql=function(){const h="sqlite3_sql",_=s.cwrap(h,...W("n:s"));return function(p){return k(p),_(p)}}(),r.statements=function(h,_){return async function*(){const p=r.str_new(h,_);let v={stmt:null,sql:r.str_value(p)};try{for(;v=await r.prepare_v2(h,v.sql);)yield v.stmt,r.finalize(v.stmt),v.stmt=null}finally{v!=null&&v.stmt&&r.finalize(v.stmt),r.str_finish(p)}}()},r.step=function(){const h="sqlite3_step",_=s.cwrap(h,...W("n:n"),{async:Ct});return async function(p){k(p);const v=await _(p);return U(h,v,A.get(p),[dr,xl])}}();let F=0;const B=new Map;r.str_new=function(h,_=""){const p=s.lengthBytesUTF8(_),v=F++&4294967295,b={offset:s._sqlite3_malloc(p+1),bytes:p};return B.set(v,b),s.stringToUTF8(_,b.offset,b.bytes+1),v},r.str_appendall=function(h,_){if(!B.has(h))throw new Ge("not a string",dt);const p=B.get(h),v=s.lengthBytesUTF8(_),b=p.bytes+v,P=s._sqlite3_malloc(b+1);s.HEAPU8.subarray(P,P+b+1).set(s.HEAPU8.subarray(p.offset,p.offset+p.bytes)),s.stringToUTF8(_,P+p.bytes,v+1),s._sqlite3_free(p.offset),p.offset=P,p.bytes=b,B.set(h,p)},r.str_finish=function(h){if(!B.has(h))throw new Ge("not a string",dt);const _=B.get(h);B.delete(h),s._sqlite3_free(_.offset)},r.str_value=function(h){if(!B.has(h))throw new Ge("not a string",dt);return B.get(h).offset},r.user_data=function(h){return s.getFunctionUserData(h)},r.value=function(h){const _=r.value_type(h);switch(_){case Hi:return r.value_blob(h);case Ki:return r.value_double(h);case zi:const p=r.value_int(h),v=s.getTempRet0();return g(p,v);case Wi:return null;case Vi:return r.value_text(h);default:throw new Ge("unknown type",_)}},r.value_blob=function(){const h="sqlite3_value_blob",_=s.cwrap(h,...W("n:n"));return function(p){const v=r.value_bytes(p),b=_(p);return s.HEAPU8.subarray(b,b+v)}}(),r.value_bytes=function(){const h="sqlite3_value_bytes",_=s.cwrap(h,...W("n:n"));return function(p){return _(p)}}(),r.value_double=function(){const h="sqlite3_value_double",_=s.cwrap(h,...W("n:n"));return function(p){return _(p)}}(),r.value_int=function(){const h="sqlite3_value_int64",_=s.cwrap(h,...W("n:n"));return function(p){return _(p)}}(),r.value_int64=function(){const h="sqlite3_value_int64",_=s.cwrap(h,...W("n:n"));return function(p){const v=_(p),b=s.getTempRet0();return d(v,b)}}(),r.value_text=function(){const h="sqlite3_value_text",_=s.cwrap(h,...W("n:s"));return function(p){return _(p)}}(),r.value_type=function(){const h="sqlite3_value_type",_=s.cwrap(h,...W("n:n"));return function(p){return _(p)}}(),r.vfs_register=function(h,_){const p=s.registerVFS(h,_);return U("sqlite3_vfs_register",p)};function U(h,_,p=null,v=[ee]){if(v.includes(_))return _;const b=p?s.ccall("sqlite3_errmsg","string",["number"],[p]):h;throw new Ge(b,_)}return r}function W(s){const r=[],e=s.match(/([ns@]*):([nsv@])/);switch(e[2]){case"n":r.push("number");break;case"s":r.push("string");break;case"v":r.push(null);break}const o=[];for(let l of e[1])switch(l){case"n":o.push("number");break;case"s":o.push("string");break}return r.push(o),r}class Ml{constructor(){w(this,"mxPathName",64)}xClose(r){return de}xRead(r,e,o){return de}xWrite(r,e,o){return de}xTruncate(r,e){return de}xSync(r,e){return ee}xFileSize(r,e){return de}xLock(r,e){return ee}xUnlock(r,e){return ee}xCheckReservedLock(r,e){return e.setInt32(0,0,!0),ee}xFileControl(r,e,o){return Pi}xSectorSize(r){return 512}xDeviceCharacteristics(r){return 0}xOpen(r,e,o,l){return Bi}xDelete(r,e){return de}xAccess(r,e,o){return de}handleAsync(r){return r()}}const Ol=Lt|ht|pn|$l|mn;class Rl{constructor(){te(this,Vt);te(this,bn);te(this,qn);te(this,ve,Lt);w(this,"timeoutMillis",0);te(this,Dt,new Map);te(this,Kt,Promise.resolve(0))}get state(){return T(this,ve)}async lock(r){return Ne(this,Vt,Fr).call(this,Ne(this,bn,ao),r)}async unlock(r){return Ne(this,Vt,Fr).call(this,Ne(this,qn,oo),r)}async isSomewhereReserved(){throw new Error("unimplemented")}async _NONEtoSHARED(){}async _SHAREDtoEXCLUSIVE(){await this._SHAREDtoRESERVED(),await this._RESERVEDtoEXCLUSIVE()}async _SHAREDtoRESERVED(){}async _RESERVEDtoEXCLUSIVE(){}async _EXCLUSIVEtoRESERVED(){}async _EXCLUSIVEtoSHARED(){await this._EXCLUSIVEtoRESERVED(),await this._RESERVEDtoSHARED()}async _EXCLUSIVEtoNONE(){await this._EXCLUSIVEtoRESERVED(),await this._RESERVEDtoSHARED(),await this._SHAREDtoNONE()}async _RESERVEDtoSHARED(){}async _RESERVEDtoNONE(){await this._RESERVEDtoSHARED(),await this._SHAREDtoNONE()}async _SHAREDtoNONE(){}_acquireWebLock(r,e){return new Promise(async(o,l)=>{try{await navigator.locks.request(r,e,u=>{if(o(u),u)return new Promise(d=>T(this,Dt).set(r,d))})}catch(u){l(u)}})}_releaseWebLock(r){var e;(e=T(this,Dt).get(r))==null||e(),T(this,Dt).delete(r)}async _pollWebLock(r){var e;return(e=(await navigator.locks.query()).held.find(({name:o})=>o===r))==null?void 0:e.mode}_getTimeoutSignal(){if(this.timeoutMillis){const r=new AbortController;return setTimeout(()=>r.abort(),this.timeoutMillis),r.signal}}}ve=new WeakMap,Dt=new WeakMap,Kt=new WeakMap,Vt=new WeakSet,Fr=async function(r,e){const o=e&Ol;try{const l=()=>r.call(this,o);return await ue(this,Kt,T(this,Kt).then(l,l)),ue(this,ve,o),ee}catch(l){return l.name==="AbortError"?ql:(console.error(l),Sl)}},bn=new WeakSet,ao=async function(r){if(r===T(this,ve))return ee;switch(T(this,ve)){case Lt:switch(r){case ht:return this._NONEtoSHARED();default:throw new Error(`unexpected transition ${T(this,ve)} -> ${r}`)}case ht:switch(r){case pn:return this._SHAREDtoRESERVED();case mn:return this._SHAREDtoEXCLUSIVE();default:throw new Error(`unexpected transition ${T(this,ve)} -> ${r}`)}case pn:switch(r){case mn:return this._RESERVEDtoEXCLUSIVE();default:throw new Error(`unexpected transition ${T(this,ve)} -> ${r}`)}default:throw new Error(`unexpected transition ${T(this,ve)} -> ${r}`)}},qn=new WeakSet,oo=async function(r){if(r===T(this,ve))return ee;switch(T(this,ve)){case mn:switch(r){case ht:return this._EXCLUSIVEtoSHARED();case Lt:return this._EXCLUSIVEtoNONE();default:throw new Error(`unexpected transition ${T(this,ve)} -> ${r}`)}case pn:switch(r){case ht:return this._RESERVEDtoSHARED();case Lt:return this._RESERVEDtoNONE();default:throw new Error(`unexpected transition ${T(this,ve)} -> ${r}`)}case ht:switch(r){case Lt:return this._SHAREDtoNONE();default:throw new Error(`unexpected transition ${T(this,ve)} -> ${r}`)}default:throw new Error(`unexpected transition ${T(this,ve)} -> ${r}`)}};class Ql extends Rl{constructor(r){super(),this._lockName=r+"-outer",this._reservedName=r+"-reserved"}async isSomewhereReserved(){return await this._pollWebLock(this._reservedName)==="exclusive"}async _NONEtoSHARED(){await this._acquireWebLock(this._lockName,{mode:"exclusive",signal:this._getTimeoutSignal()})}async _SHAREDtoRESERVED(){await this._acquireWebLock(this._reservedName,{mode:"exclusive",signal:this._getTimeoutSignal()})}async _RESERVEDtoSHARED(){this._releaseWebLock(this._reservedName)}async _SHAREDtoNONE(){this._releaseWebLock(this._lockName)}}const Ul=5e3;let Fl=0;const hr=new WeakMap;function Pe(...s){}class Pl{constructor(r,e={durability:"default"}){te(this,vn);te(this,It,void 0);te(this,Mt,void 0);te(this,Ht,void 0);te(this,we,null);te(this,Wt,0);te(this,pt,Promise.resolve());te(this,mt,Promise.resolve());ue(this,Mt,Promise.resolve(r).then(o=>ue(this,It,o))),ue(this,Ht,e)}async close(){const r=T(this,It)??await T(this,Mt);await T(this,pt),await this.sync(),r.close()}async run(r,e){const o=T(this,pt).then(()=>Ne(this,vn,lo).call(this,r,e));return ue(this,pt,o.catch(()=>{})),o}async sync(){await T(this,pt),await T(this,mt),ue(this,mt,Promise.resolve())}}It=new WeakMap,Mt=new WeakMap,Ht=new WeakMap,we=new WeakMap,Wt=new WeakMap,pt=new WeakMap,mt=new WeakMap,vn=new WeakSet,lo=async function(r,e){var l,u;const o=T(this,It)??await T(this,Mt);if(r==="readwrite"&&((l=T(this,we))==null?void 0:l.mode)==="readonly")ue(this,we,null);else if(performance.now()-T(this,Wt)>Ul){try{(u=T(this,we))==null||u.commit()}catch(d){if(d.name!=="InvalidStateError")throw d}await new Promise(d=>setTimeout(d)),ue(this,we,null)}for(let d=0;d<2;++d){if(!T(this,we)){ue(this,we,o.transaction(o.objectStoreNames,r,T(this,Ht)));const g=ue(this,Wt,performance.now());ue(this,mt,T(this,mt).then(()=>new Promise((x,q)=>{T(this,we).addEventListener("complete",A=>{x(),T(this,we)===A.target&&ue(this,we,null),Pe(`transaction ${hr.get(A.target)} complete`)}),T(this,we).addEventListener("abort",A=>{console.warn("tx abort",(performance.now()-g)/1e3);const k=A.target.error;q(k),T(this,we)===A.target&&ue(this,we,null),Pe(`transaction ${hr.get(A.target)} aborted`,k)})}))),hr.set(T(this,we),Fl++)}try{const g=Object.fromEntries(Array.from(o.objectStoreNames,x=>[x,new Bl(T(this,we).objectStore(x))]));return await e(g)}catch(g){if(ue(this,we,null),d)throw g}}};function nt(s){return new Promise((r,e)=>{s.addEventListener("success",()=>r(s.result)),s.addEventListener("error",()=>e(s.error))})}class Bl{constructor(r){te(this,ge,void 0);ue(this,ge,r)}get(r){Pe(`get ${T(this,ge).name}`,r);const e=T(this,ge).get(r);return nt(e)}getAll(r,e){Pe(`getAll ${T(this,ge).name}`,r,e);const o=T(this,ge).getAll(r,e);return nt(o)}getKey(r){Pe(`getKey ${T(this,ge).name}`,r);const e=T(this,ge).getKey(r);return nt(e)}getAllKeys(r,e){Pe(`getAllKeys ${T(this,ge).name}`,r,e);const o=T(this,ge).getAllKeys(r,e);return nt(o)}put(r,e){Pe(`put ${T(this,ge).name}`,r,e);const o=T(this,ge).put(r,e);return nt(o)}delete(r){Pe(`delete ${T(this,ge).name}`,r);const e=T(this,ge).delete(r);return nt(e)}clear(){Pe(`clear ${T(this,ge).name}`);const r=T(this,ge).clear();return nt(r)}index(r){return new jl(T(this,ge).index(r))}}ge=new WeakMap;class jl{constructor(r){te(this,gt,void 0);ue(this,gt,r)}getAllKeys(r,e){Pe(`IDBIndex.getAllKeys ${T(this,gt).objectStore.name}<${T(this,gt).name}>`,r,e);const o=T(this,gt).getAllKeys(r,e);return nt(o)}}gt=new WeakMap;const zl=512,Ji=3e3,Xi={durability:"default",purge:"deferred",purgeAtLeast:16};function Ce(...s){}class Kl extends Ml{constructor(e="wa-sqlite",o=Xi){super();te(this,Gt);te(this,xn);te(this,Sn);te(this,it);te(this,En);te(this,rt,void 0);te(this,xe,new Map);te(this,oe,void 0);te(this,wt,new Set);te(this,yt,performance.now());te(this,Ye,new Set);this.name=e,ue(this,rt,Object.assign({},Xi,o)),ue(this,oe,new Pl(Vl(e),{durability:T(this,rt).durability}))}async close(){var e;for(const o of T(this,xe).keys())await this.xClose(o);await((e=T(this,oe))==null?void 0:e.close()),ue(this,oe,null)}xOpen(e,o,l,u){return this.handleAsync(async()=>{e===null&&(e=`null_${o}`),Ce(`xOpen ${e} 0x${o.toString(16)} 0x${l.toString(16)}`);try{const d=new URL(e,"http://localhost/"),g={path:d.pathname,flags:l,block0:null,isMetadataChanged:!0,locks:new Ql(d.pathname)};return T(this,xe).set(o,g),await T(this,oe).run("readwrite",async({blocks:x})=>{if(g.block0=await x.get(Ne(this,it,Ut).call(this,g,0)),!g.block0)if(l&ji)g.block0={path:g.path,offset:0,version:0,data:new Uint8Array(0),fileSize:0},x.put(g.block0);else throw new Error(`file not found: ${g.path}`)}),u.setInt32(0,l&Al,!0),ee}catch(d){return console.error(d),Bi}})}xClose(e){return this.handleAsync(async()=>{try{const o=T(this,xe).get(e);return o&&(Ce(`xClose ${o.path}`),T(this,xe).delete(e),o.flags&Tl&&T(this,oe).run("readwrite",({blocks:l})=>{l.delete(IDBKeyRange.bound([o.path],[o.path,[]]))})),ee}catch(o){return console.error(o),de}})}xRead(e,o,l){return this.handleAsync(async()=>{const u=T(this,xe).get(e);Ce(`xRead ${u.path} ${o.byteLength} ${l}`);try{return await T(this,oe).run("readonly",async({blocks:d})=>{let g=0;for(;g<o.byteLength;){const x=l+g,q=x<u.block0.data.byteLength?u.block0:await d.get(Ne(this,it,Ut).call(this,u,-x));if(!q||q.data.byteLength-q.offset<=x)return o.fill(0,g),El;const A=o.subarray(g),k=x+q.offset,F=Math.min(Math.max(q.data.byteLength-k,0),A.byteLength);A.set(q.data.subarray(k,k+F)),g+=F}return ee})}catch(d){return console.error(d),de}})}xWrite(e,o,l){const u=T(this,Ye).has(e);if(u||performance.now()-T(this,yt)>Ji){const d=this.handleAsync(async()=>{this.handleAsync!==super.handleAsync&&T(this,Ye).add(e),await new Promise(x=>setTimeout(x));const g=Ne(this,Gt,Pr).call(this,e,o,l);return ue(this,yt,performance.now()),g});return u&&T(this,Ye).delete(e),d}return Ne(this,Gt,Pr).call(this,e,o,l)}xTruncate(e,o){const l=T(this,xe).get(e);Ce(`xTruncate ${l.path} ${o}`);try{Object.assign(l.block0,{fileSize:o,data:l.block0.data.slice(0,o)});const u=Object.assign({},l.block0);return T(this,oe).run("readwrite",({blocks:d})=>{d.delete(Ne(this,it,Ut).call(this,l,-1/0,-o)),d.put(u)}),ee}catch(u){return console.error(u),de}}xSync(e,o){const l=T(this,Ye).has(e);if(l||T(this,rt).durability!=="relaxed"||performance.now()-T(this,yt)>Ji){const d=this.handleAsync(async()=>{this.handleAsync!==super.handleAsync&&T(this,Ye).add(e);const g=await Ne(this,xn,co).call(this,e,o);return ue(this,yt,performance.now()),g});return l&&T(this,Ye).delete(e),d}const u=T(this,xe).get(e);return Ce(`xSync ${u.path} ${o}`),ee}xFileSize(e,o){const l=T(this,xe).get(e);return Ce(`xFileSize ${l.path}`),o.setBigInt64(0,BigInt(l.block0.fileSize),!0),ee}xLock(e,o){return this.handleAsync(async()=>{const l=T(this,xe).get(e);Ce(`xLock ${l.path} ${o}`);try{const u=await l.locks.lock(o);return u===ee&&l.locks.state===ht&&(l.block0=await T(this,oe).run("readonly",({blocks:d})=>d.get(Ne(this,it,Ut).call(this,l,0)))),u}catch(u){return console.error(u),de}})}xUnlock(e,o){return this.handleAsync(async()=>{const l=T(this,xe).get(e);Ce(`xUnlock ${l.path} ${o}`);try{return l.locks.unlock(o)}catch(u){return console.error(u),de}})}xCheckReservedLock(e,o){return this.handleAsync(async()=>{const l=T(this,xe).get(e);Ce(`xCheckReservedLock ${l.path}`);const u=await l.locks.isSomewhereReserved();return o.setInt32(0,u?1:0,!0),ee})}xSectorSize(e){return zl}xDeviceCharacteristics(e){return Dl|kl|Ll|Cl}xFileControl(e,o,l){const u=T(this,xe).get(e);switch(Ce(`xFileControl ${u.path} ${o}`),o){case 11:return u.overwrite=!0,ee;case 21:if(u.overwrite)try{return this.handleAsync(async()=>(await Ne(this,En,fo).call(this,u),ee))}catch(d){return console.error(d),de}if(u.isMetadataChanged)try{T(this,oe).run("readwrite",async({blocks:d})=>{await d.put(u.block0)}),u.isMetadataChanged=!1}catch(d){return console.error(d),de}return ee;case 22:return u.overwrite=!1,ee;case 31:return this.handleAsync(async()=>{try{return u.block0.version--,u.changedPages=new Set,T(this,oe).run("readwrite",async({blocks:d})=>{const g=await d.index("version").getAllKeys(IDBKeyRange.bound([u.path],[u.path,u.block0.version]));for(const x of g)d.delete(x)}),ee}catch(d){return console.error(d),de}});case 32:try{const d=Object.assign({},u.block0);d.data=d.data.slice();const g=u.changedPages;return u.changedPages=null,u.isMetadataChanged=!1,T(this,oe).run("readwrite",async({blocks:x})=>{x.put(d);const q=await x.get([u.path,"purge",0])??{path:u.path,offset:"purge",version:0,data:new Map,count:0};q.count+=g.size;for(const A of g)q.data.set(A,d.version);x.put(q),Ne(this,Sn,uo).call(this,u.path,q.count)}),ee}catch(d){return console.error(d),de}case 33:return this.handleAsync(async()=>{try{return u.changedPages=null,u.isMetadataChanged=!1,u.block0=await T(this,oe).run("readonly",({blocks:d})=>d.get([u.path,0,u.block0.version+1])),ee}catch(d){return console.error(d),de}});default:return Pi}}xAccess(e,o,l){return this.handleAsync(async()=>{try{const u=new URL(e,"file://localhost/").pathname;Ce(`xAccess ${u} ${o}`);const d=await T(this,oe).run("readonly",({blocks:g})=>g.getKey(Ne(this,it,Ut).call(this,{path:u},0)));return l.setInt32(0,d?1:0,!0),ee}catch(u){return console.error(u),de}})}xDelete(e,o){return this.handleAsync(async()=>{const l=new URL(e,"file://localhost/").pathname;try{return T(this,oe).run("readwrite",({blocks:u})=>u.delete(IDBKeyRange.bound([l],[l,[]]))),o&&await T(this,oe).sync(),ee}catch(u){return console.error(u),de}})}async purge(e){const o=Date.now();await T(this,oe).run("readwrite",async({blocks:l})=>{const u=await l.get([e,"purge",0]);if(u){for(const[d,g]of u.data)l.delete(IDBKeyRange.bound([e,d,g],[e,d,1/0],!0,!1));await l.delete([e,"purge",0])}Ce(`purge ${e} ${(u==null?void 0:u.data.size)??0} pages in ${Date.now()-o} ms`)})}}rt=new WeakMap,xe=new WeakMap,oe=new WeakMap,wt=new WeakMap,yt=new WeakMap,Ye=new WeakMap,Gt=new WeakSet,Pr=function(e,o,l){const u=T(this,xe).get(e);Ce(`xWrite ${u.path} ${o.byteLength} ${l}`);try{const d=u.block0.fileSize;u.block0.fileSize<l+o.byteLength&&(u.block0.fileSize=l+o.byteLength,u.isMetadataChanged=!0);const g=l===0?u.block0:{path:u.path,offset:-l,version:u.block0.version,data:null};return g.data=o.slice(),u.changedPages?(d===u.block0.fileSize&&u.changedPages.add(-l),l!==0&&T(this,oe).run("readwrite",({blocks:x})=>x.put(g))):T(this,oe).run("readwrite",({blocks:x})=>x.put(g)),u.isMetadataChanged=l===0?!1:u.isMetadataChanged,ee}catch(d){return console.error(d),de}},xn=new WeakSet,co=async function(e,o){const l=T(this,xe).get(e);Ce(`xSync ${l.path} ${o}`);try{l.isMetadataChanged&&(T(this,oe).run("readwrite",async({blocks:u})=>{await u.put(l.block0)}),l.isMetadataChanged=!1),await T(this,oe).sync()}catch(u){return console.error(u),de}return ee},Sn=new WeakSet,uo=function(e,o){T(this,rt).purge==="manual"||T(this,wt).has(e)||o<T(this,rt).purgeAtLeast||(globalThis.requestIdleCallback?globalThis.requestIdleCallback(()=>{this.purge(e),T(this,wt).delete(e)}):setTimeout(()=>{this.purge(e),T(this,wt).delete(e)}),T(this,wt).add(e))},it=new WeakSet,Ut=function(e,o,l=0){const u=!o||-o<e.block0.data.length?-1/0:e.block0.version;return IDBKeyRange.bound([e.path,o,u],[e.path,l,1/0])},En=new WeakSet,fo=async function(e){const o=e.block0.data.length;if(o<18)return;const l=new DataView(e.block0.data.buffer,e.block0.data.byteOffset);let u=l.getUint16(16);if(u===1&&(u=65536),u===o)return;const d=Math.max(o,u),g=d/o,x=d/u,q=l.getUint32(28)*u,A=e.block0.version;await T(this,oe).run("readwrite",async({blocks:k})=>{const F=await k.index("version").getAllKeys(IDBKeyRange.bound([e.path,A+1],[e.path,1/0]));for(const B of F)k.delete(B);k.delete([e.path,"purge",0]);for(let B=0;B<q;B+=d){const U=await k.getAll(IDBKeyRange.lowerBound([e.path,-(B+d),1/0]),g);for(const h of U)k.delete([h.path,h.offset,h.version]);if(x===1){const h=new Uint8Array(u);for(const p of U)h.set(p.data,-(B+p.offset));const _={path:e.path,offset:-B,version:A,data:h};_.offset===0&&(_.fileSize=q,e.block0=_),k.put(_)}else{const h=U[0];for(let _=0;_<x;++_){const p=-(B+_*u);if(-p>=q)break;const v={path:h.path,offset:p,version:A,data:h.data.subarray(_*u,(_+1)*u)};v.offset===0&&(v.fileSize=q,e.block0=v),k.put(v)}}}})};function Vl(s){return new Promise((r,e)=>{const o=globalThis.indexedDB.open(s,5);o.addEventListener("upgradeneeded",function(){o.result.createObjectStore("blocks",{keyPath:["path","offset","version"]}).createIndex("version",["path","version"])}),o.addEventListener("success",()=>{r(o.result)}),o.addEventListener("error",()=>{e(o.error)})})}async function Hl(){const s=await bl({locateFile(o){return`./${o}`}}),r=Il(s),e=new Kl;return r.vfs_register(e,!0),r}async function Wl(s,r){const e=await s.open_v2(r);async function o(l,...u){const d=[];for await(const g of s.statements(e,l))for(u.forEach((x,q)=>s.bind(g,q+1,x));await s.step(g)===dr;)d.push(s.row(g));return d}return{async execute(l,...u){return navigator.locks.request("crypta_executor",d=>o(l,...u))},async close(){await s.close(e)}}}class Zi extends Qi{constructor(e,o,l,u={}){super(o);w(this,"logger");this.client=e,this.schema=l,this.logger=u.logger??new Mi}prepareQuery(e,o,l){return new es(this.client,e,this.logger,o,l)}async transaction(e,o){const l=new _r("async",this.dialect,this,this.schema);await this.run(y.raw(`begin${o!=null&&o.behavior?" "+o.behavior:""}`));try{const u=await e(l);return await this.run(y`commit`),u}catch(u){throw await this.run(y`rollback`),u}}}Lu=O,w(Zi,Lu,"SQLiteRemoteSession");const An=class An extends Ui{async transaction(r){const e=`sp${this.nestedIndex}`,o=new An("async",this.dialect,this.session,this.schema,this.nestedIndex+1);await this.session.run(y.raw(`savepoint ${e}`));try{const l=await r(o);return await this.session.run(y.raw(`release savepoint ${e}`)),l}catch(l){throw await this.session.run(y.raw(`rollback to savepoint ${e}`)),l}}};Cu=O,w(An,Cu,"SQLiteProxyTransaction");let _r=An;class es extends Ri{constructor(r,e,o,l,u){super("async",u,e),this.client=r,this.logger=o,this.fields=l}run(r){const e=an(this.query.params,r??{});return this.logger.logQuery(this.query.sql,e),this.client(this.query.sql,e,"run")}async all(r){const{fields:e,query:o,logger:l,joinsNotNullableMap:u}=this,d=an(o.params,r??{});l.logQuery(o.sql,d);const{rows:g}=await this.client(o.sql,d,"all");return e?g.map(x=>mi(e,x,u)):g}async get(r){const{fields:e,query:o,logger:l,joinsNotNullableMap:u}=this,d=an(o.params,r??{});l.logQuery(o.sql,d);const g=await this.client(o.sql,d,"get");return e?g.rows===void 0?void 0:mi(e,g.rows,u):g.rows}async values(r){const e=an(this.query.params,r??{});return this.logger.logQuery(this.query.sql,e),(await this.client(this.query.sql,e,"values")).rows}}Du=O,w(es,Du,"SQLiteProxyPreparedQuery");function Gl(s,r={}){const e=new Ei;let o;r.logger===!0?o=new Ii:r.logger!==!1&&(o=r.logger);let l;if(r.schema){const d=jo(r.schema,Ho);l={fullSchema:r.schema,schema:d.tables,tableNamesMap:d.tableNamesMap}}const u=new Zi(s,e,l,{logger:o});return new or("async",e,u,l)}async function Yl(s){return Gl(async(r,e,o)=>{const l=await s.execute(r,...e);return o==="get"&&l.length>0?{rows:l[0]}:{rows:l}})}let ts,ns,rs;ts=await Hl(),Qr=await Wl(ts,"crypta"),Mr=await Yl(Qr),ns="CREATE TABLE `folders` (\n	`id` text PRIMARY KEY NOT NULL,\n	`name` text NOT NULL,\n	`position` real DEFAULT 1 NOT NULL,\n	`updated_at` text DEFAULT CURRENT_TIMESTAMP NOT NULL,\n	`created_at` text DEFAULT CURRENT_TIMESTAMP NOT NULL\n);\n--> statement-breakpoint\nCREATE TABLE `snippet_tags` (\n	`snippet_id` text NOT NULL,\n	`tag_text` text NOT NULL,\n	`updated_at` text DEFAULT CURRENT_TIMESTAMP NOT NULL,\n	`created_at` text DEFAULT CURRENT_TIMESTAMP NOT NULL,\n	PRIMARY KEY(`snippet_id`, `tag_text`),\n	FOREIGN KEY (`snippet_id`) REFERENCES `snippets`(`id`) ON UPDATE cascade ON DELETE cascade\n);\n--> statement-breakpoint\nCREATE TABLE `snippets` (\n	`id` text PRIMARY KEY NOT NULL,\n	`folder_id` text,\n	`name` text NOT NULL,\n	`language` text NOT NULL,\n	`text` text NOT NULL,\n	`encrypted` integer DEFAULT false NOT NULL,\n	`position` real DEFAULT 1 NOT NULL,\n	`updated_at` text DEFAULT CURRENT_TIMESTAMP NOT NULL,\n	`created_at` text DEFAULT CURRENT_TIMESTAMP NOT NULL,\n	FOREIGN KEY (`folder_id`) REFERENCES `folders`(`id`) ON UPDATE cascade ON DELETE cascade\n);\n",rs=`INSERT INTO \`folders\`(id, name, position)
VALUES ('default', 'Default', 0)
ON CONFLICT(id) DO NOTHING;
`,ro={0:"/db/0000_mushy_black_queen.sql"},to=Object.assign({"/db/0000_mushy_black_queen.sql":ns,"/db/0000_seed_default_folder.sql":rs}),Dr=Xe("not-started"),eo=async function(s,r,e,o){r.set("running");let[l]=await s.get(y`PRAGMA user_version`);for(;e[l];){const u=e[l],d=o[u];if(!d){console.error(`migrate: could not find query string of ${u}`);return}if(await s.run(y.raw(d)),l===0){try{await Jl(s)}catch(x){console.error("migrate: unable to import v0 data"),console.error(x)}const g=o["/db/0000_seed_default_folder.sql"];await s.run(y.raw(g))}l+=1,await s.run(y.raw(`PRAGMA user_version = ${l}`))}r.set("done")};async function Jl(s){const r=await wl(),e=Object.entries(r).map(([o,l],u)=>({id:o,name:l.displayName,position:u}));for(const o of e)await s.insert($t).values(o).onConflictDoNothing();for(const o of e){const l=await ml(o.id);for(const u of l){await s.insert(Tt).values({...u,folderId:o.id,createdAt:y`DATETIME(${(u.createdAt/1e3).toFixed()}, 'unixepoch')`,updatedAt:y`CURRENT_TIMESTAMP`}).onConflictDoNothing();for(const d of u.tags)await s.insert(_n).values({snippetId:u.id,tagText:d}).onConflictDoNothing()}}}Or=await gl(Dr,Mr),Pa=Fa([Or,Kn],([s,r])=>{const e=s.filter(o=>{const l=new Set(o.tags),u=o.name.toLowerCase().includes(r.searchInput)||o.text.toLowerCase().includes(r.searchInput),d=Array.from(r.tags).every(g=>l.has(g));return u&&d});return e.sort((o,l)=>l.updatedAt-o.updatedAt),e}),Ya=Xe(!1)})();export{Pa as A,of as __tla,Ba as a,Dr as b,Ir as c,ja as d,za as e,Ka as f,Va as g,Mr as h,Ha as i,Wa as j,Kn as k,Or as l,Ga as m,Ya as n,Ja as o,Xa as p,Za as q,eo as r,Rr as s,to as t,no as u,ro as v,Qr as w,io as x,so as y,Ur as z};
