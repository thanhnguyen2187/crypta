import{o as ge,t as ye}from"../chunks/scheduler.dc60739d.js";import{S as Ne,a as Te,I as M,g as Me,f as qe,b as we,c as ce,s as Z,i as ve,d as J,e as W,P as Ve,h as Qe}from"../chunks/singletons.6d50e576.js";function Xe(r,a){return r==="/"||a==="ignore"?r:a==="never"?r.endsWith("/")?r.slice(0,-1):r:a==="always"&&!r.endsWith("/")?r+"/":r}function Ye(r){return r.split("%25").map(decodeURI).join("%25")}function Ze(r){for(const a in r)r[a]=decodeURIComponent(r[a]);return r}const et=["href","pathname","search","searchParams","toString","toJSON"];function tt(r,a){const u=new URL(r);for(const i of et)Object.defineProperty(u,i,{get(){return a(),r[i]},enumerable:!0,configurable:!0});return rt(u),u}function rt(r){Object.defineProperty(r,"hash",{get(){throw new Error("Cannot access event.url.hash. Consider using `$page.url.hash` inside a component instead")}})}const nt="/__data.json";function at(r){return r.replace(/\/$/,"")+nt}function ot(...r){let a=5381;for(const u of r)if(typeof u=="string"){let i=u.length;for(;i;)a=a*33^u.charCodeAt(--i)}else if(ArrayBuffer.isView(u)){const i=new Uint8Array(u.buffer,u.byteOffset,u.byteLength);let p=i.length;for(;p;)a=a*33^i[--p]}else throw new TypeError("value must be a string or TypedArray");return(a>>>0).toString(36)}const ue=window.fetch;window.fetch=(r,a)=>((r instanceof Request?r.method:(a==null?void 0:a.method)||"GET")!=="GET"&&ee.delete(be(r)),ue(r,a));const ee=new Map;function st(r,a){const u=be(r,a),i=document.querySelector(u);if(i!=null&&i.textContent){const{body:p,...f}=JSON.parse(i.textContent),v=i.getAttribute("data-ttl");return v&&ee.set(u,{body:p,init:f,ttl:1e3*Number(v)}),Promise.resolve(new Response(p,f))}return ue(r,a)}function it(r,a,u){if(ee.size>0){const i=be(r,u),p=ee.get(i);if(p){if(performance.now()<p.ttl&&["default","force-cache","only-if-cached",void 0].includes(u==null?void 0:u.cache))return new Response(p.body,p.init);ee.delete(i)}}return ue(a,u)}function be(r,a){let u=`script[data-sveltekit-fetched][data-url=${JSON.stringify(r instanceof Request?r.url:r)}]`;if(a!=null&&a.headers||a!=null&&a.body){const i=[];a.headers&&i.push([...new Headers(a.headers)].join(",")),a.body&&(typeof a.body=="string"||ArrayBuffer.isView(a.body))&&i.push(a.body),u+=`[data-hash="${ot(...i)}"]`}return u}const lt=/^(\[)?(\.\.\.)?(\w+)(?:=(\w+))?(\])?$/;function ct(r){const a=[];return{pattern:r==="/"?/^\/$/:new RegExp(`^${ft(r).map(u=>{const i=/^\[\.\.\.(\w+)(?:=(\w+))?\]$/.exec(u);if(i)return a.push({name:i[1],matcher:i[2],optional:!1,rest:!0,chained:!0}),"(?:/(.*))?";const p=/^\[\[(\w+)(?:=(\w+))?\]\]$/.exec(u);if(p)return a.push({name:p[1],matcher:p[2],optional:!0,rest:!1,chained:!0}),"(?:/([^/]+))?";if(!u)return;const f=u.split(/\[(.+?)\](?!\])/);return"/"+f.map((v,l)=>{if(l%2){if(v.startsWith("x+"))return _e(String.fromCharCode(parseInt(v.slice(2),16)));if(v.startsWith("u+"))return _e(String.fromCharCode(...v.slice(2).split("-").map(L=>parseInt(L,16))));const g=lt.exec(v);if(!g)throw new Error(`Invalid param: ${v}. Params and matcher names can only have underscores and alphanumeric characters.`);const[,h,d,C,D]=g;return a.push({name:C,matcher:D,optional:!!h,rest:!!d,chained:d?l===1&&f[0]==="":!1}),d?"(.*?)":h?"([^/]*)?":"([^/]+?)"}return _e(v)}).join("")}).join("")}/?$`),params:a}}function ut(r){return!/^\([^)]+\)$/.test(r)}function ft(r){return r.slice(1).split("/").filter(ut)}function dt(r,a,u){const i={},p=r.slice(1),f=p.filter(l=>l!==void 0);let v=0;for(let l=0;l<a.length;l+=1){const g=a[l];let h=p[l-v];if(g.chained&&g.rest&&v&&(h=p.slice(l-v,l+1).filter(d=>d).join("/"),v=0),h===void 0){g.rest&&(i[g.name]="");continue}if(!g.matcher||u[g.matcher](h)){i[g.name]=h;const d=a[l+1],C=p[l+1];d&&!d.rest&&d.optional&&C&&g.chained&&(v=0),!d&&!C&&Object.keys(i).length===f.length&&(v=0);continue}if(g.optional&&g.chained){v++;continue}return}if(!v)return i}function _e(r){return r.normalize().replace(/[[\]]/g,"\\$&").replace(/%/g,"%25").replace(/\//g,"%2[Ff]").replace(/\?/g,"%3[Ff]").replace(/#/g,"%23").replace(/[.*+?^${}()|\\]/g,"\\$&")}function pt({nodes:r,server_loads:a,dictionary:u,matchers:i}){const p=new Set(a);return Object.entries(u).map(([l,[g,h,d]])=>{const{pattern:C,params:D}=ct(l),L={id:l,exec:N=>{const j=C.exec(N);if(j)return dt(j,D,i)},errors:[1,...d||[]].map(N=>r[N]),layouts:[0,...h||[]].map(v),leaf:f(g)};return L.errors.length=L.layouts.length=Math.max(L.errors.length,L.layouts.length),L});function f(l){const g=l<0;return g&&(l=~l),[g,r[l]]}function v(l){return l===void 0?l:[p.has(l),r[l]]}}function Be(r){try{return JSON.parse(sessionStorage[r])}catch{}}function Je(r,a){const u=JSON.stringify(a);try{sessionStorage[r]=u}catch{}}const ht=-1,mt=-2,gt=-3,yt=-4,wt=-5,vt=-6;function bt(r,a){if(typeof r=="number")return p(r,!0);if(!Array.isArray(r)||r.length===0)throw new Error("Invalid input");const u=r,i=Array(u.length);function p(f,v=!1){if(f===ht)return;if(f===gt)return NaN;if(f===yt)return 1/0;if(f===wt)return-1/0;if(f===vt)return-0;if(v)throw new Error("Invalid input");if(f in i)return i[f];const l=u[f];if(!l||typeof l!="object")i[f]=l;else if(Array.isArray(l))if(typeof l[0]=="string"){const g=l[0],h=a==null?void 0:a[g];if(h)return i[f]=h(p(l[1]));switch(g){case"Date":i[f]=new Date(l[1]);break;case"Set":const d=new Set;i[f]=d;for(let L=1;L<l.length;L+=1)d.add(p(l[L]));break;case"Map":const C=new Map;i[f]=C;for(let L=1;L<l.length;L+=2)C.set(p(l[L]),p(l[L+1]));break;case"RegExp":i[f]=new RegExp(l[1],l[2]);break;case"Object":i[f]=Object(l[1]);break;case"BigInt":i[f]=BigInt(l[1]);break;case"null":const D=Object.create(null);i[f]=D;for(let L=1;L<l.length;L+=2)D[l[L]]=p(l[L+1]);break;default:throw new Error(`Unknown type ${g}`)}}else{const g=new Array(l.length);i[f]=g;for(let h=0;h<l.length;h+=1){const d=l[h];d!==mt&&(g[h]=p(d))}}else{const g={};i[f]=g;for(const h in l){const d=l[h];g[h]=p(d)}}return i[f]}return p(0)}function _t(r){return r.filter(a=>a!=null)}const Fe=new Set(["load","prerender","csr","ssr","trailingSlash","config"]);[...Fe];const St=new Set([...Fe]);[...St];async function Et(r){var a;for(const u in r)if(typeof((a=r[u])==null?void 0:a.then)=="function")return Object.fromEntries(await Promise.all(Object.entries(r).map(async([i,p])=>[i,await p])));return r}class te{constructor(a,u){this.status=a,typeof u=="string"?this.body={message:u}:u?this.body=u:this.body={message:`Error: ${a}`}}toString(){return JSON.stringify(this.body)}}class He{constructor(a,u){this.status=a,this.location=u}}const kt="x-sveltekit-invalidated",Lt="x-sveltekit-trailing-slash",G=Be(Ne)??{},re=Be(Te)??{};function Se(r){G[r]=Z()}function At(r,a){var Oe;const u=pt(r),i=r.nodes[0],p=r.nodes[1];i(),p();const f=document.documentElement,v=[],l=[];let g=null;const h={before_navigate:[],on_navigate:[],after_navigate:[]};let d={branch:[],error:null,url:null},C=!1,D=!1,L=!0,N=!1,j=!1,F=!1,H=!1,q,O=(Oe=history.state)==null?void 0:Oe[M];O||(O=Date.now(),history.replaceState({...history.state,[M]:O},"",location.href));const fe=G[O];fe&&(history.scrollRestoration="manual",scrollTo(fe.x,fe.y));let B,ne,z;async function ke(){if(z=z||Promise.resolve(),await z,!z)return;z=null;const e=new URL(location.href),s=X(e,!0);g=null;const t=ne={},o=s&&await he(s);if(t===ne&&o){if(o.type==="redirect")return ae(new URL(o.location,e).href,{},[e.pathname],t);o.props.page!==void 0&&(B=o.props.page),q.$set(o.props)}}function Le(e){l.some(s=>s==null?void 0:s.snapshot)&&(re[e]=l.map(s=>{var t;return(t=s==null?void 0:s.snapshot)==null?void 0:t.capture()}))}function Ae(e){var s;(s=re[e])==null||s.forEach((t,o)=>{var n,c;(c=(n=l[o])==null?void 0:n.snapshot)==null||c.restore(t)})}function Pe(){Se(O),Je(Ne,G),Le(O),Je(Te,re)}async function ae(e,{noScroll:s=!1,replaceState:t=!1,keepFocus:o=!1,state:n={},invalidateAll:c=!1},m,b){return typeof e=="string"&&(e=new URL(e,Me(document))),le({url:e,scroll:s?Z():null,keepfocus:o,redirect_chain:m,details:{state:n,replaceState:t},nav_token:b,accepted:()=>{c&&(H=!0)},blocked:()=>{},type:"goto"})}async function xe(e){return g={id:e.id,promise:he(e).then(s=>(s.type==="loaded"&&s.state.error&&(g=null),s))},g.promise}async function oe(...e){const s=u.filter(t=>e.some(o=>t.exec(o))).map(t=>Promise.all([...t.layouts,t.leaf].map(o=>o==null?void 0:o[1]())));await Promise.all(s)}function Ue(e){var o;d=e.state;const s=document.querySelector("style[data-sveltekit]");s&&s.remove(),B=e.props.page,q=new r.root({target:a,props:{...e.props,stores:J,components:l},hydrate:!0}),Ae(O);const t={from:null,to:{params:d.params,route:{id:((o=d.route)==null?void 0:o.id)??null},url:new URL(location.href)},willUnload:!1,type:"enter",complete:Promise.resolve()};h.after_navigate.forEach(n=>n(t)),D=!0}async function Q({url:e,params:s,branch:t,status:o,error:n,route:c,form:m}){let b="never";for(const E of t)(E==null?void 0:E.slash)!==void 0&&(b=E.slash);e.pathname=Xe(e.pathname,b),e.search=e.search;const w={type:"loaded",state:{url:e,params:s,branch:t,error:n,route:c},props:{constructors:_t(t).map(E=>E.node.component)}};m!==void 0&&(w.props.form=m);let _={},x=!B,P=0;for(let E=0;E<Math.max(t.length,d.branch.length);E+=1){const S=t[E],y=d.branch[E];(S==null?void 0:S.data)!==(y==null?void 0:y.data)&&(x=!0),S&&(_={..._,...S.data},x&&(w.props[`data_${P}`]=_),P+=1)}return(!d.url||e.href!==d.url.href||d.error!==n||m!==void 0&&m!==B.form||x)&&(w.props.page={error:n,params:s,route:{id:(c==null?void 0:c.id)??null},status:o,url:new URL(e),form:m??null,data:x?_:B.data}),w}async function de({loader:e,parent:s,url:t,params:o,route:n,server_data_node:c}){var _,x,P;let m=null;const b={dependencies:new Set,params:new Set,parent:!1,route:!1,url:!1},w=await e();if((_=w.universal)!=null&&_.load){let E=function(...y){for(const R of y){const{href:$}=new URL(R,t);b.dependencies.add($)}};const S={route:new Proxy(n,{get:(y,R)=>(b.route=!0,y[R])}),params:new Proxy(o,{get:(y,R)=>(b.params.add(R),y[R])}),data:(c==null?void 0:c.data)??null,url:tt(t,()=>{b.url=!0}),async fetch(y,R){let $;y instanceof Request?($=y.url,R={body:y.method==="GET"||y.method==="HEAD"?void 0:await y.blob(),cache:y.cache,credentials:y.credentials,headers:y.headers,integrity:y.integrity,keepalive:y.keepalive,method:y.method,mode:y.mode,redirect:y.redirect,referrer:y.referrer,referrerPolicy:y.referrerPolicy,signal:y.signal,...R}):$=y;const T=new URL($,t);return E(T.href),T.origin===t.origin&&($=T.href.slice(t.origin.length)),D?it($,T.href,R):st($,R)},setHeaders:()=>{},depends:E,parent(){return b.parent=!0,s()}};m=await w.universal.load.call(null,S)??null,m=m?await Et(m):null}return{node:w,loader:e,server:c,universal:(x=w.universal)!=null&&x.load?{type:"data",data:m,uses:b}:null,data:m??(c==null?void 0:c.data)??null,slash:((P=w.universal)==null?void 0:P.trailingSlash)??(c==null?void 0:c.slash)}}function je(e,s,t,o,n){if(H)return!0;if(!o)return!1;if(o.parent&&e||o.route&&s||o.url&&t)return!0;for(const c of o.params)if(n[c]!==d.params[c])return!0;for(const c of o.dependencies)if(v.some(m=>m(new URL(c))))return!0;return!1}function pe(e,s){return(e==null?void 0:e.type)==="data"?e:(e==null?void 0:e.type)==="skip"?s??null:null}async function he({id:e,invalidating:s,url:t,params:o,route:n}){if((g==null?void 0:g.id)===e)return g.promise;const{errors:c,layouts:m,leaf:b}=n,w=[...m,b];c.forEach(k=>k==null?void 0:k().catch(()=>{})),w.forEach(k=>k==null?void 0:k[1]().catch(()=>{}));let _=null;const x=d.url?e!==d.url.pathname+d.url.search:!1,P=d.route?n.id!==d.route.id:!1;let E=!1;const S=w.map((k,U)=>{var V;const A=d.branch[U],I=!!(k!=null&&k[0])&&((A==null?void 0:A.loader)!==k[1]||je(E,P,x,(V=A.server)==null?void 0:V.uses,o));return I&&(E=!0),I});if(S.some(Boolean)){try{_=await We(t,S)}catch(k){return se({status:k instanceof te?k.status:500,error:await Y(k,{url:t,params:o,route:{id:n.id}}),url:t,route:n})}if(_.type==="redirect")return _}const y=_==null?void 0:_.nodes;let R=!1;const $=w.map(async(k,U)=>{var V;if(!k)return;const A=d.branch[U],I=y==null?void 0:y[U];if((!I||I.type==="skip")&&k[1]===(A==null?void 0:A.loader)&&!je(R,P,x,(V=A.universal)==null?void 0:V.uses,o))return A;if(R=!0,(I==null?void 0:I.type)==="error")throw I;return de({loader:k[1],url:t,params:o,route:n,parent:async()=>{var De;const Ce={};for(let me=0;me<U;me+=1)Object.assign(Ce,(De=await $[me])==null?void 0:De.data);return Ce},server_data_node:pe(I===void 0&&k[0]?{type:"skip"}:I??null,k[0]?A==null?void 0:A.server:void 0)})});for(const k of $)k.catch(()=>{});const T=[];for(let k=0;k<w.length;k+=1)if(w[k])try{T.push(await $[k])}catch(U){if(U instanceof He)return{type:"redirect",location:U.location};let A=500,I;if(y!=null&&y.includes(U))A=U.status??A,I=U.error;else if(U instanceof te)A=U.status,I=U.body;else{if(await J.updated.check())return await K(t);I=await Y(U,{params:o,url:t,route:{id:n.id}})}const V=await Re(k,T,c);return V?await Q({url:t,params:o,branch:T.slice(0,V.idx).concat(V.node),status:A,error:I,route:n}):await Ie(t,{id:n.id},I,A)}else T.push(void 0);return await Q({url:t,params:o,branch:T,status:200,error:null,route:n,form:s?void 0:null})}async function Re(e,s,t){for(;e--;)if(t[e]){let o=e;for(;!s[o];)o-=1;try{return{idx:o+1,node:{node:await t[e](),loader:t[e],data:{},server:null,universal:null}}}catch{continue}}}async function se({status:e,error:s,url:t,route:o}){const n={};let c=null;if(r.server_loads[0]===0)try{const w=await We(t,[!0]);if(w.type!=="data"||w.nodes[0]&&w.nodes[0].type!=="data")throw 0;c=w.nodes[0]??null}catch{(t.origin!==location.origin||t.pathname!==location.pathname||C)&&await K(t)}const m=await de({loader:i,url:t,params:n,route:o,parent:()=>Promise.resolve({}),server_data_node:pe(c)}),b={node:await p(),loader:p,universal:null,server:null,data:null};return await Q({url:t,params:n,branch:[m,b],status:e,error:s,route:null})}function X(e,s){if(ve(e,W))return;const t=ie(e);for(const o of u){const n=o.exec(t);if(n)return{id:e.pathname+e.search,invalidating:s,route:o,params:Ze(n),url:e}}}function ie(e){return Ye(e.pathname.slice(W.length)||"/")}function $e({url:e,type:s,intent:t,delta:o}){let n=!1;const c=Ke(d,t,e,s);o!==void 0&&(c.navigation.delta=o);const m={...c.navigation,cancel:()=>{n=!0,c.reject(new Error("navigation was cancelled"))}};return j||h.before_navigate.forEach(b=>b(m)),n?null:c}async function le({url:e,scroll:s,keepfocus:t,redirect_chain:o,details:n,type:c,delta:m,nav_token:b={},accepted:w,blocked:_}){var $,T,k;const x=X(e,!1),P=$e({url:e,type:c,delta:m,intent:x});if(!P){_();return}const E=O;w(),j=!0,D&&J.navigating.set(P.navigation),ne=b;let S=x&&await he(x);if(!S){if(ve(e,W))return await K(e);S=await Ie(e,{id:null},await Y(new Error(`Not found: ${e.pathname}`),{url:e,params:{},route:{id:null}}),404)}if(e=(x==null?void 0:x.url)||e,ne!==b)return P.reject(new Error("navigation was aborted")),!1;if(S.type==="redirect")if(o.length>10||o.includes(e.pathname))S=await se({status:500,error:await Y(new Error("Redirect loop"),{url:e,params:{},route:{id:null}}),url:e,route:{id:null}});else return ae(new URL(S.location,e).href,{},[...o,e.pathname],b),!1;else(($=S.props.page)==null?void 0:$.status)>=400&&await J.updated.check()&&await K(e);if(v.length=0,H=!1,N=!0,Se(E),Le(E),(T=S.props.page)!=null&&T.url&&S.props.page.url.pathname!==e.pathname&&(e.pathname=(k=S.props.page)==null?void 0:k.url.pathname),n){const U=n.replaceState?0:1;if(n.state[M]=O+=U,history[n.replaceState?"replaceState":"pushState"](n.state,"",e),!n.replaceState){let A=O+1;for(;re[A]||G[A];)delete re[A],delete G[A],A+=1}}if(g=null,D){d=S.state,S.props.page&&(S.props.page.url=e);const U=(await Promise.all(h.on_navigate.map(A=>A(P.navigation)))).filter(A=>typeof A=="function");if(U.length>0){let A=function(){h.after_navigate=h.after_navigate.filter(I=>!U.includes(I))};U.push(A),h.after_navigate.push(...U)}q.$set(S.props)}else Ue(S);const{activeElement:y}=document;if(await ye(),L){const U=e.hash&&document.getElementById(decodeURIComponent(e.hash.slice(1)));s?scrollTo(s.x,s.y):U?U.scrollIntoView():scrollTo(0,0)}const R=document.activeElement!==y&&document.activeElement!==document.body;!t&&!R&&Ee(),L=!0,S.props.page&&(B=S.props.page),j=!1,c==="popstate"&&Ae(O),P.fulfil(void 0),h.after_navigate.forEach(U=>U(P.navigation)),J.navigating.set(null),N=!1}async function Ie(e,s,t,o){return e.origin===location.origin&&e.pathname===location.pathname&&!C?await se({status:o,error:t,url:e,route:s}):await K(e)}function K(e){return location.href=e.href,new Promise(()=>{})}function ze(){let e;f.addEventListener("mousemove",c=>{const m=c.target;clearTimeout(e),e=setTimeout(()=>{o(m,2)},20)});function s(c){o(c.composedPath()[0],1)}f.addEventListener("mousedown",s),f.addEventListener("touchstart",s,{passive:!0});const t=new IntersectionObserver(c=>{for(const m of c)m.isIntersecting&&(oe(ie(new URL(m.target.href))),t.unobserve(m.target))},{threshold:0});function o(c,m){const b=qe(c,f);if(!b)return;const{url:w,external:_,download:x}=we(b,W);if(_||x)return;const P=ce(b);if(!P.reload)if(m<=P.preload_data){const E=X(w,!1);E&&xe(E)}else m<=P.preload_code&&oe(ie(w))}function n(){t.disconnect();for(const c of f.querySelectorAll("a")){const{url:m,external:b,download:w}=we(c,W);if(b||w)continue;const _=ce(c);_.reload||(_.preload_code===Ve.viewport&&t.observe(c),_.preload_code===Ve.eager&&oe(ie(m)))}}h.after_navigate.push(n),n()}function Y(e,s){return e instanceof te?e.body:r.hooks.handleError({error:e,event:s})??{message:s.route.id!=null?"Internal Error":"Not Found"}}return{after_navigate:e=>{ge(()=>(h.after_navigate.push(e),()=>{const s=h.after_navigate.indexOf(e);h.after_navigate.splice(s,1)}))},before_navigate:e=>{ge(()=>(h.before_navigate.push(e),()=>{const s=h.before_navigate.indexOf(e);h.before_navigate.splice(s,1)}))},on_navigate:e=>{ge(()=>(h.on_navigate.push(e),()=>{const s=h.on_navigate.indexOf(e);h.on_navigate.splice(s,1)}))},disable_scroll_handling:()=>{(N||!D)&&(L=!1)},goto:(e,s={})=>ae(e,s,[]),invalidate:e=>{if(typeof e=="function")v.push(e);else{const{href:s}=new URL(e,location.href);v.push(t=>t.href===s)}return ke()},invalidate_all:()=>(H=!0,ke()),preload_data:async e=>{const s=new URL(e,Me(document)),t=X(s,!1);if(!t)throw new Error(`Attempted to preload a URL that does not belong to this app: ${s}`);await xe(t)},preload_code:oe,apply_action:async e=>{if(e.type==="error"){const s=new URL(location.href),{branch:t,route:o}=d;if(!o)return;const n=await Re(d.branch.length,t,o.errors);if(n){const c=await Q({url:s,params:d.params,branch:t.slice(0,n.idx).concat(n.node),status:e.status??500,error:e.error,route:o});d=c.state,q.$set(c.props),ye().then(Ee)}}else e.type==="redirect"?ae(e.location,{invalidateAll:!0},[]):(q.$set({form:null,page:{...B,form:e.data,status:e.status}}),await ye(),q.$set({form:e.data}),e.type==="success"&&Ee())},_start_router:()=>{var s;history.scrollRestoration="manual",addEventListener("beforeunload",t=>{let o=!1;if(Pe(),!j){const n=Ke(d,void 0,null,"leave"),c={...n.navigation,cancel:()=>{o=!0,n.reject(new Error("navigation was cancelled"))}};h.before_navigate.forEach(m=>m(c))}o?(t.preventDefault(),t.returnValue=""):history.scrollRestoration="auto"}),addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&Pe()}),(s=navigator.connection)!=null&&s.saveData||ze(),f.addEventListener("click",t=>{var P;if(t.button||t.which!==1||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey||t.defaultPrevented)return;const o=qe(t.composedPath()[0],f);if(!o)return;const{url:n,external:c,target:m,download:b}=we(o,W);if(!n)return;if(m==="_parent"||m==="_top"){if(window.parent!==window)return}else if(m&&m!=="_self")return;const w=ce(o);if(!(o instanceof SVGAElement)&&n.protocol!==location.protocol&&!(n.protocol==="https:"||n.protocol==="http:")||b)return;if(c||w.reload){$e({url:n,type:"link"})?j=!0:t.preventDefault();return}const[_,x]=n.href.split("#");if(x!==void 0&&_===location.href.split("#")[0]){if(d.url.hash===n.hash){t.preventDefault(),(P=o.ownerDocument.getElementById(x))==null||P.scrollIntoView();return}if(F=!0,Se(O),e(n),!w.replace_state)return;F=!1,t.preventDefault()}le({url:n,scroll:w.noscroll?Z():null,keepfocus:w.keep_focus??!1,redirect_chain:[],details:{state:{},replaceState:w.replace_state??n.href===location.href},accepted:()=>t.preventDefault(),blocked:()=>t.preventDefault(),type:"link"})}),f.addEventListener("submit",t=>{if(t.defaultPrevented)return;const o=HTMLFormElement.prototype.cloneNode.call(t.target),n=t.submitter;if(((n==null?void 0:n.formMethod)||o.method)!=="get")return;const c=new URL((n==null?void 0:n.hasAttribute("formaction"))&&(n==null?void 0:n.formAction)||o.action);if(ve(c,W))return;const m=t.target,{keep_focus:b,noscroll:w,reload:_,replace_state:x}=ce(m);if(_)return;t.preventDefault(),t.stopPropagation();const P=new FormData(m),E=n==null?void 0:n.getAttribute("name");E&&P.append(E,(n==null?void 0:n.getAttribute("value"))??""),c.search=new URLSearchParams(P).toString(),le({url:c,scroll:w?Z():null,keepfocus:b??!1,redirect_chain:[],details:{state:{},replaceState:x??c.href===location.href},nav_token:{},accepted:()=>{},blocked:()=>{},type:"form"})}),addEventListener("popstate",async t=>{var o;if((o=t.state)!=null&&o[M]){if(t.state[M]===O)return;const n=G[t.state[M]];if(d.url.href.split("#")[0]===location.href.split("#")[0]){G[O]=Z(),O=t.state[M],scrollTo(n.x,n.y);return}const c=t.state[M]-O;await le({url:new URL(location.href),scroll:n,keepfocus:!1,redirect_chain:[],details:null,accepted:()=>{O=t.state[M]},blocked:()=>{history.go(-c)},type:"popstate",delta:c})}else if(!F){const n=new URL(location.href);e(n)}}),addEventListener("hashchange",()=>{F&&(F=!1,history.replaceState({...history.state,[M]:++O},"",location.href))});for(const t of document.querySelectorAll("link"))t.rel==="icon"&&(t.href=t.href);addEventListener("pageshow",t=>{t.persisted&&J.navigating.set(null)});function e(t){d.url=t,J.page.set({...B,url:t}),J.page.notify()}},_hydrate:async({status:e=200,error:s,node_ids:t,params:o,route:n,data:c,form:m})=>{C=!0;const b=new URL(location.href);({params:o={},route:n={id:null}}=X(b,!1)||{});let w;try{const _=t.map(async(E,S)=>{const y=c[S];return y!=null&&y.uses&&(y.uses=Ge(y.uses)),de({loader:r.nodes[E],url:b,params:o,route:n,parent:async()=>{const R={};for(let $=0;$<S;$+=1)Object.assign(R,(await _[$]).data);return R},server_data_node:pe(y)})}),x=await Promise.all(_),P=u.find(({id:E})=>E===n.id);if(P){const E=P.layouts;for(let S=0;S<E.length;S++)E[S]||x.splice(S,0,void 0)}w=await Q({url:b,params:o,branch:x,status:e,error:s,form:m,route:P??null})}catch(_){if(_ instanceof He){await K(new URL(_.location,location.href));return}w=await se({status:_ instanceof te?_.status:500,error:await Y(_,{url:b,params:o,route:n}),url:b,route:n})}Ue(w)}}}async function We(r,a){const u=new URL(r);u.pathname=at(r.pathname),r.pathname.endsWith("/")&&u.searchParams.append(Lt,"1"),u.searchParams.append(kt,a.map(p=>p?"1":"0").join(""));const i=await ue(u.href);if(!i.ok)throw new te(i.status,await i.json());return new Promise(async p=>{var d;const f=new Map,v=i.body.getReader(),l=new TextDecoder;function g(C){return bt(C,{Promise:D=>new Promise((L,N)=>{f.set(D,{fulfil:L,reject:N})})})}let h="";for(;;){const{done:C,value:D}=await v.read();if(C&&!h)break;for(h+=!D&&h?`
`:l.decode(D);;){const L=h.indexOf(`
`);if(L===-1)break;const N=JSON.parse(h.slice(0,L));if(h=h.slice(L+1),N.type==="redirect")return p(N);if(N.type==="data")(d=N.nodes)==null||d.forEach(j=>{(j==null?void 0:j.type)==="data"&&(j.uses=Ge(j.uses),j.data=g(j.data))}),p(N);else if(N.type==="chunk"){const{id:j,data:F,error:H}=N,q=f.get(j);f.delete(j),H?q.reject(g(H)):q.fulfil(g(F))}}}})}function Ge(r){return{dependencies:new Set((r==null?void 0:r.dependencies)??[]),params:new Set((r==null?void 0:r.params)??[]),parent:!!(r!=null&&r.parent),route:!!(r!=null&&r.route),url:!!(r!=null&&r.url)}}function Ee(){const r=document.querySelector("[autofocus]");if(r)r.focus();else{const a=document.body,u=a.getAttribute("tabindex");a.tabIndex=-1,a.focus({preventScroll:!0,focusVisible:!1}),u!==null?a.setAttribute("tabindex",u):a.removeAttribute("tabindex");const i=getSelection();if(i&&i.type!=="None"){const p=[];for(let f=0;f<i.rangeCount;f+=1)p.push(i.getRangeAt(f));setTimeout(()=>{if(i.rangeCount===p.length){for(let f=0;f<i.rangeCount;f+=1){const v=p[f],l=i.getRangeAt(f);if(v.commonAncestorContainer!==l.commonAncestorContainer||v.startContainer!==l.startContainer||v.endContainer!==l.endContainer||v.startOffset!==l.startOffset||v.endOffset!==l.endOffset)return}i.removeAllRanges()}})}}}function Ke(r,a,u,i){var l,g;let p,f;const v=new Promise((h,d)=>{p=h,f=d});return v.catch(()=>{}),{navigation:{from:{params:r.params,route:{id:((l=r.route)==null?void 0:l.id)??null},url:r.url},to:u&&{params:(a==null?void 0:a.params)??null,route:{id:((g=a==null?void 0:a.route)==null?void 0:g.id)??null},url:u},willUnload:!a,type:i,complete:v},fulfil:p,reject:f}}async function Pt(r,a,u){const i=At(r,a);Qe({client:i}),u?await i._hydrate(u):i.goto(location.href,{replaceState:!0}),i._start_router()}export{Pt as start};
